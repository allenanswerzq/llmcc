================================================================================
Identifiers
================================================================================

--- file: src/main.rs ---
fn main() {
  abc;
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Raw identifiers
================================================================================

--- file: src/main.rs ---
fn main() {
  (r#abc as r#Def).r#ghi;
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Unary operator expressions
================================================================================

--- file: src/main.rs ---
-num;
!bits;
*boxed_thing;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Reference expressions
================================================================================

--- file: src/main.rs ---
&a;
&mut self.name;
&raw const b;
&raw mut self.age;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Try expressions
================================================================================

--- file: src/main.rs ---
a.unwrap()?;
&a?;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Binary operator expressions
================================================================================

--- file: src/main.rs ---
a * b;
a / b;
a % b;
a + b;
a - b;
a >> b;
a << b;
a == b;
a && b;
a || b;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Grouped expressions
================================================================================

--- file: src/main.rs ---
(0);
(2 * (3 + 4));

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Range expressions
================================================================================

--- file: src/main.rs ---
1..2;
3..;
..4;
..;
1..b;
a..b;
1..(1);
(1)..1;
(1)..(1);
1..{1};
for i in 1.. {
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Assignment expressions
================================================================================

--- file: src/main.rs ---
x = y;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Compound assignment expressions
================================================================================

--- file: src/main.rs ---
x += 1;
x += y;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Type cast expressions
================================================================================

--- file: src/main.rs ---
1000 as u8;
let character = integer as char;
let size: f64 = 1.0 + -len(values) as f64 + 1.0;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Call expressions
================================================================================

--- file: src/main.rs ---
foo();
add(1i32, 2i32);
add(
    1i32,
    2i32,
);

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Array expressions
================================================================================

--- file: src/main.rs ---
[];
[1, 2, 3];
["a", "b", "c"];
[0; 128];
[
    #[cfg(foo)]
    "foo",
    #[cfg(bar)]
    "bar",
];

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Tuple expressions
================================================================================

--- file: src/main.rs ---
();
(0,);
let (x, y, z) = (1, 2, 3);

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Struct expressions
================================================================================

--- file: src/main.rs ---
NothingInMe {};
Point {x: 10.0, y: 20.0};
let a = SomeStruct { field1, field2: expression, field3, };
let u = game::User {name: "Joe", age: 35, score: 100_000};
let i = Instant { 0: Duration::from_millis(0) };

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Struct expressions with update initializers
================================================================================

--- file: src/main.rs ---
let u = User{name, ..current_user()};

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
If expressions
================================================================================

--- file: src/main.rs ---
fn main() {
  if n == 1 {
  } else if n == 2 {
  } else {
  }
}

let y = if x == 5 { 10 } else { 15 };

if foo && bar {}

if foo && bar || baz {}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Basic if let expressions
================================================================================

--- file: src/main.rs ---
if let Some(a) = b
    && c
    && d
    && let Some(e) = f
{
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
If let expressions
================================================================================

--- file: src/main.rs ---
if let ("Bacon", b) = dish {
}

if let Some("chained") = a && b && let (C, D) = e {
}

if foo && let bar = || baz && quux {}

if a && let b = || c || d && e {}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
While let expressions
================================================================================

--- file: src/main.rs ---
while let ("Bacon", b) = dish {
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Match expressions
================================================================================

--- file: src/main.rs ---
match x {
    1 => { "one" }
    2 => "two",
    -1 => 1,
    -3.14 => 3,

    #[attr1]
    3 => "three",
    macro!(4) => "four",
    _ => "something else",
}

let msg = match x {
    0 | 1 | 10 => "one of zero, one, or ten",
    y if y < 20 => "less than 20, but not zero, one, or ten",
    y if y == 200 =>
      if a {
        "200 (but this is not very stylish)"
      }
    y if let Some(z) = foo && z && let Some(w) = bar => "very chained",
    _ => "something else",
};

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
While expressions
================================================================================

--- file: src/main.rs ---
while !done {
  done = true;
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Loop expressions
================================================================================

--- file: src/main.rs ---
'outer: loop {
  'inner: loop {
    break 'outer;
    break true;
  }
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
For expressions
================================================================================

--- file: src/main.rs ---
for e in v {
  bar(e);
}

for i in 0..256 {
  bar(i);
}

'outer: for x in 0..10 {
    'inner: for y in 0..10 {
        if x % 2 == 0 { continue 'outer; }
        if y % 2 == 0 { continue 'inner; }
    }
}

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Field expressions
================================================================================

--- file: src/main.rs ---
mystruct.myfield;
foo().x;
value.0.1.iter();
1.max(2);

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Method call expressions
================================================================================

--- file: src/main.rs ---
mystruct.foo();

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Index expressions
================================================================================

--- file: src/main.rs ---
([1, 2, 3, 4])[0];
arr[10];
arr[n];

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Scoped functions
================================================================================

--- file: src/main.rs ---
a::b();
C::<D>::e();
::f();
::g::h();

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Scoped functions with fully qualified syntax
================================================================================

--- file: src/main.rs ---
<Dog as Animal>::eat(d);

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Scoped functions with macros as types
================================================================================

--- file: src/main.rs ---
<Token![]>::foo();

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Scoped identifier with nested super
================================================================================

--- file: src/main.rs ---
super::super::foo();

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Generic functions
================================================================================

--- file: src/main.rs ---
std::sizeof::<u32>();
foo::<8>();

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Closures
================================================================================

--- file: src/main.rs ---
a.map(|(b, c)| b.push(c));
d.map(move |mut e| {
    f(e);
    g(e)
});
h(|| -> i { j });

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Closures with typed parameteres
================================================================================

--- file: src/main.rs ---
a.map(|b: usize| b.push(c));

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Generators
================================================================================

--- file: src/main.rs ---
move || {
    while i <= n {
        yield i;
        i += 1;
    }
    return;
};

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Unsafe blocks
================================================================================

--- file: src/main.rs ---
const a : A = unsafe { foo() };

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Inline const or Const blocks as expression
================================================================================

--- file: src/main.rs ---
const { 1 + 3 };
if *x < 0 { const { &4i32.pow(4) } } else { x }
let three_ranges = [const { (0..=5).into_inner() }; 3];

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---



================================================================================
Raw reference expression conflicts
================================================================================

--- file: src/main.rs ---
some_call(&raw);
let a = &raw const b;

--- expect:symbols ---


--- expect:graph ---


--- expect:bind ---


