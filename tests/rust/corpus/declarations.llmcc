===============================================================================
modules
===============================================================================


--- file: src/main.rs ---
mod english;

mod english {}

mod english {
    mod greetings {}
    mod farewells {}
}

pub mod english;

--- expect:symbols ---
u0:1  | Type      | i32       | i32                            | [global]
u0:2  | Type      | i64       | i64                            | [global]
u0:3  | Type      | i16       | i16                            | [global]
u0:4  | Type      | i8        | i8                             | [global]
u0:5  | Type      | i128      | i128                           | [global]
u0:6  | Type      | isize     | isize                          | [global]
u0:7  | Type      | u32       | u32                            | [global]
u0:8  | Type      | u64       | u64                            | [global]
u0:9  | Type      | u16       | u16                            | [global]
u0:10 | Type      | u8        | u8                             | [global]
u0:11 | Type      | u128      | u128                           | [global]
u0:12 | Type      | usize     | usize                          | [global]
u0:13 | Type      | f32       | f32                            | [global]
u0:14 | Type      | f64       | f64                            | [global]
u0:15 | Type      | bool      | bool                           | [global]
u0:16 | Type      | char      | char                           | [global]
u0:17 | Type      | str       | str                            | [global]
u0:18 | Module    | main      | main                           | [global]
u0:19 | File      | main      | main::main                     |         
u0:20 | Namespace | english   | main::main::english            |         
u0:21 | Namespace | greetings | main::main::english::greetings |         
u0:22 | Namespace | farewells | main::main::english::farewells |         

--- expect:symbol-deps ---


===============================================================================
extern-crate-declarations
===============================================================================


--- file: src/main.rs ---
extern crate std;
extern crate std as ruststd;
pub extern crate futures;

--- expect:symbols ---
u0:1  | Type   | i32   | i32        | [global]
u0:2  | Type   | i64   | i64        | [global]
u0:3  | Type   | i16   | i16        | [global]
u0:4  | Type   | i8    | i8         | [global]
u0:5  | Type   | i128  | i128       | [global]
u0:6  | Type   | isize | isize      | [global]
u0:7  | Type   | u32   | u32        | [global]
u0:8  | Type   | u64   | u64        | [global]
u0:9  | Type   | u16   | u16        | [global]
u0:10 | Type   | u8    | u8         | [global]
u0:11 | Type   | u128  | u128       | [global]
u0:12 | Type   | usize | usize      | [global]
u0:13 | Type   | f32   | f32        | [global]
u0:14 | Type   | f64   | f64        | [global]
u0:15 | Type   | bool  | bool       | [global]
u0:16 | Type   | char  | char       | [global]
u0:17 | Type   | str   | str        | [global]
u0:18 | Module | main  | main       | [global]
u0:19 | File   | main  | main::main |         

--- expect:symbol-deps ---


===============================================================================
function-declarations
===============================================================================


--- file: src/main.rs ---
fn main() {}

fn add(x: i32, y: i32) -> i32 {
    return x + y;
}

fn takes_slice(slice: &str) {
    println!("Got: {}", slice);
}

fn foo() -> [u32; 2] {
    return [1, 2];
}

fn foo() -> (u32, u16) {
    return (1, 2);
}

fn foo() {
    return
}

fn foo(x: impl FnOnce() -> result::Result<T, E>) {}

fn foo(#[attr] x: i32, #[attr] x: i64) {}

fn accumulate(self) -> Machine<{State::Accumulate}> {}

fn foo(bar: impl for<'a> Baz<Quux<'a>>) {}

--- expect:symbols ---
u0:1  | Type      | i32         | i32                              | [global]
u0:2  | Type      | i64         | i64                              | [global]
u0:3  | Type      | i16         | i16                              | [global]
u0:4  | Type      | i8          | i8                               | [global]
u0:5  | Type      | i128        | i128                             | [global]
u0:6  | Type      | isize       | isize                            | [global]
u0:7  | Type      | u32         | u32                              | [global]
u0:8  | Type      | u64         | u64                              | [global]
u0:9  | Type      | u16         | u16                              | [global]
u0:10 | Type      | u8          | u8                               | [global]
u0:11 | Type      | u128        | u128                             | [global]
u0:12 | Type      | usize       | usize                            | [global]
u0:13 | Type      | f32         | f32                              | [global]
u0:14 | Type      | f64         | f64                              | [global]
u0:15 | Type      | bool        | bool                             | [global]
u0:16 | Type      | char        | char                             | [global]
u0:17 | Type      | str         | str                              | [global]
u0:18 | Module    | main        | main                             | [global]
u0:19 | File      | main        | main::main                       |         
u0:20 | Function  | main        | main::main::main                 |         
u0:21 | Namespace | block_0     | main::main::main::block_0        |         
u0:22 | Function  | add         | main::main::add                  |         
u0:23 | Variable  | x           | main::main::add::x               |         
u0:24 | Variable  | y           | main::main::add::y               |         
u0:25 | Namespace | block_1     | main::main::add::block_1         |         
u0:26 | Function  | takes_slice | main::main::takes_slice          |         
u0:27 | Variable  | slice       | main::main::takes_slice::slice   |         
u0:28 | Namespace | block_2     | main::main::takes_slice::block_2 |         
u0:29 | Function  | foo         | main::main::foo                  |         
u0:30 | Namespace | block_3     | main::main::foo::block_3         |         
u0:31 | Namespace | block_4     | main::main::foo::block_4         |         
u0:32 | Namespace | block_5     | main::main::foo::block_5         |         
u0:33 | Variable  | x           | main::main::foo::x               |         
u0:34 | Namespace | block_6     | main::main::foo::block_6         |         
u0:35 | Variable  | x           | main::main::foo::x               |         
u0:36 | Namespace | block_7     | main::main::foo::block_7         |         
u0:37 | Function  | accumulate  | main::main::accumulate           |         
u0:38 | Namespace | block_8     | main::main::accumulate::block_8  |         
u0:39 | Namespace | block_9     | main::main::accumulate::block_9  |         
u0:40 | Variable  | bar         | main::main::foo::bar             |         
u0:41 | Namespace | block_10    | main::main::foo::block_10        |         

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23, u0:24, u0:29, u0:35]
u0:17 <- [u0:26, u0:27]
u0:2 <- [u0:29, u0:35]
u0:22 -> [u0:1]
u0:23 -> [u0:1]
u0:24 -> [u0:1]
u0:26 -> [u0:17]
u0:27 -> [u0:17]
u0:29 -> [u0:1, u0:2, u0:7, u0:9]
u0:35 -> [u0:1, u0:2]
u0:7 <- [u0:29]
u0:9 <- [u0:29]


===============================================================================
const-function-declarations
===============================================================================


--- file: src/main.rs ---
const fn main() {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                       | [global]
u0:2  | Type      | i64     | i64                       | [global]
u0:3  | Type      | i16     | i16                       | [global]
u0:4  | Type      | i8      | i8                        | [global]
u0:5  | Type      | i128    | i128                      | [global]
u0:6  | Type      | isize   | isize                     | [global]
u0:7  | Type      | u32     | u32                       | [global]
u0:8  | Type      | u64     | u64                       | [global]
u0:9  | Type      | u16     | u16                       | [global]
u0:10 | Type      | u8      | u8                        | [global]
u0:11 | Type      | u128    | u128                      | [global]
u0:12 | Type      | usize   | usize                     | [global]
u0:13 | Type      | f32     | f32                       | [global]
u0:14 | Type      | f64     | f64                       | [global]
u0:15 | Type      | bool    | bool                      | [global]
u0:16 | Type      | char    | char                      | [global]
u0:17 | Type      | str     | str                       | [global]
u0:18 | Module    | main    | main                      | [global]
u0:19 | File      | main    | main::main                |         
u0:20 | Function  | main    | main::main::main          |         
u0:21 | Namespace | block_0 | main::main::main::block_0 |         

--- expect:symbol-deps ---


===============================================================================
functions-with-abstract-return-types
===============================================================================


--- file: src/main.rs ---
trait B {}

struct Foo;

fn triples(a: impl B) -> impl Iterator<Item=(Foo)> {
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                          | [global]
u0:2  | Type      | i64     | i64                          | [global]
u0:3  | Type      | i16     | i16                          | [global]
u0:4  | Type      | i8      | i8                           | [global]
u0:5  | Type      | i128    | i128                         | [global]
u0:6  | Type      | isize   | isize                        | [global]
u0:7  | Type      | u32     | u32                          | [global]
u0:8  | Type      | u64     | u64                          | [global]
u0:9  | Type      | u16     | u16                          | [global]
u0:10 | Type      | u8      | u8                           | [global]
u0:11 | Type      | u128    | u128                         | [global]
u0:12 | Type      | usize   | usize                        | [global]
u0:13 | Type      | f32     | f32                          | [global]
u0:14 | Type      | f64     | f64                          | [global]
u0:15 | Type      | bool    | bool                         | [global]
u0:16 | Type      | char    | char                         | [global]
u0:17 | Type      | str     | str                          | [global]
u0:18 | Module    | main    | main                         | [global]
u0:19 | File      | main    | main::main                   |         
u0:20 | Trait     | B       | main::main::B                |         
u0:21 | Struct    | Foo     | main::main::Foo              |         
u0:22 | Function  | triples | main::main::triples          |         
u0:23 | Variable  | a       | main::main::triples::a       |         
u0:24 | Namespace | block_0 | main::main::triples::block_0 |         

--- expect:symbol-deps ---
u0:20 <- [u0:22, u0:23]
u0:21 <- [u0:22]
u0:22 -> [u0:20, u0:21]
u0:23 -> [u0:20]


===============================================================================
impl-with-different-names
===============================================================================

--- file: src/main.rs ---
impl foo::Bar {  }
impl ::std::fmt::Display for Foo {  }
impl Self::Nested {  }

--- expect:symbols ---


===============================================================================
impl-with-lifetimes-first
===============================================================================


--- file: src/main.rs ---
fn foo<'a>(x: impl 'a + Clone) {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Function  | foo     | main::main::foo          |         
u0:21 | Variable  | x       | main::main::foo::x       |         
u0:22 | Namespace | block_0 | main::main::foo::block_0 |         

--- expect:symbol-deps ---


===============================================================================
functions-with-precise-capture-syntax
===============================================================================


--- file: src/main.rs ---
fn capture<T>(&self) -> impl Iterator<Item = usize> + use<'_, T> {
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                          | [global]
u0:2  | Type      | i64     | i64                          | [global]
u0:3  | Type      | i16     | i16                          | [global]
u0:4  | Type      | i8      | i8                           | [global]
u0:5  | Type      | i128    | i128                         | [global]
u0:6  | Type      | isize   | isize                        | [global]
u0:7  | Type      | u32     | u32                          | [global]
u0:8  | Type      | u64     | u64                          | [global]
u0:9  | Type      | u16     | u16                          | [global]
u0:10 | Type      | u8      | u8                           | [global]
u0:11 | Type      | u128    | u128                         | [global]
u0:12 | Type      | usize   | usize                        | [global]
u0:13 | Type      | f32     | f32                          | [global]
u0:14 | Type      | f64     | f64                          | [global]
u0:15 | Type      | bool    | bool                         | [global]
u0:16 | Type      | char    | char                         | [global]
u0:17 | Type      | str     | str                          | [global]
u0:18 | Module    | main    | main                         | [global]
u0:19 | File      | main    | main::main                   |         
u0:20 | Function  | capture | main::main::capture          |         
u0:21 | Type      | T       | main::main::capture::T       |         
u0:22 | Namespace | block_0 | main::main::capture::block_0 |         

--- expect:symbol-deps ---
u0:12 <- [u0:20]
u0:20 -> [u0:12]


===============================================================================
functions-with-empty-precise-capture-syntax
===============================================================================


--- file: src/main.rs ---
fn capture(&self) -> impl Iterator<Item = usize> + use<> {
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                          | [global]
u0:2  | Type      | i64     | i64                          | [global]
u0:3  | Type      | i16     | i16                          | [global]
u0:4  | Type      | i8      | i8                           | [global]
u0:5  | Type      | i128    | i128                         | [global]
u0:6  | Type      | isize   | isize                        | [global]
u0:7  | Type      | u32     | u32                          | [global]
u0:8  | Type      | u64     | u64                          | [global]
u0:9  | Type      | u16     | u16                          | [global]
u0:10 | Type      | u8      | u8                           | [global]
u0:11 | Type      | u128    | u128                         | [global]
u0:12 | Type      | usize   | usize                        | [global]
u0:13 | Type      | f32     | f32                          | [global]
u0:14 | Type      | f64     | f64                          | [global]
u0:15 | Type      | bool    | bool                         | [global]
u0:16 | Type      | char    | char                         | [global]
u0:17 | Type      | str     | str                          | [global]
u0:18 | Module    | main    | main                         | [global]
u0:19 | File      | main    | main::main                   |         
u0:20 | Function  | capture | main::main::capture          |         
u0:21 | Namespace | block_0 | main::main::capture::block_0 |         

--- expect:symbol-deps ---
u0:12 <- [u0:20]
u0:20 -> [u0:12]


===============================================================================
diverging-functions
===============================================================================


--- file: src/main.rs ---
fn aborts() -> ! {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                         | [global]
u0:2  | Type      | i64     | i64                         | [global]
u0:3  | Type      | i16     | i16                         | [global]
u0:4  | Type      | i8      | i8                          | [global]
u0:5  | Type      | i128    | i128                        | [global]
u0:6  | Type      | isize   | isize                       | [global]
u0:7  | Type      | u32     | u32                         | [global]
u0:8  | Type      | u64     | u64                         | [global]
u0:9  | Type      | u16     | u16                         | [global]
u0:10 | Type      | u8      | u8                          | [global]
u0:11 | Type      | u128    | u128                        | [global]
u0:12 | Type      | usize   | usize                       | [global]
u0:13 | Type      | f32     | f32                         | [global]
u0:14 | Type      | f64     | f64                         | [global]
u0:15 | Type      | bool    | bool                        | [global]
u0:16 | Type      | char    | char                        | [global]
u0:17 | Type      | str     | str                         | [global]
u0:18 | Module    | main    | main                        | [global]
u0:19 | File      | main    | main::main                  |         
u0:20 | Function  | aborts  | main::main::aborts          |         
u0:21 | Namespace | block_0 | main::main::aborts::block_0 |         

--- expect:symbol-deps ---


===============================================================================
extern-function-declarations
===============================================================================


--- file: src/main.rs ---
extern "C" fn foo() {}
extern "C" fn printf(*const c_char, ...,) {}

pub unsafe extern "C" fn c_variadic_no_use(fmt: *const i8, mut ap: ...) -> i32 {
    // CHECK: call void @llvm.va_start
    vprintf(fmt, ap.as_va_list())
    // CHECK: call void @llvm.va_end
}

--- expect:symbols ---
u0:1  | Type      | i32               | i32                                    | [global]
u0:2  | Type      | i64               | i64                                    | [global]
u0:3  | Type      | i16               | i16                                    | [global]
u0:4  | Type      | i8                | i8                                     | [global]
u0:5  | Type      | i128              | i128                                   | [global]
u0:6  | Type      | isize             | isize                                  | [global]
u0:7  | Type      | u32               | u32                                    | [global]
u0:8  | Type      | u64               | u64                                    | [global]
u0:9  | Type      | u16               | u16                                    | [global]
u0:10 | Type      | u8                | u8                                     | [global]
u0:11 | Type      | u128              | u128                                   | [global]
u0:12 | Type      | usize             | usize                                  | [global]
u0:13 | Type      | f32               | f32                                    | [global]
u0:14 | Type      | f64               | f64                                    | [global]
u0:15 | Type      | bool              | bool                                   | [global]
u0:16 | Type      | char              | char                                   | [global]
u0:17 | Type      | str               | str                                    | [global]
u0:18 | Module    | main              | main                                   | [global]
u0:19 | File      | main              | main::main                             |         
u0:20 | Function  | foo               | main::main::foo                        |         
u0:21 | Namespace | block_0           | main::main::foo::block_0               |         
u0:22 | Function  | printf            | main::main::printf                     |         
u0:23 | Namespace | block_1           | main::main::printf::block_1            |         
u0:24 | Function  | c_variadic_no_use | main::main::c_variadic_no_use          |         
u0:25 | Variable  | fmt               | main::main::c_variadic_no_use::fmt     |         
u0:26 | Namespace | block_2           | main::main::c_variadic_no_use::block_2 |         

--- expect:symbol-deps ---
u0:1 <- [u0:24]
u0:24 -> [u0:1, u0:4]
u0:25 -> [u0:4]
u0:4 <- [u0:24, u0:25]


===============================================================================
use-declarations
===============================================================================


--- file: src/main.rs ---
use abc;
use phrases::japanese;
use sayings::english::greetings;
use sayings::english::greetings as en_greetings ;
use phrases::english::{greetings,farewells};
use sayings::japanese::farewells::*;
pub use self::greetings::hello;
use sayings::english::{self, greetings as en_greetings, farewells as en_farewells};
use three::{ dot::{one, four} };
use my::{ some::* };
use my::{*};
use ::*;

--- expect:symbols ---
u0:1  | Type   | i32   | i32        | [global]
u0:2  | Type   | i64   | i64        | [global]
u0:3  | Type   | i16   | i16        | [global]
u0:4  | Type   | i8    | i8         | [global]
u0:5  | Type   | i128  | i128       | [global]
u0:6  | Type   | isize | isize      | [global]
u0:7  | Type   | u32   | u32        | [global]
u0:8  | Type   | u64   | u64        | [global]
u0:9  | Type   | u16   | u16        | [global]
u0:10 | Type   | u8    | u8         | [global]
u0:11 | Type   | u128  | u128       | [global]
u0:12 | Type   | usize | usize      | [global]
u0:13 | Type   | f32   | f32        | [global]
u0:14 | Type   | f64   | f64        | [global]
u0:15 | Type   | bool  | bool       | [global]
u0:16 | Type   | char  | char       | [global]
u0:17 | Type   | str   | str        | [global]
u0:18 | Module | main  | main       | [global]
u0:19 | File   | main  | main::main |         

--- expect:symbol-deps ---


===============================================================================
variable-bindings
===============================================================================


--- file: src/main.rs ---
let x;
let x = 42;
let x: i32;
let x: i8 = 42;
let mut x = 5;
let y: bool = false;
let bool: bool = false;
let u32: str = "";

--- expect:symbols ---
u0:1  | Type     | i32   | i32              | [global]
u0:2  | Type     | i64   | i64              | [global]
u0:3  | Type     | i16   | i16              | [global]
u0:4  | Type     | i8    | i8               | [global]
u0:5  | Type     | i128  | i128             | [global]
u0:6  | Type     | isize | isize            | [global]
u0:7  | Type     | u32   | u32              | [global]
u0:8  | Type     | u64   | u64              | [global]
u0:9  | Type     | u16   | u16              | [global]
u0:10 | Type     | u8    | u8               | [global]
u0:11 | Type     | u128  | u128             | [global]
u0:12 | Type     | usize | usize            | [global]
u0:13 | Type     | f32   | f32              | [global]
u0:14 | Type     | f64   | f64              | [global]
u0:15 | Type     | bool  | bool             | [global]
u0:16 | Type     | char  | char             | [global]
u0:17 | Type     | str   | str              | [global]
u0:18 | Module   | main  | main             | [global]
u0:19 | File     | main  | main::main       |         
u0:20 | Variable | x     | main::main::x    |         
u0:21 | Variable | x     | main::main::x    |         
u0:22 | Variable | x     | main::main::x    |         
u0:23 | Variable | x     | main::main::x    |         
u0:24 | Variable | x     | main::main::x    |         
u0:25 | Variable | y     | main::main::y    |         
u0:26 | Variable | bool  | main::main::bool |         
u0:27 | Variable | u32   | main::main::u32  |         

--- expect:symbol-deps ---
u0:1 <- [u0:21, u0:22, u0:24]
u0:17 <- [u0:27]
u0:21 -> [u0:1]
u0:22 -> [u0:1]
u0:23 -> [u0:4]
u0:24 -> [u0:1]
u0:25 -> [u0:26]
u0:26 <- [u0:25]
u0:27 -> [u0:17]
u0:4 <- [u0:23]


===============================================================================
function-variable-bindings
===============================================================================


--- file: src/main.rs ---
struct Baz;
struct Foo;

fn func() {
    let x: Foo = Foo::new();
    let mut y = Baz::new();
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                          | [global]
u0:2  | Type      | i64     | i64                          | [global]
u0:3  | Type      | i16     | i16                          | [global]
u0:4  | Type      | i8      | i8                           | [global]
u0:5  | Type      | i128    | i128                         | [global]
u0:6  | Type      | isize   | isize                        | [global]
u0:7  | Type      | u32     | u32                          | [global]
u0:8  | Type      | u64     | u64                          | [global]
u0:9  | Type      | u16     | u16                          | [global]
u0:10 | Type      | u8      | u8                           | [global]
u0:11 | Type      | u128    | u128                         | [global]
u0:12 | Type      | usize   | usize                        | [global]
u0:13 | Type      | f32     | f32                          | [global]
u0:14 | Type      | f64     | f64                          | [global]
u0:15 | Type      | bool    | bool                         | [global]
u0:16 | Type      | char    | char                         | [global]
u0:17 | Type      | str     | str                          | [global]
u0:18 | Module    | main    | main                         | [global]
u0:19 | File      | main    | main::main                   |         
u0:20 | Struct    | Baz     | main::main::Baz              |         
u0:21 | Struct    | Foo     | main::main::Foo              |         
u0:22 | Function  | func    | main::main::func             |         
u0:23 | Namespace | block_0 | main::main::func::block_0    |         
u0:24 | Variable  | x       | main::main::func::block_0::x |         
u0:25 | Variable  | y       | main::main::func::block_0::y |         

--- expect:symbol-deps ---
u0:21 <- [u0:22, u0:24]
u0:22 -> [u0:21]
u0:24 -> [u0:21]


===============================================================================
let-else-statements
===============================================================================


--- file: src/main.rs ---
mod Foo {
    struct Bar;
}
struct Baz;

fn func() {
    let y = Baz::new();
    let Foo::Bar {
        texts,
        values,
    } = foo().bar().await? else {
        return Err(index)
    };

    let Some(x) = y else {
        let None = z else {
            foo();
            break;
        };
        continue;
    };
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                                         | [global]
u0:2  | Type      | i64     | i64                                         | [global]
u0:3  | Type      | i16     | i16                                         | [global]
u0:4  | Type      | i8      | i8                                          | [global]
u0:5  | Type      | i128    | i128                                        | [global]
u0:6  | Type      | isize   | isize                                       | [global]
u0:7  | Type      | u32     | u32                                         | [global]
u0:8  | Type      | u64     | u64                                         | [global]
u0:9  | Type      | u16     | u16                                         | [global]
u0:10 | Type      | u8      | u8                                          | [global]
u0:11 | Type      | u128    | u128                                        | [global]
u0:12 | Type      | usize   | usize                                       | [global]
u0:13 | Type      | f32     | f32                                         | [global]
u0:14 | Type      | f64     | f64                                         | [global]
u0:15 | Type      | bool    | bool                                        | [global]
u0:16 | Type      | char    | char                                        | [global]
u0:17 | Type      | str     | str                                         | [global]
u0:18 | Module    | main    | main                                        | [global]
u0:19 | File      | main    | main::main                                  |         
u0:20 | Namespace | Foo     | main::main::Foo                             |         
u0:21 | Struct    | Bar     | main::main::Foo::Bar                        |         
u0:22 | Struct    | Baz     | main::main::Baz                             |         
u0:23 | Function  | func    | main::main::func                            |         
u0:24 | Namespace | block_0 | main::main::func::block_0                   |         
u0:25 | Variable  | y       | main::main::func::block_0::y                |         
u0:26 | Variable  | Foo     | main::main::func::block_0::Foo              |         
u0:27 | Variable  | texts   | main::main::func::block_0::texts            |         
u0:28 | Variable  | values  | main::main::func::block_0::values           |         
u0:29 | Namespace | block_1 | main::main::func::block_0::block_1          |         
u0:30 | Variable  | Some    | main::main::func::block_0::Some             |         
u0:31 | Variable  | x       | main::main::func::block_0::x                |         
u0:32 | Namespace | block_2 | main::main::func::block_0::block_2          |         
u0:33 | Variable  | None    | main::main::func::block_0::block_2::None    |         
u0:34 | Namespace | block_3 | main::main::func::block_0::block_2::block_3 |         

--- expect:symbol-deps ---
u0:23 -> [u0:25]
u0:25 <- [u0:23, u0:30, u0:31]
u0:30 -> [u0:25]
u0:31 -> [u0:25]


===============================================================================
let-declarations-with-if-expressions-as-the-value
===============================================================================


--- file: src/main.rs ---
let a = if b {
    c
} else {
    d
};

--- expect:symbols ---
u0:1  | Type      | i32     | i32                 | [global]
u0:2  | Type      | i64     | i64                 | [global]
u0:3  | Type      | i16     | i16                 | [global]
u0:4  | Type      | i8      | i8                  | [global]
u0:5  | Type      | i128    | i128                | [global]
u0:6  | Type      | isize   | isize               | [global]
u0:7  | Type      | u32     | u32                 | [global]
u0:8  | Type      | u64     | u64                 | [global]
u0:9  | Type      | u16     | u16                 | [global]
u0:10 | Type      | u8      | u8                  | [global]
u0:11 | Type      | u128    | u128                | [global]
u0:12 | Type      | usize   | usize               | [global]
u0:13 | Type      | f32     | f32                 | [global]
u0:14 | Type      | f64     | f64                 | [global]
u0:15 | Type      | bool    | bool                | [global]
u0:16 | Type      | char    | char                | [global]
u0:17 | Type      | str     | str                 | [global]
u0:18 | Module    | main    | main                | [global]
u0:19 | File      | main    | main::main          |         
u0:20 | Variable  | a       | main::main::a       |         
u0:21 | Namespace | block_0 | main::main::block_0 |         
u0:22 | Namespace | block_1 | main::main::block_1 |         

--- expect:symbol-deps ---


===============================================================================
let-declarations-with-contextual-keywords-as-names
===============================================================================


--- file: src/main.rs ---
let default = 1;
let union = 2;

--- expect:symbols ---
u0:1  | Type     | i32     | i32                 | [global]
u0:2  | Type     | i64     | i64                 | [global]
u0:3  | Type     | i16     | i16                 | [global]
u0:4  | Type     | i8      | i8                  | [global]
u0:5  | Type     | i128    | i128                | [global]
u0:6  | Type     | isize   | isize               | [global]
u0:7  | Type     | u32     | u32                 | [global]
u0:8  | Type     | u64     | u64                 | [global]
u0:9  | Type     | u16     | u16                 | [global]
u0:10 | Type     | u8      | u8                  | [global]
u0:11 | Type     | u128    | u128                | [global]
u0:12 | Type     | usize   | usize               | [global]
u0:13 | Type     | f32     | f32                 | [global]
u0:14 | Type     | f64     | f64                 | [global]
u0:15 | Type     | bool    | bool                | [global]
u0:16 | Type     | char    | char                | [global]
u0:17 | Type     | str     | str                 | [global]
u0:18 | Module   | main    | main                | [global]
u0:19 | File     | main    | main::main          |         
u0:20 | Variable | default | main::main::default |         
u0:21 | Variable | union   | main::main::union   |         

--- expect:symbol-deps ---
u0:1 <- [u0:20, u0:21]
u0:20 -> [u0:1]
u0:21 -> [u0:1]


===============================================================================
structs
===============================================================================


--- file: src/main.rs ---
struct Proton;
struct Electron {}
struct Person {pub name: String, pub age: u32}
struct Point {
  x: i32,

  #[attribute1]
  y: i32,
}
struct Color(pub i32, i32, i32);
struct Inches(i32);
struct Empty(pub ());

--- expect:symbols ---
u0:1  | Type   | i32      | i32                      | [global]
u0:2  | Type   | i64      | i64                      | [global]
u0:3  | Type   | i16      | i16                      | [global]
u0:4  | Type   | i8       | i8                       | [global]
u0:5  | Type   | i128     | i128                     | [global]
u0:6  | Type   | isize    | isize                    | [global]
u0:7  | Type   | u32      | u32                      | [global]
u0:8  | Type   | u64      | u64                      | [global]
u0:9  | Type   | u16      | u16                      | [global]
u0:10 | Type   | u8       | u8                       | [global]
u0:11 | Type   | u128     | u128                     | [global]
u0:12 | Type   | usize    | usize                    | [global]
u0:13 | Type   | f32      | f32                      | [global]
u0:14 | Type   | f64      | f64                      | [global]
u0:15 | Type   | bool     | bool                     | [global]
u0:16 | Type   | char     | char                     | [global]
u0:17 | Type   | str      | str                      | [global]
u0:18 | Module | main     | main                     | [global]
u0:19 | File   | main     | main::main               |         
u0:20 | Struct | Proton   | main::main::Proton       |         
u0:21 | Struct | Electron | main::main::Electron     |         
u0:22 | Struct | Person   | main::main::Person       |         
u0:23 | Field  | name     | main::main::Person::name |         
u0:24 | Field  | age      | main::main::Person::age  |         
u0:25 | Struct | Point    | main::main::Point        |         
u0:26 | Field  | x        | main::main::Point::x     |         
u0:27 | Field  | y        | main::main::Point::y     |         
u0:28 | Struct | Color    | main::main::Color        |         
u0:29 | Struct | Inches   | main::main::Inches       |         
u0:30 | Struct | Empty    | main::main::Empty        |         

--- expect:symbol-deps ---
u0:1 <- [u0:25, u0:26, u0:27]
u0:22 -> [u0:7]
u0:24 -> [u0:7]
u0:25 -> [u0:1]
u0:26 -> [u0:1]
u0:27 -> [u0:1]
u0:7 <- [u0:22, u0:24]


===============================================================================
unions
===============================================================================


--- file: src/main.rs ---
pub union in6_addr__bindgen_ty_1 {
    pub __u6_addr8: [__uint8_t; 16usize],
    pub __u6_addr16: [__uint16_t; 8usize],
    pub __u6_addr32: [__uint32_t; 4usize],
    _bindgen_union_align: [u32; 4usize],
}

--- expect:symbols ---
u0:1  | Type   | i32                  | i32                              | [global]
u0:2  | Type   | i64                  | i64                              | [global]
u0:3  | Type   | i16                  | i16                              | [global]
u0:4  | Type   | i8                   | i8                               | [global]
u0:5  | Type   | i128                 | i128                             | [global]
u0:6  | Type   | isize                | isize                            | [global]
u0:7  | Type   | u32                  | u32                              | [global]
u0:8  | Type   | u64                  | u64                              | [global]
u0:9  | Type   | u16                  | u16                              | [global]
u0:10 | Type   | u8                   | u8                               | [global]
u0:11 | Type   | u128                 | u128                             | [global]
u0:12 | Type   | usize                | usize                            | [global]
u0:13 | Type   | f32                  | f32                              | [global]
u0:14 | Type   | f64                  | f64                              | [global]
u0:15 | Type   | bool                 | bool                             | [global]
u0:16 | Type   | char                 | char                             | [global]
u0:17 | Type   | str                  | str                              | [global]
u0:18 | Module | main                 | main                             | [global]
u0:19 | File   | main                 | main::main                       |         
u0:20 | Field  | __u6_addr8           | main::main::__u6_addr8           |         
u0:21 | Field  | __u6_addr16          | main::main::__u6_addr16          |         
u0:22 | Field  | __u6_addr32          | main::main::__u6_addr32          |         
u0:23 | Field  | _bindgen_union_align | main::main::_bindgen_union_align |         

--- expect:symbol-deps ---
u0:23 -> [u0:7]
u0:7 <- [u0:23]


===============================================================================
generic-structs
===============================================================================


--- file: src/main.rs ---
struct A<B> {}
struct C<'a, 'b> {}
struct C<'a,> {}
struct D<const SIZE: usize> {}
struct E<#[attr] T> {}

--- expect:symbols ---
u0:1  | Type   | i32   | i32              | [global]
u0:2  | Type   | i64   | i64              | [global]
u0:3  | Type   | i16   | i16              | [global]
u0:4  | Type   | i8    | i8               | [global]
u0:5  | Type   | i128  | i128             | [global]
u0:6  | Type   | isize | isize            | [global]
u0:7  | Type   | u32   | u32              | [global]
u0:8  | Type   | u64   | u64              | [global]
u0:9  | Type   | u16   | u16              | [global]
u0:10 | Type   | u8    | u8               | [global]
u0:11 | Type   | u128  | u128             | [global]
u0:12 | Type   | usize | usize            | [global]
u0:13 | Type   | f32   | f32              | [global]
u0:14 | Type   | f64   | f64              | [global]
u0:15 | Type   | bool  | bool             | [global]
u0:16 | Type   | char  | char             | [global]
u0:17 | Type   | str   | str              | [global]
u0:18 | Module | main  | main             | [global]
u0:19 | File   | main  | main::main       |         
u0:20 | Struct | A     | main::main::A    |         
u0:21 | Type   | B     | main::main::A::B |         
u0:22 | Struct | C     | main::main::C    |         
u0:23 | Struct | D     | main::main::D    |         
u0:24 | Struct | E     | main::main::E    |         
u0:25 | Type   | T     | main::main::E::T |         

--- expect:symbol-deps ---


===============================================================================
enums-basic
===============================================================================


--- file: src/main.rs ---
struct Tree;

pub enum Option<T> {
    None,
    Some(T),
}

pub enum Node<T: Item> {
    Internal {
        children: Vec<Tree<T>>,
        height: u16
    },
    #[attribute1]
    #[attribute2]
    Leaf {
        value: T
    }
}

--- expect:symbols ---
u0:1  | Type        | i32                                                                  | i32                                                                                    | [global]
u0:2  | Type        | i64                                                                  | i64                                                                                    | [global]
u0:3  | Type        | i16                                                                  | i16                                                                                    | [global]
u0:4  | Type        | i8                                                                   | i8                                                                                     | [global]
u0:5  | Type        | i128                                                                 | i128                                                                                   | [global]
u0:6  | Type        | isize                                                                | isize                                                                                  | [global]
u0:7  | Type        | u32                                                                  | u32                                                                                    | [global]
u0:8  | Type        | u64                                                                  | u64                                                                                    | [global]
u0:9  | Type        | u16                                                                  | u16                                                                                    | [global]
u0:10 | Type        | u8                                                                   | u8                                                                                     | [global]
u0:11 | Type        | u128                                                                 | u128                                                                                   | [global]
u0:12 | Type        | usize                                                                | usize                                                                                  | [global]
u0:13 | Type        | f32                                                                  | f32                                                                                    | [global]
u0:14 | Type        | f64                                                                  | f64                                                                                    | [global]
u0:15 | Type        | bool                                                                 | bool                                                                                   | [global]
u0:16 | Type        | char                                                                 | char                                                                                   | [global]
u0:17 | Type        | str                                                                  | str                                                                                    | [global]
u0:18 | Module      | main                                                                 | main                                                                                   | [global]
u0:19 | File        | main                                                                 | main::main                                                                             |         
u0:20 | Struct      | Tree                                                                 | main::main::Tree                                                                       |         
u0:21 | Enum        | Option                                                               | main::main::Option                                                                     |         
u0:22 | Type        | T                                                                    | main::main::Option::T                                                                  |         
u0:23 | EnumVariant | None                                                                 | main::main::Option::None                                                               |         
u0:24 | EnumVariant | Some(T)                                                              | main::main::Option::Some(T)                                                            |         
u0:25 | Enum        | Node                                                                 | main::main::Node                                                                       |         
u0:26 | Type        | T                                                                    | main::main::Node::T                                                                    |         
u0:27 | EnumVariant | Internal {
        children: Vec<Tree<T>>,
        height: u16
    } | main::main::Node::Internal {
        children: Vec<Tree<T>>,
        height: u16
    } |         
u0:28 | Field       | children                                                             | main::main::Node::children                                                             |         
u0:29 | Field       | height                                                               | main::main::Node::height                                                               |         
u0:30 | EnumVariant | Leaf {
        value: T
    }                                        | main::main::Node::Leaf {
        value: T
    }                                        |         
u0:31 | Field       | value                                                                | main::main::Node::value                                                                |         

--- expect:symbol-deps ---
u0:20 <- [u0:25, u0:27, u0:28]
u0:21 -> [u0:22]
u0:22 <- [u0:21, u0:24]
u0:24 -> [u0:22]
u0:25 -> [u0:20, u0:26, u0:28, u0:29, u0:31, u0:9]
u0:26 <- [u0:25, u0:27, u0:28, u0:30, u0:31]
u0:27 -> [u0:20, u0:26, u0:28, u0:29, u0:9]
u0:28 -> [u0:20, u0:26]
u0:28 <- [u0:25, u0:27]
u0:29 -> [u0:9]
u0:29 <- [u0:25, u0:27]
u0:30 -> [u0:26, u0:31]
u0:31 -> [u0:26]
u0:31 <- [u0:25, u0:30]
u0:9 <- [u0:25, u0:27, u0:29]

--- expect:blocks ---
u0:1 | root  | main   
u0:2 | class | Tree   
u0:3 | enum  | Option 
u0:4 | enum  | Node   
u0:5 | field | block#5
u0:6 | field | block#6
u0:7 | field | block#7

--- expect:block-deps ---
u0:2 <- [u0:4]
u0:4 -> [u0:2]


===============================================================================
enums-with-values-specified
===============================================================================


--- file: src/main.rs ---
pub enum c_style_enum {
    val1 = 1,
    val2 = 2
}

--- expect:symbols ---
u0:1  | Type        | i32          | i32                                | [global]
u0:2  | Type        | i64          | i64                                | [global]
u0:3  | Type        | i16          | i16                                | [global]
u0:4  | Type        | i8           | i8                                 | [global]
u0:5  | Type        | i128         | i128                               | [global]
u0:6  | Type        | isize        | isize                              | [global]
u0:7  | Type        | u32          | u32                                | [global]
u0:8  | Type        | u64          | u64                                | [global]
u0:9  | Type        | u16          | u16                                | [global]
u0:10 | Type        | u8           | u8                                 | [global]
u0:11 | Type        | u128         | u128                               | [global]
u0:12 | Type        | usize        | usize                              | [global]
u0:13 | Type        | f32          | f32                                | [global]
u0:14 | Type        | f64          | f64                                | [global]
u0:15 | Type        | bool         | bool                               | [global]
u0:16 | Type        | char         | char                               | [global]
u0:17 | Type        | str          | str                                | [global]
u0:18 | Module      | main         | main                               | [global]
u0:19 | File        | main         | main::main                         |         
u0:20 | Enum        | c_style_enum | main::main::c_style_enum           |         
u0:21 | EnumVariant | val1 = 1     | main::main::c_style_enum::val1 = 1 |         
u0:22 | EnumVariant | val2 = 2     | main::main::c_style_enum::val2 = 2 |         

--- expect:symbol-deps ---


===============================================================================
generic-functions-one
===============================================================================


--- file: src/main.rs ---
struct Text;

pub fn splice<T: Into<Text>>(&mut self, old_range: Range<usize>, new_text: T) {
}
pub fn uninit_array<const LEN: usize>() -> [Self; LEN] {}

--- expect:symbols ---
u0:1  | Type      | i32          | i32                               | [global]
u0:2  | Type      | i64          | i64                               | [global]
u0:3  | Type      | i16          | i16                               | [global]
u0:4  | Type      | i8           | i8                                | [global]
u0:5  | Type      | i128         | i128                              | [global]
u0:6  | Type      | isize        | isize                             | [global]
u0:7  | Type      | u32          | u32                               | [global]
u0:8  | Type      | u64          | u64                               | [global]
u0:9  | Type      | u16          | u16                               | [global]
u0:10 | Type      | u8           | u8                                | [global]
u0:11 | Type      | u128         | u128                              | [global]
u0:12 | Type      | usize        | usize                             | [global]
u0:13 | Type      | f32          | f32                               | [global]
u0:14 | Type      | f64          | f64                               | [global]
u0:15 | Type      | bool         | bool                              | [global]
u0:16 | Type      | char         | char                              | [global]
u0:17 | Type      | str          | str                               | [global]
u0:18 | Module    | main         | main                              | [global]
u0:19 | File      | main         | main::main                        |         
u0:20 | Struct    | Text         | main::main::Text                  |         
u0:21 | Function  | splice       | main::main::splice                |         
u0:22 | Type      | T            | main::main::splice::T             |         
u0:23 | Variable  | old_range    | main::main::splice::old_range     |         
u0:24 | Variable  | new_text     | main::main::splice::new_text      |         
u0:25 | Namespace | block_0      | main::main::splice::block_0       |         
u0:26 | Function  | uninit_array | main::main::uninit_array          |         
u0:27 | Namespace | block_1      | main::main::uninit_array::block_1 |         

--- expect:symbol-deps ---
u0:12 <- [u0:21, u0:23]
u0:21 -> [u0:12, u0:22]
u0:22 <- [u0:21, u0:24]
u0:23 -> [u0:12]
u0:24 -> [u0:22]

--- expect:blocks ---
u0:1 | root  | main        
u0:2 | class | Text        
u0:3 | func  | splice      
u0:4 | func  | uninit_array

--- expect:block-deps ---


===============================================================================
functions-with-mutable-parameters
===============================================================================


--- file: src/main.rs ---
fn foo(mut x : u32) {
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Function  | foo     | main::main::foo          |         
u0:21 | Variable  | x       | main::main::foo::x       |         
u0:22 | Namespace | block_0 | main::main::foo::block_0 |         

--- expect:symbol-deps ---
u0:20 -> [u0:7]
u0:21 -> [u0:7]
u0:7 <- [u0:20, u0:21]


===============================================================================
functions-with-destructured-parameters
===============================================================================


--- file: src/main.rs ---
struct Foo;
struct Y;
struct T;
struct U;

fn f1([x, y]: [Foo; 2]) {}

fn f2(&x: &Y) {}

fn f3((x, y): (T, U)) {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                     | [global]
u0:2  | Type      | i64     | i64                     | [global]
u0:3  | Type      | i16     | i16                     | [global]
u0:4  | Type      | i8      | i8                      | [global]
u0:5  | Type      | i128    | i128                    | [global]
u0:6  | Type      | isize   | isize                   | [global]
u0:7  | Type      | u32     | u32                     | [global]
u0:8  | Type      | u64     | u64                     | [global]
u0:9  | Type      | u16     | u16                     | [global]
u0:10 | Type      | u8      | u8                      | [global]
u0:11 | Type      | u128    | u128                    | [global]
u0:12 | Type      | usize   | usize                   | [global]
u0:13 | Type      | f32     | f32                     | [global]
u0:14 | Type      | f64     | f64                     | [global]
u0:15 | Type      | bool    | bool                    | [global]
u0:16 | Type      | char    | char                    | [global]
u0:17 | Type      | str     | str                     | [global]
u0:18 | Module    | main    | main                    | [global]
u0:19 | File      | main    | main::main              |         
u0:20 | Struct    | Foo     | main::main::Foo         |         
u0:21 | Struct    | Y       | main::main::Y           |         
u0:22 | Struct    | T       | main::main::T           |         
u0:23 | Struct    | U       | main::main::U           |         
u0:24 | Function  | f1      | main::main::f1          |         
u0:25 | Variable  | x       | main::main::f1::x       |         
u0:26 | Namespace | block_0 | main::main::f1::block_0 |         
u0:27 | Function  | f2      | main::main::f2          |         
u0:28 | Variable  | x       | main::main::f2::x       |         
u0:29 | Namespace | block_1 | main::main::f2::block_1 |         
u0:30 | Function  | f3      | main::main::f3          |         
u0:31 | Variable  | x       | main::main::f3::x       |         
u0:32 | Namespace | block_2 | main::main::f3::block_2 |         

--- expect:symbol-deps ---
u0:20 <- [u0:24, u0:25]
u0:21 <- [u0:27, u0:28]
u0:22 <- [u0:30, u0:31]
u0:23 <- [u0:30, u0:31]
u0:24 -> [u0:20]
u0:25 -> [u0:20]
u0:27 -> [u0:21]
u0:28 -> [u0:21]
u0:30 -> [u0:22, u0:23]
u0:31 -> [u0:22, u0:23]

--- expect:blocks ---
u0:1 | root  | main
u0:2 | class | Foo 
u0:3 | class | Y   
u0:4 | class | T   
u0:5 | class | U   
u0:6 | func  | f1  
u0:7 | func  | f2  
u0:8 | func  | f3  

--- expect:block-deps ---
u0:2 <- [u0:6]
u0:3 <- [u0:7]
u0:4 <- [u0:8]
u0:5 <- [u0:8]
u0:6 -> [u0:2]
u0:7 -> [u0:3]
u0:8 -> [u0:4, u0:5]


===============================================================================
functions-with-custom-types-for-self
===============================================================================


--- file: src/main.rs ---
trait Callback {
    fn call(self: Box<Self>);
}

--- expect:symbols ---
u0:1  | Type     | i32      | i32                        | [global]
u0:2  | Type     | i64      | i64                        | [global]
u0:3  | Type     | i16      | i16                        | [global]
u0:4  | Type     | i8       | i8                         | [global]
u0:5  | Type     | i128     | i128                       | [global]
u0:6  | Type     | isize    | isize                      | [global]
u0:7  | Type     | u32      | u32                        | [global]
u0:8  | Type     | u64      | u64                        | [global]
u0:9  | Type     | u16      | u16                        | [global]
u0:10 | Type     | u8       | u8                         | [global]
u0:11 | Type     | u128     | u128                       | [global]
u0:12 | Type     | usize    | usize                      | [global]
u0:13 | Type     | f32      | f32                        | [global]
u0:14 | Type     | f64      | f64                        | [global]
u0:15 | Type     | bool     | bool                       | [global]
u0:16 | Type     | char     | char                       | [global]
u0:17 | Type     | str      | str                        | [global]
u0:18 | Module   | main     | main                       | [global]
u0:19 | File     | main     | main::main                 |         
u0:20 | Trait    | Callback | main::main::Callback       |         
u0:21 | Function | call     | main::main::Callback::call |         

--- expect:symbol-deps ---


===============================================================================
constant-items
===============================================================================


--- file: src/main.rs ---
const N: i32 = 5;

trait Foo {
    const X: u8;
}

fn func() {
    println!("{}", N);
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                       | [global]
u0:2  | Type      | i64     | i64                       | [global]
u0:3  | Type      | i16     | i16                       | [global]
u0:4  | Type      | i8      | i8                        | [global]
u0:5  | Type      | i128    | i128                      | [global]
u0:6  | Type      | isize   | isize                     | [global]
u0:7  | Type      | u32     | u32                       | [global]
u0:8  | Type      | u64     | u64                       | [global]
u0:9  | Type      | u16     | u16                       | [global]
u0:10 | Type      | u8      | u8                        | [global]
u0:11 | Type      | u128    | u128                      | [global]
u0:12 | Type      | usize   | usize                     | [global]
u0:13 | Type      | f32     | f32                       | [global]
u0:14 | Type      | f64     | f64                       | [global]
u0:15 | Type      | bool    | bool                      | [global]
u0:16 | Type      | char    | char                      | [global]
u0:17 | Type      | str     | str                       | [global]
u0:18 | Module    | main    | main                      | [global]
u0:19 | File      | main    | main::main                |         
u0:20 | Const     | N       | main::main::N             |         
u0:21 | Trait     | Foo     | main::main::Foo           |         
u0:22 | Const     | X       | main::main::Foo::X        |         
u0:23 | Function  | func    | main::main::func          |         
u0:24 | Namespace | block_0 | main::main::func::block_0 |         

--- expect:symbol-deps ---
u0:1 <- [u0:20]
u0:10 <- [u0:21, u0:22]
u0:20 -> [u0:1]
u0:21 -> [u0:10]
u0:22 -> [u0:10]


===============================================================================
static-items
===============================================================================


--- file: src/main.rs ---
static N: i32 = 5;
static mut __progname: *mut ::c_char;

fn func() {
    println!("{}", N);
}

--- expect:symbols ---
u0:1  | Type      | i32        | i32                       | [global]
u0:2  | Type      | i64        | i64                       | [global]
u0:3  | Type      | i16        | i16                       | [global]
u0:4  | Type      | i8         | i8                        | [global]
u0:5  | Type      | i128       | i128                      | [global]
u0:6  | Type      | isize      | isize                     | [global]
u0:7  | Type      | u32        | u32                       | [global]
u0:8  | Type      | u64        | u64                       | [global]
u0:9  | Type      | u16        | u16                       | [global]
u0:10 | Type      | u8         | u8                        | [global]
u0:11 | Type      | u128       | u128                      | [global]
u0:12 | Type      | usize      | usize                     | [global]
u0:13 | Type      | f32        | f32                       | [global]
u0:14 | Type      | f64        | f64                       | [global]
u0:15 | Type      | bool       | bool                      | [global]
u0:16 | Type      | char       | char                      | [global]
u0:17 | Type      | str        | str                       | [global]
u0:18 | Module    | main       | main                      | [global]
u0:19 | File      | main       | main::main                |         
u0:20 | Static    | N          | main::main::N             |         
u0:21 | Static    | __progname | main::main::__progname    |         
u0:22 | Function  | func       | main::main::func          |         
u0:23 | Namespace | block_0    | main::main::func::block_0 |         

--- expect:symbol-deps ---
u0:1 <- [u0:20]
u0:20 -> [u0:1]


===============================================================================
static-ref-items-using-lazy-static
===============================================================================


--- file: src/main.rs ---
static ref ONE: usize = 0;

fn func() {
    println!("{}", ONE);
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                       | [global]
u0:2  | Type      | i64     | i64                       | [global]
u0:3  | Type      | i16     | i16                       | [global]
u0:4  | Type      | i8      | i8                        | [global]
u0:5  | Type      | i128    | i128                      | [global]
u0:6  | Type      | isize   | isize                     | [global]
u0:7  | Type      | u32     | u32                       | [global]
u0:8  | Type      | u64     | u64                       | [global]
u0:9  | Type      | u16     | u16                       | [global]
u0:10 | Type      | u8      | u8                        | [global]
u0:11 | Type      | u128    | u128                      | [global]
u0:12 | Type      | usize   | usize                     | [global]
u0:13 | Type      | f32     | f32                       | [global]
u0:14 | Type      | f64     | f64                       | [global]
u0:15 | Type      | bool    | bool                      | [global]
u0:16 | Type      | char    | char                      | [global]
u0:17 | Type      | str     | str                       | [global]
u0:18 | Module    | main    | main                      | [global]
u0:19 | File      | main    | main::main                |         
u0:20 | Static    | ONE     | main::main::ONE           |         
u0:21 | Function  | func    | main::main::func          |         
u0:22 | Namespace | block_0 | main::main::func::block_0 |         

--- expect:symbol-deps ---
u0:12 <- [u0:20]
u0:20 -> [u0:12]


===============================================================================
type-aliases
===============================================================================


--- file: src/main.rs ---
struct Tree<T>;

type Inch = u64;
type Name<T> = Tree<T>;
type LazyResolve = impl (FnOnce() -> Capture) + Send + Sync + UnwindSafe;

--- expect:symbols ---
u0:1  | Type   | i32         | i32                     | [global]
u0:2  | Type   | i64         | i64                     | [global]
u0:3  | Type   | i16         | i16                     | [global]
u0:4  | Type   | i8          | i8                      | [global]
u0:5  | Type   | i128        | i128                    | [global]
u0:6  | Type   | isize       | isize                   | [global]
u0:7  | Type   | u32         | u32                     | [global]
u0:8  | Type   | u64         | u64                     | [global]
u0:9  | Type   | u16         | u16                     | [global]
u0:10 | Type   | u8          | u8                      | [global]
u0:11 | Type   | u128        | u128                    | [global]
u0:12 | Type   | usize       | usize                   | [global]
u0:13 | Type   | f32         | f32                     | [global]
u0:14 | Type   | f64         | f64                     | [global]
u0:15 | Type   | bool        | bool                    | [global]
u0:16 | Type   | char        | char                    | [global]
u0:17 | Type   | str         | str                     | [global]
u0:18 | Module | main        | main                    | [global]
u0:19 | File   | main        | main::main              |         
u0:20 | Struct | Tree        | main::main::Tree        |         
u0:21 | Type   | T           | main::main::Tree::T     |         
u0:22 | Type   | Inch        | main::main::Inch        |         
u0:23 | Type   | Name        | main::main::Name        |         
u0:24 | Type   | T           | main::main::T           |         
u0:25 | Type   | LazyResolve | main::main::LazyResolve |         

--- expect:symbol-deps ---
u0:20 <- [u0:23]
u0:22 -> [u0:8]
u0:23 -> [u0:20, u0:24]
u0:24 <- [u0:23]
u0:8 <- [u0:22]


===============================================================================
type-alias-where-clauses
===============================================================================


--- file: src/main.rs ---
type Foo<T> where T: Copy = Box<T>;
type Assoc3 where = () where;

--- expect:symbols ---
u0:1  | Type   | i32    | i32                | [global]
u0:2  | Type   | i64    | i64                | [global]
u0:3  | Type   | i16    | i16                | [global]
u0:4  | Type   | i8     | i8                 | [global]
u0:5  | Type   | i128   | i128               | [global]
u0:6  | Type   | isize  | isize              | [global]
u0:7  | Type   | u32    | u32                | [global]
u0:8  | Type   | u64    | u64                | [global]
u0:9  | Type   | u16    | u16                | [global]
u0:10 | Type   | u8     | u8                 | [global]
u0:11 | Type   | u128   | u128               | [global]
u0:12 | Type   | usize  | usize              | [global]
u0:13 | Type   | f32    | f32                | [global]
u0:14 | Type   | f64    | f64                | [global]
u0:15 | Type   | bool   | bool               | [global]
u0:16 | Type   | char   | char               | [global]
u0:17 | Type   | str    | str                | [global]
u0:18 | Module | main   | main               | [global]
u0:19 | File   | main   | main::main         |         
u0:20 | Type   | Foo    | main::main::Foo    |         
u0:21 | Type   | T      | main::main::T      |         
u0:22 | Type   | Assoc3 | main::main::Assoc3 |         

--- expect:symbol-deps ---
u0:20 -> [u0:21]
u0:21 <- [u0:20]


===============================================================================
empty-statements
===============================================================================


--- file: src/main.rs ---
fn main() {
    ;
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                       | [global]
u0:2  | Type      | i64     | i64                       | [global]
u0:3  | Type      | i16     | i16                       | [global]
u0:4  | Type      | i8      | i8                        | [global]
u0:5  | Type      | i128    | i128                      | [global]
u0:6  | Type      | isize   | isize                     | [global]
u0:7  | Type      | u32     | u32                       | [global]
u0:8  | Type      | u64     | u64                       | [global]
u0:9  | Type      | u16     | u16                       | [global]
u0:10 | Type      | u8      | u8                        | [global]
u0:11 | Type      | u128    | u128                      | [global]
u0:12 | Type      | usize   | usize                     | [global]
u0:13 | Type      | f32     | f32                       | [global]
u0:14 | Type      | f64     | f64                       | [global]
u0:15 | Type      | bool    | bool                      | [global]
u0:16 | Type      | char    | char                      | [global]
u0:17 | Type      | str     | str                       | [global]
u0:18 | Module    | main    | main                      | [global]
u0:19 | File      | main    | main::main                |         
u0:20 | Function  | main    | main::main::main          |         
u0:21 | Namespace | block_0 | main::main::main::block_0 |         

--- expect:symbol-deps ---


===============================================================================
attributes
===============================================================================


--- file: src/main.rs ---
#[test]
fn test_foo() {}

#[derive(Debug)]
struct Baz;

#[derive(Debug, Eq,)]
struct Foo;

#[cfg(target_os = "macos")]
mod macos_only {}

#![allow(clippy::useless_transmute)]

#[clippy::cyclomatic_complexity = "100"]

--- expect:symbols ---
u0:1  | Type      | i32        | i32                           | [global]
u0:2  | Type      | i64        | i64                           | [global]
u0:3  | Type      | i16        | i16                           | [global]
u0:4  | Type      | i8         | i8                            | [global]
u0:5  | Type      | i128       | i128                          | [global]
u0:6  | Type      | isize      | isize                         | [global]
u0:7  | Type      | u32        | u32                           | [global]
u0:8  | Type      | u64        | u64                           | [global]
u0:9  | Type      | u16        | u16                           | [global]
u0:10 | Type      | u8         | u8                            | [global]
u0:11 | Type      | u128       | u128                          | [global]
u0:12 | Type      | usize      | usize                         | [global]
u0:13 | Type      | f32        | f32                           | [global]
u0:14 | Type      | f64        | f64                           | [global]
u0:15 | Type      | bool       | bool                          | [global]
u0:16 | Type      | char       | char                          | [global]
u0:17 | Type      | str        | str                           | [global]
u0:18 | Module    | main       | main                          | [global]
u0:19 | File      | main       | main::main                    |         
u0:20 | Function  | test_foo   | main::main::test_foo          |         
u0:21 | Namespace | block_0    | main::main::test_foo::block_0 |         
u0:22 | Struct    | Baz        | main::main::Baz               |         
u0:23 | Struct    | Foo        | main::main::Foo               |         
u0:24 | Namespace | macos_only | main::main::macos_only        |         

--- expect:symbol-deps ---


===============================================================================
inner-attributes
===============================================================================


--- file: src/main.rs ---
mod macos_only {
  #![cfg(target_os = "macos")]
}

match ty {
    #![cfg_attr(all(test, exhaustive), deny(non_exhaustive_omitted_patterns))]
    syn::Type::Array(ty) => self.visit_type(&ty.elem),
}

--- expect:symbols ---
u0:1  | Type      | i32        | i32                    | [global]
u0:2  | Type      | i64        | i64                    | [global]
u0:3  | Type      | i16        | i16                    | [global]
u0:4  | Type      | i8         | i8                     | [global]
u0:5  | Type      | i128       | i128                   | [global]
u0:6  | Type      | isize      | isize                  | [global]
u0:7  | Type      | u32        | u32                    | [global]
u0:8  | Type      | u64        | u64                    | [global]
u0:9  | Type      | u16        | u16                    | [global]
u0:10 | Type      | u8         | u8                     | [global]
u0:11 | Type      | u128       | u128                   | [global]
u0:12 | Type      | usize      | usize                  | [global]
u0:13 | Type      | f32        | f32                    | [global]
u0:14 | Type      | f64        | f64                    | [global]
u0:15 | Type      | bool       | bool                   | [global]
u0:16 | Type      | char       | char                   | [global]
u0:17 | Type      | str        | str                    | [global]
u0:18 | Module    | main       | main                   | [global]
u0:19 | File      | main       | main::main             |         
u0:20 | Namespace | macos_only | main::main::macos_only |         

--- expect:symbol-deps ---


===============================================================================
key-value-attribute-expressions
===============================================================================


--- file: src/main.rs ---
#[doc = include_str!("foo-doc.md")]
fn foo() {}

#[namespace = foo::bar]
fn baz() {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Function  | foo     | main::main::foo          |         
u0:21 | Namespace | block_0 | main::main::foo::block_0 |         
u0:22 | Function  | baz     | main::main::baz          |         
u0:23 | Namespace | block_1 | main::main::baz::block_1 |         

--- expect:symbol-deps ---


===============================================================================
attribute-macros
===============================================================================


--- file: src/main.rs ---
foo(#[attr(=> arbitrary tokens <=)] x, y);

foo(#[bar(some tokens are special in other contexts: $/';()*()+.)] x);

--- expect:symbols ---
u0:1  | Type   | i32   | i32        | [global]
u0:2  | Type   | i64   | i64        | [global]
u0:3  | Type   | i16   | i16        | [global]
u0:4  | Type   | i8    | i8         | [global]
u0:5  | Type   | i128  | i128       | [global]
u0:6  | Type   | isize | isize      | [global]
u0:7  | Type   | u32   | u32        | [global]
u0:8  | Type   | u64   | u64        | [global]
u0:9  | Type   | u16   | u16        | [global]
u0:10 | Type   | u8    | u8         | [global]
u0:11 | Type   | u128  | u128       | [global]
u0:12 | Type   | usize | usize      | [global]
u0:13 | Type   | f32   | f32        | [global]
u0:14 | Type   | f64   | f64        | [global]
u0:15 | Type   | bool  | bool       | [global]
u0:16 | Type   | char  | char       | [global]
u0:17 | Type   | str   | str        | [global]
u0:18 | Module | main  | main       | [global]
u0:19 | File   | main  | main::main |         

--- expect:symbol-deps ---


===============================================================================
derive-macro-helper-attributes
===============================================================================


--- file: src/main.rs ---
// Example from https://github.com/dtolnay/thiserror/blob/21c26903e29cb92ba1a7ff11e82ae2001646b60d/README.md

use thiserror::Error;

pub struct Limits;

#[derive(Error, Debug)]
pub enum Error {
    #[error("first letter must be lowercase but was {:?}", first_char(.0))]
    WrongCase(String),
    #[error("invalid index {idx}, expected at least {} and at most {}", .limits.lo, .limits.hi)]
    OutOfBounds { idx: usize, limits: Limits },
}

--- expect:symbols ---
u0:1  | Type        | i32                                        | i32                                                           | [global]
u0:2  | Type        | i64                                        | i64                                                           | [global]
u0:3  | Type        | i16                                        | i16                                                           | [global]
u0:4  | Type        | i8                                         | i8                                                            | [global]
u0:5  | Type        | i128                                       | i128                                                          | [global]
u0:6  | Type        | isize                                      | isize                                                         | [global]
u0:7  | Type        | u32                                        | u32                                                           | [global]
u0:8  | Type        | u64                                        | u64                                                           | [global]
u0:9  | Type        | u16                                        | u16                                                           | [global]
u0:10 | Type        | u8                                         | u8                                                            | [global]
u0:11 | Type        | u128                                       | u128                                                          | [global]
u0:12 | Type        | usize                                      | usize                                                         | [global]
u0:13 | Type        | f32                                        | f32                                                           | [global]
u0:14 | Type        | f64                                        | f64                                                           | [global]
u0:15 | Type        | bool                                       | bool                                                          | [global]
u0:16 | Type        | char                                       | char                                                          | [global]
u0:17 | Type        | str                                        | str                                                           | [global]
u0:18 | Module      | main                                       | main                                                          | [global]
u0:19 | File        | main                                       | main::main                                                    |         
u0:20 | Struct      | Limits                                     | main::main::Limits                                            |         
u0:21 | Enum        | Error                                      | main::main::Error                                             |         
u0:22 | EnumVariant | WrongCase(String)                          | main::main::Error::WrongCase(String)                          |         
u0:23 | EnumVariant | OutOfBounds { idx: usize, limits: Limits } | main::main::Error::OutOfBounds { idx: usize, limits: Limits } |         
u0:24 | Field       | idx                                        | main::main::Error::idx                                        |         
u0:25 | Field       | limits                                     | main::main::Error::limits                                     |         

--- expect:symbol-deps ---
u0:12 <- [u0:21, u0:23, u0:24]
u0:20 <- [u0:21, u0:23, u0:25]
u0:21 -> [u0:12, u0:20, u0:24, u0:25]
u0:23 -> [u0:12, u0:20, u0:24, u0:25]
u0:24 -> [u0:12]
u0:24 <- [u0:21, u0:23]
u0:25 -> [u0:20]
u0:25 <- [u0:21, u0:23]


===============================================================================
attributes-and-expressions
===============================================================================


--- file: src/main.rs ---
fn foo() {
   bar(x,
       #[cfg(foo = "bar")]
       y);
   let z = [#[hello] 2, 7, 8];
   let t = (#[hello] 2, 7, 8);
}

fn bar(x: i32, y: i32) {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                         | [global]
u0:2  | Type      | i64     | i64                         | [global]
u0:3  | Type      | i16     | i16                         | [global]
u0:4  | Type      | i8      | i8                          | [global]
u0:5  | Type      | i128    | i128                        | [global]
u0:6  | Type      | isize   | isize                       | [global]
u0:7  | Type      | u32     | u32                         | [global]
u0:8  | Type      | u64     | u64                         | [global]
u0:9  | Type      | u16     | u16                         | [global]
u0:10 | Type      | u8      | u8                          | [global]
u0:11 | Type      | u128    | u128                        | [global]
u0:12 | Type      | usize   | usize                       | [global]
u0:13 | Type      | f32     | f32                         | [global]
u0:14 | Type      | f64     | f64                         | [global]
u0:15 | Type      | bool    | bool                        | [global]
u0:16 | Type      | char    | char                        | [global]
u0:17 | Type      | str     | str                         | [global]
u0:18 | Module    | main    | main                        | [global]
u0:19 | File      | main    | main::main                  |         
u0:20 | Function  | foo     | main::main::foo             |         
u0:21 | Namespace | block_0 | main::main::foo::block_0    |         
u0:22 | Variable  | z       | main::main::foo::block_0::z |         
u0:23 | Variable  | t       | main::main::foo::block_0::t |         
u0:24 | Function  | bar     | main::main::bar             |         
u0:25 | Variable  | x       | main::main::bar::x          |         
u0:26 | Variable  | y       | main::main::bar::y          |         
u0:27 | Namespace | block_1 | main::main::bar::block_1    |         

--- expect:symbol-deps ---
u0:1 <- [u0:20, u0:22, u0:23, u0:24, u0:25, u0:26]
u0:20 -> [u0:1, u0:24]
u0:22 -> [u0:1]
u0:23 -> [u0:1]
u0:24 -> [u0:1]
u0:24 <- [u0:20]
u0:25 -> [u0:1]
u0:26 -> [u0:1]


===============================================================================
inherent-impls
===============================================================================


--- file: src/main.rs ---
struct Person;
struct Machine<const STATE: State>;

impl Person {
  const leg_count : u32 = 2;

  fn walk(self) {}
  fn walk_mut(mut self) {}
  fn talk(& self) {}
  fn talk_mut(&'a mut self) {}
}

impl Machine<{State::Init}> {}

--- expect:symbols ---
u0:1  | Type      | i32       | i32                                   | [global]
u0:2  | Type      | i64       | i64                                   | [global]
u0:3  | Type      | i16       | i16                                   | [global]
u0:4  | Type      | i8        | i8                                    | [global]
u0:5  | Type      | i128      | i128                                  | [global]
u0:6  | Type      | isize     | isize                                 | [global]
u0:7  | Type      | u32       | u32                                   | [global]
u0:8  | Type      | u64       | u64                                   | [global]
u0:9  | Type      | u16       | u16                                   | [global]
u0:10 | Type      | u8        | u8                                    | [global]
u0:11 | Type      | u128      | u128                                  | [global]
u0:12 | Type      | usize     | usize                                 | [global]
u0:13 | Type      | f32       | f32                                   | [global]
u0:14 | Type      | f64       | f64                                   | [global]
u0:15 | Type      | bool      | bool                                  | [global]
u0:16 | Type      | char      | char                                  | [global]
u0:17 | Type      | str       | str                                   | [global]
u0:18 | Module    | main      | main                                  | [global]
u0:19 | File      | main      | main::main                            |         
u0:20 | Impl      | Person    | main::main::Person                    |         
u0:21 | Impl      | Machine   | main::main::Machine                   |         
u0:22 | Const     | leg_count | main::main::Person::leg_count         |         
u0:23 | Function  | walk      | main::main::Person::walk              |         
u0:24 | Namespace | block_0   | main::main::Person::walk::block_0     |         
u0:25 | Function  | walk_mut  | main::main::Person::walk_mut          |         
u0:26 | Namespace | block_1   | main::main::Person::walk_mut::block_1 |         
u0:27 | Function  | talk      | main::main::Person::talk              |         
u0:28 | Namespace | block_2   | main::main::Person::talk::block_2     |         
u0:29 | Function  | talk_mut  | main::main::Person::talk_mut          |         
u0:30 | Namespace | block_3   | main::main::Person::talk_mut::block_3 |         
u0:31 | Namespace | block_4   | main::main::Machine::block_4          |         

--- expect:symbol-deps ---
u0:20 -> [u0:7]
u0:22 -> [u0:7]
u0:7 <- [u0:20, u0:22]


===============================================================================
inherent-impls-across-multiple-files
===============================================================================


--- file: src/main.rs ---
pub struct Person;

impl Person {
  fn walk(self) {}
}

--- file: src/foo.rs ---
impl Person {
  fn talk(& self) {}
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                               | [global]
u0:2  | Type      | i64     | i64                               | [global]
u0:3  | Type      | i16     | i16                               | [global]
u0:4  | Type      | i8      | i8                                | [global]
u0:5  | Type      | i128    | i128                              | [global]
u0:6  | Type      | isize   | isize                             | [global]
u0:7  | Type      | u32     | u32                               | [global]
u0:8  | Type      | u64     | u64                               | [global]
u0:9  | Type      | u16     | u16                               | [global]
u0:10 | Type      | u8      | u8                                | [global]
u0:11 | Type      | u128    | u128                              | [global]
u0:12 | Type      | usize   | usize                             | [global]
u0:13 | Type      | f32     | f32                               | [global]
u0:14 | Type      | f64     | f64                               | [global]
u0:15 | Type      | bool    | bool                              | [global]
u0:16 | Type      | char    | char                              | [global]
u0:17 | Type      | str     | str                               | [global]
u0:18 | Module    | main    | main                              | [global]
u0:19 | File      | main    | main::main                        |         
u0:20 | Impl      | Person  | main::main::Person                |         
u0:21 | Function  | walk    | main::main::Person::walk          |         
u0:22 | Namespace | block_0 | main::main::Person::walk::block_0 |         
u1:23 | Type      | i32     | i32                               | [global]
u1:24 | Type      | i64     | i64                               | [global]
u1:25 | Type      | i16     | i16                               | [global]
u1:26 | Type      | i8      | i8                                | [global]
u1:27 | Type      | i128    | i128                              | [global]
u1:28 | Type      | isize   | isize                             | [global]
u1:29 | Type      | u32     | u32                               | [global]
u1:30 | Type      | u64     | u64                               | [global]
u1:31 | Type      | u16     | u16                               | [global]
u1:32 | Type      | u8      | u8                                | [global]
u1:33 | Type      | u128    | u128                              | [global]
u1:34 | Type      | usize   | usize                             | [global]
u1:35 | Type      | f32     | f32                               | [global]
u1:36 | Type      | f64     | f64                               | [global]
u1:37 | Type      | bool    | bool                              | [global]
u1:38 | Type      | char    | char                              | [global]
u1:39 | Type      | str     | str                               | [global]
u1:40 | Module    | foo     | foo                               | [global]
u1:41 | File      | foo     | foo::foo                          |         
u1:42 | Impl      | Person  | foo::foo::Person                  |         
u1:43 | Function  | talk    | foo::foo::Person::talk            |         
u1:44 | Namespace | block_0 | foo::foo::Person::talk::block_0   |         

--- expect:symbol-deps ---


===============================================================================
inherent-impls-no-defines
===============================================================================


--- file: src/main.rs ---
impl Person {
  fn walk(self) {}
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                               | [global]
u0:2  | Type      | i64     | i64                               | [global]
u0:3  | Type      | i16     | i16                               | [global]
u0:4  | Type      | i8      | i8                                | [global]
u0:5  | Type      | i128    | i128                              | [global]
u0:6  | Type      | isize   | isize                             | [global]
u0:7  | Type      | u32     | u32                               | [global]
u0:8  | Type      | u64     | u64                               | [global]
u0:9  | Type      | u16     | u16                               | [global]
u0:10 | Type      | u8      | u8                                | [global]
u0:11 | Type      | u128    | u128                              | [global]
u0:12 | Type      | usize   | usize                             | [global]
u0:13 | Type      | f32     | f32                               | [global]
u0:14 | Type      | f64     | f64                               | [global]
u0:15 | Type      | bool    | bool                              | [global]
u0:16 | Type      | char    | char                              | [global]
u0:17 | Type      | str     | str                               | [global]
u0:18 | Module    | main    | main                              | [global]
u0:19 | File      | main    | main::main                        |         
u0:20 | Impl      | Person  | main::main::Person                |         
u0:21 | Function  | walk    | main::main::Person::walk          |         
u0:22 | Namespace | block_0 | main::main::Person::walk::block_0 |         

--- expect:symbol-deps ---


===============================================================================
trait-impls
===============================================================================


--- file: src/main.rs ---
impl<'a> iter::Iterator for Self::Iter<'a> {
}

impl ConvertTo<i64> for i32 {
    fn convert(&self) -> i64 { *self as i64 }
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                               | [global]
u0:2  | Type      | i64     | i64                               | [global]
u0:3  | Type      | i16     | i16                               | [global]
u0:4  | Type      | i8      | i8                                | [global]
u0:5  | Type      | i128    | i128                              | [global]
u0:6  | Type      | isize   | isize                             | [global]
u0:7  | Type      | u32     | u32                               | [global]
u0:8  | Type      | u64     | u64                               | [global]
u0:9  | Type      | u16     | u16                               | [global]
u0:10 | Type      | u8      | u8                                | [global]
u0:11 | Type      | u128    | u128                              | [global]
u0:12 | Type      | usize   | usize                             | [global]
u0:13 | Type      | f32     | f32                               | [global]
u0:14 | Type      | f64     | f64                               | [global]
u0:15 | Type      | bool    | bool                              | [global]
u0:16 | Type      | char    | char                              | [global]
u0:17 | Type      | str     | str                               | [global]
u0:18 | Module    | main    | main                              | [global]
u0:19 | File      | main    | main::main                        |         
u0:20 | Impl      | Self    | main::main::Self                  |         
u0:21 | Impl      | i32     | main::main::i32                   |         
u0:22 | Function  | convert | main::main::i32::convert          |         
u0:23 | Namespace | block_0 | main::main::i32::convert::block_0 |         

--- expect:symbol-deps ---
u0:2 <- [u0:22]
u0:22 -> [u0:2]


===============================================================================
unsafe-impls
===============================================================================


--- file: src/main.rs ---
unsafe impl Foo {
}

--- expect:symbols ---
u0:1  | Type   | i32   | i32             | [global]
u0:2  | Type   | i64   | i64             | [global]
u0:3  | Type   | i16   | i16             | [global]
u0:4  | Type   | i8    | i8              | [global]
u0:5  | Type   | i128  | i128            | [global]
u0:6  | Type   | isize | isize           | [global]
u0:7  | Type   | u32   | u32             | [global]
u0:8  | Type   | u64   | u64             | [global]
u0:9  | Type   | u16   | u16             | [global]
u0:10 | Type   | u8    | u8              | [global]
u0:11 | Type   | u128  | u128            | [global]
u0:12 | Type   | usize | usize           | [global]
u0:13 | Type   | f32   | f32             | [global]
u0:14 | Type   | f64   | f64             | [global]
u0:15 | Type   | bool  | bool            | [global]
u0:16 | Type   | char  | char            | [global]
u0:17 | Type   | str   | str             | [global]
u0:18 | Module | main  | main            | [global]
u0:19 | File   | main  | main::main      |         
u0:20 | Impl   | Foo   | main::main::Foo |         

--- expect:symbol-deps ---


===============================================================================
disable-automatically-derived-trait-impls
===============================================================================


--- file: src/main.rs ---
impl !Send for Foo {}

--- expect:symbols ---
u0:1  | Type   | i32   | i32             | [global]
u0:2  | Type   | i64   | i64             | [global]
u0:3  | Type   | i16   | i16             | [global]
u0:4  | Type   | i8    | i8              | [global]
u0:5  | Type   | i128  | i128            | [global]
u0:6  | Type   | isize | isize           | [global]
u0:7  | Type   | u32   | u32             | [global]
u0:8  | Type   | u64   | u64             | [global]
u0:9  | Type   | u16   | u16             | [global]
u0:10 | Type   | u8    | u8              | [global]
u0:11 | Type   | u128  | u128            | [global]
u0:12 | Type   | usize | usize           | [global]
u0:13 | Type   | f32   | f32             | [global]
u0:14 | Type   | f64   | f64             | [global]
u0:15 | Type   | bool  | bool            | [global]
u0:16 | Type   | char  | char            | [global]
u0:17 | Type   | str   | str             | [global]
u0:18 | Module | main  | main            | [global]
u0:19 | File   | main  | main::main      |         
u0:20 | Impl   | Foo   | main::main::Foo |         

--- expect:symbol-deps ---


===============================================================================
impl-dyn-with-parentheses
===============================================================================


--- file: src/main.rs ---
pub unsafe trait Trait {}

unsafe impl Trait for dyn (::std::any::Any) + Send { }

--- expect:symbols ---
u0:1  | Type   | i32        | i32                    | [global]
u0:2  | Type   | i64        | i64                    | [global]
u0:3  | Type   | i16        | i16                    | [global]
u0:4  | Type   | i8         | i8                     | [global]
u0:5  | Type   | i128       | i128                   | [global]
u0:6  | Type   | isize      | isize                  | [global]
u0:7  | Type   | u32        | u32                    | [global]
u0:8  | Type   | u64        | u64                    | [global]
u0:9  | Type   | u16        | u16                    | [global]
u0:10 | Type   | u8         | u8                     | [global]
u0:11 | Type   | u128       | u128                   | [global]
u0:12 | Type   | usize      | usize                  | [global]
u0:13 | Type   | f32        | f32                    | [global]
u0:14 | Type   | f64        | f64                    | [global]
u0:15 | Type   | bool       | bool                   | [global]
u0:16 | Type   | char       | char                   | [global]
u0:17 | Type   | str        | str                    | [global]
u0:18 | Module | main       | main                   | [global]
u0:19 | File   | main       | main::main             |         
u0:20 | Trait  | Trait      | main::main::Trait      |         
u0:21 | Impl   | ::std::any | main::main::::std::any |         

--- expect:symbol-deps ---


===============================================================================
trait-impl-signature
===============================================================================


--- file: src/main.rs ---
impl<K: Debug + Ord> Debug for OccupiedError<K>;
impl<K: Debug + Ord> Display for OccupiedError<K>;

--- expect:symbols ---
u0:1  | Type   | i32           | i32                          | [global]
u0:2  | Type   | i64           | i64                          | [global]
u0:3  | Type   | i16           | i16                          | [global]
u0:4  | Type   | i8            | i8                           | [global]
u0:5  | Type   | i128          | i128                         | [global]
u0:6  | Type   | isize         | isize                        | [global]
u0:7  | Type   | u32           | u32                          | [global]
u0:8  | Type   | u64           | u64                          | [global]
u0:9  | Type   | u16           | u16                          | [global]
u0:10 | Type   | u8            | u8                           | [global]
u0:11 | Type   | u128          | u128                         | [global]
u0:12 | Type   | usize         | usize                        | [global]
u0:13 | Type   | f32           | f32                          | [global]
u0:14 | Type   | f64           | f64                          | [global]
u0:15 | Type   | bool          | bool                         | [global]
u0:16 | Type   | char          | char                         | [global]
u0:17 | Type   | str           | str                          | [global]
u0:18 | Module | main          | main                         | [global]
u0:19 | File   | main          | main::main                   |         
u0:20 | Impl   | OccupiedError | main::main::OccupiedError    |         
u0:21 | Type   | K             | main::main::OccupiedError::K |         
u0:22 | Type   | K             | main::main::OccupiedError::K |         

--- expect:symbol-deps ---


===============================================================================
impls-with-default-functions
===============================================================================


--- file: src/main.rs ---
impl Foo {
  const default fn bar() -> i32 {
    // Make 'default' still works as an identifier
    default.bar();
  }
}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                           | [global]
u0:2  | Type      | i64     | i64                           | [global]
u0:3  | Type      | i16     | i16                           | [global]
u0:4  | Type      | i8      | i8                            | [global]
u0:5  | Type      | i128    | i128                          | [global]
u0:6  | Type      | isize   | isize                         | [global]
u0:7  | Type      | u32     | u32                           | [global]
u0:8  | Type      | u64     | u64                           | [global]
u0:9  | Type      | u16     | u16                           | [global]
u0:10 | Type      | u8      | u8                            | [global]
u0:11 | Type      | u128    | u128                          | [global]
u0:12 | Type      | usize   | usize                         | [global]
u0:13 | Type      | f32     | f32                           | [global]
u0:14 | Type      | f64     | f64                           | [global]
u0:15 | Type      | bool    | bool                          | [global]
u0:16 | Type      | char    | char                          | [global]
u0:17 | Type      | str     | str                           | [global]
u0:18 | Module    | main    | main                          | [global]
u0:19 | File      | main    | main::main                    |         
u0:20 | Impl      | Foo     | main::main::Foo               |         
u0:21 | Function  | bar     | main::main::Foo::bar          |         
u0:22 | Namespace | block_0 | main::main::Foo::bar::block_0 |         

--- expect:symbol-deps ---
u0:1 <- [u0:21]
u0:21 -> [u0:1]


===============================================================================
trait-declarations
===============================================================================


--- file: src/main.rs ---
pub trait Item: Clone + Eq + fmt::Debug {
    fn summarize(&self) -> Self::Summary;
}

unsafe trait Foo { }

--- expect:symbols ---
u0:1  | Type     | i32       | i32                         | [global]
u0:2  | Type     | i64       | i64                         | [global]
u0:3  | Type     | i16       | i16                         | [global]
u0:4  | Type     | i8        | i8                          | [global]
u0:5  | Type     | i128      | i128                        | [global]
u0:6  | Type     | isize     | isize                       | [global]
u0:7  | Type     | u32       | u32                         | [global]
u0:8  | Type     | u64       | u64                         | [global]
u0:9  | Type     | u16       | u16                         | [global]
u0:10 | Type     | u8        | u8                          | [global]
u0:11 | Type     | u128      | u128                        | [global]
u0:12 | Type     | usize     | usize                       | [global]
u0:13 | Type     | f32       | f32                         | [global]
u0:14 | Type     | f64       | f64                         | [global]
u0:15 | Type     | bool      | bool                        | [global]
u0:16 | Type     | char      | char                        | [global]
u0:17 | Type     | str       | str                         | [global]
u0:18 | Module   | main      | main                        | [global]
u0:19 | File     | main      | main::main                  |         
u0:20 | Trait    | Item      | main::main::Item            |         
u0:21 | Function | summarize | main::main::Item::summarize |         
u0:22 | Trait    | Foo       | main::main::Foo             |         

--- expect:symbol-deps ---


===============================================================================
trait-declarations-with-optional-type-parameters
===============================================================================


--- file: src/main.rs ---
struct Foo;

trait Add<RHS=Foo> {
    type Output;
    fn add(self, rhs: RHS) -> Self::Output;
}

--- expect:symbols ---
u0:1  | Type     | i32    | i32                     | [global]
u0:2  | Type     | i64    | i64                     | [global]
u0:3  | Type     | i16    | i16                     | [global]
u0:4  | Type     | i8     | i8                      | [global]
u0:5  | Type     | i128   | i128                    | [global]
u0:6  | Type     | isize  | isize                   | [global]
u0:7  | Type     | u32    | u32                     | [global]
u0:8  | Type     | u64    | u64                     | [global]
u0:9  | Type     | u16    | u16                     | [global]
u0:10 | Type     | u8     | u8                      | [global]
u0:11 | Type     | u128   | u128                    | [global]
u0:12 | Type     | usize  | usize                   | [global]
u0:13 | Type     | f32    | f32                     | [global]
u0:14 | Type     | f64    | f64                     | [global]
u0:15 | Type     | bool   | bool                    | [global]
u0:16 | Type     | char   | char                    | [global]
u0:17 | Type     | str    | str                     | [global]
u0:18 | Module   | main   | main                    | [global]
u0:19 | File     | main   | main::main              |         
u0:20 | Struct   | Foo    | main::main::Foo         |         
u0:21 | Trait    | Add    | main::main::Add         |         
u0:22 | Type     | RHS    | main::main::Add::RHS    |         
u0:23 | Type     | Output | main::main::Add::Output |         
u0:24 | Function | add    | main::main::Add::add    |         
u0:25 | Variable | rhs    | main::main::Add::rhs    |         

--- expect:symbol-deps ---
u0:20 <- [u0:21, u0:22]
u0:21 -> [u0:20, u0:22, u0:23]
u0:22 -> [u0:20]
u0:22 <- [u0:21, u0:25]
u0:23 <- [u0:21, u0:24]
u0:24 -> [u0:23]
u0:25 -> [u0:22]


===============================================================================
unsized-types-in-trait-bounds
===============================================================================


--- file: src/main.rs ---
trait Foo<T: ?Sized> {
}

fn univariant(this: &impl ?Sized, that: &(impl LayoutCalculator + ?Sized)) {}

--- expect:symbols ---
u0:1  | Type      | i32        | i32                             | [global]
u0:2  | Type      | i64        | i64                             | [global]
u0:3  | Type      | i16        | i16                             | [global]
u0:4  | Type      | i8         | i8                              | [global]
u0:5  | Type      | i128       | i128                            | [global]
u0:6  | Type      | isize      | isize                           | [global]
u0:7  | Type      | u32        | u32                             | [global]
u0:8  | Type      | u64        | u64                             | [global]
u0:9  | Type      | u16        | u16                             | [global]
u0:10 | Type      | u8         | u8                              | [global]
u0:11 | Type      | u128       | u128                            | [global]
u0:12 | Type      | usize      | usize                           | [global]
u0:13 | Type      | f32        | f32                             | [global]
u0:14 | Type      | f64        | f64                             | [global]
u0:15 | Type      | bool       | bool                            | [global]
u0:16 | Type      | char       | char                            | [global]
u0:17 | Type      | str        | str                             | [global]
u0:18 | Module    | main       | main                            | [global]
u0:19 | File      | main       | main::main                      |         
u0:20 | Trait     | Foo        | main::main::Foo                 |         
u0:21 | Type      | T          | main::main::Foo::T              |         
u0:22 | Function  | univariant | main::main::univariant          |         
u0:23 | Variable  | this       | main::main::univariant::this    |         
u0:24 | Variable  | that       | main::main::univariant::that    |         
u0:25 | Namespace | block_0    | main::main::univariant::block_0 |         

--- expect:symbol-deps ---


===============================================================================
trait-bounds-in-type-arguments-in-trait
===============================================================================


--- file: src/main.rs ---
impl<T: AstDeref<Target: HasNodeId>> HasNodeId for T {}

--- expect:symbols ---
u0:1  | Type   | i32   | i32              | [global]
u0:2  | Type   | i64   | i64              | [global]
u0:3  | Type   | i16   | i16              | [global]
u0:4  | Type   | i8    | i8               | [global]
u0:5  | Type   | i128  | i128             | [global]
u0:6  | Type   | isize | isize            | [global]
u0:7  | Type   | u32   | u32              | [global]
u0:8  | Type   | u64   | u64              | [global]
u0:9  | Type   | u16   | u16              | [global]
u0:10 | Type   | u8    | u8               | [global]
u0:11 | Type   | u128  | u128             | [global]
u0:12 | Type   | usize | usize            | [global]
u0:13 | Type   | f32   | f32              | [global]
u0:14 | Type   | f64   | f64              | [global]
u0:15 | Type   | bool  | bool             | [global]
u0:16 | Type   | char  | char             | [global]
u0:17 | Type   | str   | str              | [global]
u0:18 | Module | main  | main             | [global]
u0:19 | File   | main  | main::main       |         
u0:20 | Impl   | T     | main::main::T    |         
u0:21 | Type   | T     | main::main::T::T |         

--- expect:symbol-deps ---


===============================================================================
macro-invocations-inside-trait-declarations
===============================================================================


--- file: src/main.rs ---
pub trait A: B + C + D {
    private_decl!{}
    fn f(&self);
}

--- expect:symbols ---
u0:1  | Type     | i32   | i32              | [global]
u0:2  | Type     | i64   | i64              | [global]
u0:3  | Type     | i16   | i16              | [global]
u0:4  | Type     | i8    | i8               | [global]
u0:5  | Type     | i128  | i128             | [global]
u0:6  | Type     | isize | isize            | [global]
u0:7  | Type     | u32   | u32              | [global]
u0:8  | Type     | u64   | u64              | [global]
u0:9  | Type     | u16   | u16              | [global]
u0:10 | Type     | u8    | u8               | [global]
u0:11 | Type     | u128  | u128             | [global]
u0:12 | Type     | usize | usize            | [global]
u0:13 | Type     | f32   | f32              | [global]
u0:14 | Type     | f64   | f64              | [global]
u0:15 | Type     | bool  | bool             | [global]
u0:16 | Type     | char  | char             | [global]
u0:17 | Type     | str   | str              | [global]
u0:18 | Module   | main  | main             | [global]
u0:19 | File     | main  | main::main       |         
u0:20 | Trait    | A     | main::main::A    |         
u0:21 | Function | f     | main::main::A::f |         

--- expect:symbol-deps ---


===============================================================================
associated-types
===============================================================================


--- file: src/main.rs ---
pub trait Graph {
    type N: fmt::Display;
    type E;
}

--- expect:symbols ---
u0:1  | Type   | i32   | i32                  | [global]
u0:2  | Type   | i64   | i64                  | [global]
u0:3  | Type   | i16   | i16                  | [global]
u0:4  | Type   | i8    | i8                   | [global]
u0:5  | Type   | i128  | i128                 | [global]
u0:6  | Type   | isize | isize                | [global]
u0:7  | Type   | u32   | u32                  | [global]
u0:8  | Type   | u64   | u64                  | [global]
u0:9  | Type   | u16   | u16                  | [global]
u0:10 | Type   | u8    | u8                   | [global]
u0:11 | Type   | u128  | u128                 | [global]
u0:12 | Type   | usize | usize                | [global]
u0:13 | Type   | f32   | f32                  | [global]
u0:14 | Type   | f64   | f64                  | [global]
u0:15 | Type   | bool  | bool                 | [global]
u0:16 | Type   | char  | char                 | [global]
u0:17 | Type   | str   | str                  | [global]
u0:18 | Module | main  | main                 | [global]
u0:19 | File   | main  | main::main           |         
u0:20 | Trait  | Graph | main::main::Graph    |         
u0:21 | Type   | N     | main::main::Graph::N |         
u0:22 | Type   | E     | main::main::Graph::E |         

--- expect:symbol-deps ---


===============================================================================
associated-type-definitions
===============================================================================


--- file: src/main.rs ---
impl Trait for T {
    type Associated = T where 'static: 'static;
}

--- expect:symbols ---
u0:1  | Type   | i32        | i32                       | [global]
u0:2  | Type   | i64        | i64                       | [global]
u0:3  | Type   | i16        | i16                       | [global]
u0:4  | Type   | i8         | i8                        | [global]
u0:5  | Type   | i128       | i128                      | [global]
u0:6  | Type   | isize      | isize                     | [global]
u0:7  | Type   | u32        | u32                       | [global]
u0:8  | Type   | u64        | u64                       | [global]
u0:9  | Type   | u16        | u16                       | [global]
u0:10 | Type   | u8         | u8                        | [global]
u0:11 | Type   | u128       | u128                      | [global]
u0:12 | Type   | usize      | usize                     | [global]
u0:13 | Type   | f32        | f32                       | [global]
u0:14 | Type   | f64        | f64                       | [global]
u0:15 | Type   | bool       | bool                      | [global]
u0:16 | Type   | char       | char                      | [global]
u0:17 | Type   | str        | str                       | [global]
u0:18 | Module | main       | main                      | [global]
u0:19 | File   | main       | main::main                |         
u0:20 | Impl   | T          | main::main::T             |         
u0:21 | Type   | Associated | main::main::T::Associated |         

--- expect:symbol-deps ---
u0:20 <- [u0:21]
u0:21 -> [u0:20]


===============================================================================
generic-associated-types
===============================================================================


--- file: src/main.rs ---
pub trait Database {
    type F<'a, D>: Future<Output = D> + 'a;
}

impl Database for Foo {
    type F<'a, D> = DatabaseFuture<'a, D>;
}

fn use_database1<D: Database<F<'a, TD> = F>>() {}

fn use_database2<D>()
where
    D: Database<F<'a, TD> = F>,
{}

--- expect:symbols ---
u0:1  | Type      | i32           | i32                                | [global]
u0:2  | Type      | i64           | i64                                | [global]
u0:3  | Type      | i16           | i16                                | [global]
u0:4  | Type      | i8            | i8                                 | [global]
u0:5  | Type      | i128          | i128                               | [global]
u0:6  | Type      | isize         | isize                              | [global]
u0:7  | Type      | u32           | u32                                | [global]
u0:8  | Type      | u64           | u64                                | [global]
u0:9  | Type      | u16           | u16                                | [global]
u0:10 | Type      | u8            | u8                                 | [global]
u0:11 | Type      | u128          | u128                               | [global]
u0:12 | Type      | usize         | usize                              | [global]
u0:13 | Type      | f32           | f32                                | [global]
u0:14 | Type      | f64           | f64                                | [global]
u0:15 | Type      | bool          | bool                               | [global]
u0:16 | Type      | char          | char                               | [global]
u0:17 | Type      | str           | str                                | [global]
u0:18 | Module    | main          | main                               | [global]
u0:19 | File      | main          | main::main                         |         
u0:20 | Trait     | Database      | main::main::Database               |         
u0:21 | Type      | F             | main::main::Database::F            |         
u0:22 | Type      | D             | main::main::Database::D            |         
u0:23 | Impl      | Foo           | main::main::Foo                    |         
u0:24 | Type      | F             | main::main::Foo::F                 |         
u0:25 | Type      | D             | main::main::Foo::D                 |         
u0:26 | Function  | use_database1 | main::main::use_database1          |         
u0:27 | Type      | D             | main::main::use_database1::D       |         
u0:28 | Namespace | block_0       | main::main::use_database1::block_0 |         
u0:29 | Function  | use_database2 | main::main::use_database2          |         
u0:30 | Type      | D             | main::main::use_database2::D       |         
u0:31 | Namespace | block_1       | main::main::use_database2::block_1 |         

--- expect:symbol-deps ---
u0:23 -> [u0:25]
u0:24 -> [u0:25]
u0:25 <- [u0:23, u0:24]


===============================================================================
higher-ranked-types-basic
===============================================================================


--- file: src/main.rs ---
struct AddAssign<T>;

trait T: for<'a> AddAssign<&'a usize> {
}

type FnObject<'b> = dyn for<'a> FnLike<&'a isize, &'a isize> + 'b;

--- expect:symbols ---
u0:1  | Type   | i32       | i32                      | [global]
u0:2  | Type   | i64       | i64                      | [global]
u0:3  | Type   | i16       | i16                      | [global]
u0:4  | Type   | i8        | i8                       | [global]
u0:5  | Type   | i128      | i128                     | [global]
u0:6  | Type   | isize     | isize                    | [global]
u0:7  | Type   | u32       | u32                      | [global]
u0:8  | Type   | u64       | u64                      | [global]
u0:9  | Type   | u16       | u16                      | [global]
u0:10 | Type   | u8        | u8                       | [global]
u0:11 | Type   | u128      | u128                     | [global]
u0:12 | Type   | usize     | usize                    | [global]
u0:13 | Type   | f32       | f32                      | [global]
u0:14 | Type   | f64       | f64                      | [global]
u0:15 | Type   | bool      | bool                     | [global]
u0:16 | Type   | char      | char                     | [global]
u0:17 | Type   | str       | str                      | [global]
u0:18 | Module | main      | main                     | [global]
u0:19 | File   | main      | main::main               |         
u0:20 | Struct | AddAssign | main::main::AddAssign    |         
u0:21 | Type   | T         | main::main::AddAssign::T |         
u0:22 | Trait  | T         | main::main::T            |         
u0:23 | Type   | FnObject  | main::main::FnObject     |         

--- expect:symbol-deps ---
u0:23 -> [u0:6]
u0:6 <- [u0:23]


===============================================================================
higher-ranked-types-with-trait-bounds
===============================================================================


--- file: src/main.rs ---
trait Foo {};
trait Bar {};
trait Baz<T> {};

struct AddAssign<T: Foo, U: Baz<u32>>;

trait T: for<'a> AddAssign<&'a usize> {
}

type FnObject<'b> = dyn for<'a> FnLike<&'a isize, &'a isize> + 'b;

--- expect:symbols ---
u0:1  | Type   | i32       | i32                      | [global]
u0:2  | Type   | i64       | i64                      | [global]
u0:3  | Type   | i16       | i16                      | [global]
u0:4  | Type   | i8        | i8                       | [global]
u0:5  | Type   | i128      | i128                     | [global]
u0:6  | Type   | isize     | isize                    | [global]
u0:7  | Type   | u32       | u32                      | [global]
u0:8  | Type   | u64       | u64                      | [global]
u0:9  | Type   | u16       | u16                      | [global]
u0:10 | Type   | u8        | u8                       | [global]
u0:11 | Type   | u128      | u128                     | [global]
u0:12 | Type   | usize     | usize                    | [global]
u0:13 | Type   | f32       | f32                      | [global]
u0:14 | Type   | f64       | f64                      | [global]
u0:15 | Type   | bool      | bool                     | [global]
u0:16 | Type   | char      | char                     | [global]
u0:17 | Type   | str       | str                      | [global]
u0:18 | Module | main      | main                     | [global]
u0:19 | File   | main      | main::main               |         
u0:20 | Trait  | Foo       | main::main::Foo          |         
u0:21 | Trait  | Bar       | main::main::Bar          |         
u0:22 | Trait  | Baz       | main::main::Baz          |         
u0:23 | Type   | T         | main::main::Baz::T       |         
u0:24 | Struct | AddAssign | main::main::AddAssign    |         
u0:25 | Type   | T         | main::main::AddAssign::T |         
u0:26 | Type   | U         | main::main::AddAssign::U |         
u0:27 | Trait  | T         | main::main::T            |         
u0:28 | Type   | FnObject  | main::main::FnObject     |         

--- expect:symbol-deps ---
u0:28 -> [u0:6]
u0:6 <- [u0:28]


===============================================================================
visibility-modifiers
===============================================================================


--- file: src/main.rs ---
pub fn a() {}
pub(super) fn b() {}
pub(self) fn c() {}
pub(crate) fn c() {}
pub(in crate::d) fn e() {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                    | [global]
u0:2  | Type      | i64     | i64                    | [global]
u0:3  | Type      | i16     | i16                    | [global]
u0:4  | Type      | i8      | i8                     | [global]
u0:5  | Type      | i128    | i128                   | [global]
u0:6  | Type      | isize   | isize                  | [global]
u0:7  | Type      | u32     | u32                    | [global]
u0:8  | Type      | u64     | u64                    | [global]
u0:9  | Type      | u16     | u16                    | [global]
u0:10 | Type      | u8      | u8                     | [global]
u0:11 | Type      | u128    | u128                   | [global]
u0:12 | Type      | usize   | usize                  | [global]
u0:13 | Type      | f32     | f32                    | [global]
u0:14 | Type      | f64     | f64                    | [global]
u0:15 | Type      | bool    | bool                   | [global]
u0:16 | Type      | char    | char                   | [global]
u0:17 | Type      | str     | str                    | [global]
u0:18 | Module    | main    | main                   | [global]
u0:19 | File      | main    | main::main             |         
u0:20 | Function  | a       | main::main::a          |         
u0:21 | Namespace | block_0 | main::main::a::block_0 |         
u0:22 | Function  | b       | main::main::b          |         
u0:23 | Namespace | block_1 | main::main::b::block_1 |         
u0:24 | Function  | c       | main::main::c          |         
u0:25 | Namespace | block_2 | main::main::c::block_2 |         
u0:26 | Namespace | block_3 | main::main::c::block_3 |         
u0:27 | Function  | e       | main::main::e          |         
u0:28 | Namespace | block_4 | main::main::e::block_4 |         

--- expect:symbol-deps ---


===============================================================================
function-parameter-names-that-match-built-in-type-names
===============================================================================


--- file: src/main.rs ---
fn foo(str: *const c_char) {}
fn bar(bool: bool) {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Function  | foo     | main::main::foo          |         
u0:21 | Variable  | str     | main::main::foo::str     |         
u0:22 | Namespace | block_0 | main::main::foo::block_0 |         
u0:23 | Function  | bar     | main::main::bar          |         
u0:24 | Variable  | bool    | main::main::bar::bool    |         
u0:25 | Namespace | block_1 | main::main::bar::block_1 |         

--- expect:symbol-deps ---
u0:23 -> [u0:24]
u0:24 <- [u0:23]


===============================================================================
where-clauses
===============================================================================


--- file: src/main.rs ---
fn walk<F>(&self, it: &mut F) -> bool
    where F: FnMut(&Pat) -> bool
{
  return false
}

impl<'a, T: 'a + Item> Iterator for Iter<'a, T> where Self: 'a {
}

impl<T> A for B<T>
    where C<T>: D,
          T: 'c,
          'c: 'b,
{
}

impl<'a, E> Read
where &'a E: Read,
{
}

impl<T> A for B<T> where (T, T, T): C, {}

impl<T> A for B<T>
    where for<'a> D<T>: E<'a>,
{
}

pub trait A<B> where B: C,
{
}

struct Foo;

fn foo<A>() where A: Foo + As<f64>, f64: As<A> {}

impl<A> Default for B<A> where *mut A: C + D {}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                       | [global]
u0:2  | Type      | i64     | i64                       | [global]
u0:3  | Type      | i16     | i16                       | [global]
u0:4  | Type      | i8      | i8                        | [global]
u0:5  | Type      | i128    | i128                      | [global]
u0:6  | Type      | isize   | isize                     | [global]
u0:7  | Type      | u32     | u32                       | [global]
u0:8  | Type      | u64     | u64                       | [global]
u0:9  | Type      | u16     | u16                       | [global]
u0:10 | Type      | u8      | u8                        | [global]
u0:11 | Type      | u128    | u128                      | [global]
u0:12 | Type      | usize   | usize                     | [global]
u0:13 | Type      | f32     | f32                       | [global]
u0:14 | Type      | f64     | f64                       | [global]
u0:15 | Type      | bool    | bool                      | [global]
u0:16 | Type      | char    | char                      | [global]
u0:17 | Type      | str     | str                       | [global]
u0:18 | Module    | main    | main                      | [global]
u0:19 | File      | main    | main::main                |         
u0:20 | Function  | walk    | main::main::walk          |         
u0:21 | Type      | F       | main::main::walk::F       |         
u0:22 | Variable  | it      | main::main::walk::it      |         
u0:23 | Namespace | block_0 | main::main::walk::block_0 |         
u0:24 | Impl      | Iter    | main::main::Iter          |         
u0:25 | Type      | T       | main::main::Iter::T       |         
u0:26 | Impl      | B       | main::main::B             |         
u0:27 | Type      | T       | main::main::B::T          |         
u0:28 | Impl      | Read    | main::main::Read          |         
u0:29 | Type      | E       | main::main::Read::E       |         
u0:30 | Type      | T       | main::main::B::T          |         
u0:31 | Type      | T       | main::main::B::T          |         
u0:32 | Trait     | A       | main::main::A             |         
u0:33 | Type      | B       | main::main::A::B          |         
u0:34 | Struct    | Foo     | main::main::Foo           |         
u0:35 | Function  | foo     | main::main::foo           |         
u0:36 | Type      | A       | main::main::foo::A        |         
u0:37 | Namespace | block_1 | main::main::foo::block_1  |         
u0:38 | Type      | A       | main::main::B::A          |         

--- expect:symbol-deps ---
u0:15 <- [u0:20]
u0:20 -> [u0:15, u0:21]
u0:21 <- [u0:20, u0:22]
u0:22 -> [u0:21]
u0:26 -> [u0:32]
u0:32 <- [u0:26]


===============================================================================
external-modules
===============================================================================


--- file: src/main.rs ---
extern {
  pub fn napi_module_register(mod_: *mut napi_module);
}

extern "C" {}

unsafe extern "C" {}

--- expect:symbols ---
u0:1  | Type      | i32                  | i32                              | [global]
u0:2  | Type      | i64                  | i64                              | [global]
u0:3  | Type      | i16                  | i16                              | [global]
u0:4  | Type      | i8                   | i8                               | [global]
u0:5  | Type      | i128                 | i128                             | [global]
u0:6  | Type      | isize                | isize                            | [global]
u0:7  | Type      | u32                  | u32                              | [global]
u0:8  | Type      | u64                  | u64                              | [global]
u0:9  | Type      | u16                  | u16                              | [global]
u0:10 | Type      | u8                   | u8                               | [global]
u0:11 | Type      | u128                 | u128                             | [global]
u0:12 | Type      | usize                | usize                            | [global]
u0:13 | Type      | f32                  | f32                              | [global]
u0:14 | Type      | f64                  | f64                              | [global]
u0:15 | Type      | bool                 | bool                             | [global]
u0:16 | Type      | char                 | char                             | [global]
u0:17 | Type      | str                  | str                              | [global]
u0:18 | Module    | main                 | main                             | [global]
u0:19 | File      | main                 | main::main                       |         
u0:20 | Function  | napi_module_register | main::main::napi_module_register |         
u0:21 | Variable  | mod_                 | main::main::mod_                 |         
u0:22 | Namespace | block_0              | main::main::block_0              |         

--- expect:symbol-deps ---


===============================================================================
crate-visibility
===============================================================================


--- file: src/main.rs ---
crate mod foo;
crate struct Foo(crate crate::Bar);
crate fn foo() { }
crate const X: u32 = 0;

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Struct    | Foo     | main::main::Foo          |         
u0:21 | Function  | foo     | main::main::foo          |         
u0:22 | Namespace | block_0 | main::main::foo::block_0 |         
u0:23 | Const     | X       | main::main::X            |         

--- expect:symbol-deps ---
u0:23 -> [u0:7]
u0:7 <- [u0:23]


===============================================================================
reserved-keywords-in-path
===============================================================================


--- file: src/main.rs ---
struct B;
struct C;

struct A {
  a: default::B,
  b: union::C,
}

--- expect:symbols ---
u0:1  | Type   | i32   | i32              | [global]
u0:2  | Type   | i64   | i64              | [global]
u0:3  | Type   | i16   | i16              | [global]
u0:4  | Type   | i8    | i8               | [global]
u0:5  | Type   | i128  | i128             | [global]
u0:6  | Type   | isize | isize            | [global]
u0:7  | Type   | u32   | u32              | [global]
u0:8  | Type   | u64   | u64              | [global]
u0:9  | Type   | u16   | u16              | [global]
u0:10 | Type   | u8    | u8               | [global]
u0:11 | Type   | u128  | u128             | [global]
u0:12 | Type   | usize | usize            | [global]
u0:13 | Type   | f32   | f32              | [global]
u0:14 | Type   | f64   | f64              | [global]
u0:15 | Type   | bool  | bool             | [global]
u0:16 | Type   | char  | char             | [global]
u0:17 | Type   | str   | str              | [global]
u0:18 | Module | main  | main             | [global]
u0:19 | File   | main  | main::main       |         
u0:20 | Struct | B     | main::main::B    |         
u0:21 | Struct | C     | main::main::C    |         
u0:22 | Struct | A     | main::main::A    |         
u0:23 | Field  | a     | main::main::A::a |         
u0:24 | Field  | b     | main::main::A::b |         

--- expect:symbol-deps ---
u0:20 <- [u0:22, u0:23]
u0:21 <- [u0:22, u0:24]
u0:22 -> [u0:20, u0:21]
u0:23 -> [u0:20]
u0:24 -> [u0:21]


===============================================================================
array-constraint-in-where-clause
===============================================================================


--- file: src/main.rs ---
struct D;

fn foo<D>(val: D)
where
    [u8; 32]: From<D>,

{}

--- expect:symbols ---
u0:1  | Type      | i32     | i32                      | [global]
u0:2  | Type      | i64     | i64                      | [global]
u0:3  | Type      | i16     | i16                      | [global]
u0:4  | Type      | i8      | i8                       | [global]
u0:5  | Type      | i128    | i128                     | [global]
u0:6  | Type      | isize   | isize                    | [global]
u0:7  | Type      | u32     | u32                      | [global]
u0:8  | Type      | u64     | u64                      | [global]
u0:9  | Type      | u16     | u16                      | [global]
u0:10 | Type      | u8      | u8                       | [global]
u0:11 | Type      | u128    | u128                     | [global]
u0:12 | Type      | usize   | usize                    | [global]
u0:13 | Type      | f32     | f32                      | [global]
u0:14 | Type      | f64     | f64                      | [global]
u0:15 | Type      | bool    | bool                     | [global]
u0:16 | Type      | char    | char                     | [global]
u0:17 | Type      | str     | str                      | [global]
u0:18 | Module    | main    | main                     | [global]
u0:19 | File      | main    | main::main               |         
u0:20 | Struct    | D       | main::main::D            |         
u0:21 | Function  | foo     | main::main::foo          |         
u0:22 | Type      | D       | main::main::foo::D       |         
u0:23 | Variable  | val     | main::main::foo::val     |         
u0:24 | Namespace | block_0 | main::main::foo::block_0 |         

--- expect:symbol-deps ---
u0:21 -> [u0:22]
u0:22 <- [u0:21, u0:23]
u0:23 -> [u0:22]


===============================================================================
const-generics-with-default
===============================================================================


--- file: src/main.rs ---
pub struct Loaf<T: Sized, const N: usize = 1>([T; N]);

--- expect:symbols ---
u0:1  | Type   | i32   | i32                 | [global]
u0:2  | Type   | i64   | i64                 | [global]
u0:3  | Type   | i16   | i16                 | [global]
u0:4  | Type   | i8    | i8                  | [global]
u0:5  | Type   | i128  | i128                | [global]
u0:6  | Type   | isize | isize               | [global]
u0:7  | Type   | u32   | u32                 | [global]
u0:8  | Type   | u64   | u64                 | [global]
u0:9  | Type   | u16   | u16                 | [global]
u0:10 | Type   | u8    | u8                  | [global]
u0:11 | Type   | u128  | u128                | [global]
u0:12 | Type   | usize | usize               | [global]
u0:13 | Type   | f32   | f32                 | [global]
u0:14 | Type   | f64   | f64                 | [global]
u0:15 | Type   | bool  | bool                | [global]
u0:16 | Type   | char  | char                | [global]
u0:17 | Type   | str   | str                 | [global]
u0:18 | Module | main  | main                | [global]
u0:19 | File   | main  | main::main          |         
u0:20 | Struct | Loaf  | main::main::Loaf    |         
u0:21 | Type   | T     | main::main::Loaf::T |         

--- expect:symbol-deps ---
