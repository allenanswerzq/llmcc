===============================================================================
modules-basic
===============================================================================


--- file: src/main.rs ---
mod english;

mod english {}

mod english {
    mod greetings {}
    mod farewells {}
}

pub mod english;

--- expect:symbols ---
u0:1  | Primitive | i32       | i32                          | [global]
u0:2  | Primitive | i64       | i64                          | [global]
u0:3  | Primitive | i16       | i16                          | [global]
u0:4  | Primitive | i8        | i8                           | [global]
u0:5  | Primitive | i128      | i128                         | [global]
u0:6  | Primitive | isize     | isize                        | [global]
u0:7  | Primitive | u32       | u32                          | [global]
u0:8  | Primitive | u64       | u64                          | [global]
u0:9  | Primitive | u16       | u16                          | [global]
u0:10 | Primitive | u8        | u8                           | [global]
u0:11 | Primitive | u128      | u128                         | [global]
u0:12 | Primitive | usize     | usize                        | [global]
u0:13 | Primitive | f32       | f32                          | [global]
u0:14 | Primitive | f64       | f64                          | [global]
u0:15 | Primitive | bool      | bool                         | [global]
u0:16 | Primitive | char      | char                         | [global]
u0:17 | Primitive | str       | str                          | [global]
u0:18 | Primitive | String    | String                       | [global]
u0:19 | Crate     | _c        | _c                           | [global]
u0:20 | Crate     | crate     | _c::crate                    |
u0:21 | File      | main      | _c::main                     |
u0:22 | Namespace | english   | _c::main::english            |
u0:23 | Namespace | greetings | _c::main::english::greetings |
u0:24 | Namespace | farewells | _c::main::english::farewells |

--- expect:symbol-deps ---
u0:22 -> [u0:23, u0:24]
u0:23 <- [u0:22]
u0:24 <- [u0:22]


===============================================================================
extern-crate-declarations
===============================================================================


--- file: src/main.rs ---
extern crate std;
extern crate std as ruststd;
pub extern crate futures;

--- expect:symbols ---
u0:1  | Primitive | i32    | i32       | [global]
u0:2  | Primitive | i64    | i64       | [global]
u0:3  | Primitive | i16    | i16       | [global]
u0:4  | Primitive | i8     | i8        | [global]
u0:5  | Primitive | i128   | i128      | [global]
u0:6  | Primitive | isize  | isize     | [global]
u0:7  | Primitive | u32    | u32       | [global]
u0:8  | Primitive | u64    | u64       | [global]
u0:9  | Primitive | u16    | u16       | [global]
u0:10 | Primitive | u8     | u8        | [global]
u0:11 | Primitive | u128   | u128      | [global]
u0:12 | Primitive | usize  | usize     | [global]
u0:13 | Primitive | f32    | f32       | [global]
u0:14 | Primitive | f64    | f64       | [global]
u0:15 | Primitive | bool   | bool      | [global]
u0:16 | Primitive | char   | char      | [global]
u0:17 | Primitive | str    | str       | [global]
u0:18 | Primitive | String | String    | [global]
u0:19 | Crate     | _c     | _c        | [global]
u0:20 | Crate     | crate  | _c::crate |
u0:21 | File      | main   | _c::main  |

--- expect:symbol-deps ---


===============================================================================
function-declarations-one
===============================================================================


--- file: src/main.rs ---
fn main() {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Function  | main   | _c::main::main |

--- expect:symbol-deps ---


===============================================================================
function-declarations-two
===============================================================================


--- file: src/main.rs ---

fn add(x: i32, y: i32) -> i32 {
    return x + y;
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Function  | add    | _c::main::add    |
u0:23 | Variable  | x      | _c::main::add::x |
u0:24 | Variable  | y      | _c::main::add::y |

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23, u0:24]
u0:22 -> [u0:1]
u0:23 -> [u0:1]
u0:24 -> [u0:1]


===============================================================================
function-declarations-three
===============================================================================


--- file: src/main.rs ---
fn println(message: &str) {
}

fn takes_slice(slice: &str) {
    println!("Got: {}", slice);
}

--- expect:symbols ---
u0:1  | Primitive | i32         | i32                          | [global]
u0:2  | Primitive | i64         | i64                          | [global]
u0:3  | Primitive | i16         | i16                          | [global]
u0:4  | Primitive | i8          | i8                           | [global]
u0:5  | Primitive | i128        | i128                         | [global]
u0:6  | Primitive | isize       | isize                        | [global]
u0:7  | Primitive | u32         | u32                          | [global]
u0:8  | Primitive | u64         | u64                          | [global]
u0:9  | Primitive | u16         | u16                          | [global]
u0:10 | Primitive | u8          | u8                           | [global]
u0:11 | Primitive | u128        | u128                         | [global]
u0:12 | Primitive | usize       | usize                        | [global]
u0:13 | Primitive | f32         | f32                          | [global]
u0:14 | Primitive | f64         | f64                          | [global]
u0:15 | Primitive | bool        | bool                         | [global]
u0:16 | Primitive | char        | char                         | [global]
u0:17 | Primitive | str         | str                          | [global]
u0:18 | Primitive | String      | String                       | [global]
u0:19 | Crate     | _c          | _c                           | [global]
u0:20 | Crate     | crate       | _c::crate                    |
u0:21 | File      | main        | _c::main                     |
u0:22 | Function  | println     | _c::main::println            |
u0:23 | Variable  | message     | _c::main::println::message   |
u0:24 | Function  | takes_slice | _c::main::takes_slice        |
u0:25 | Variable  | slice       | _c::main::takes_slice::slice |

--- expect:symbol-deps ---
u0:17 <- [u0:22, u0:23, u0:24, u0:25]
u0:22 -> [u0:17]
u0:22 <- [u0:24]
u0:23 -> [u0:17]
u0:24 -> [u0:17, u0:22]
u0:25 -> [u0:17]


===============================================================================
function-declarations-four
===============================================================================


--- file: src/main.rs ---
fn foo_1() -> [u32; 2] {
    return [1, 2];
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32             | [global]
u0:2  | Primitive | i64    | i64             | [global]
u0:3  | Primitive | i16    | i16             | [global]
u0:4  | Primitive | i8     | i8              | [global]
u0:5  | Primitive | i128   | i128            | [global]
u0:6  | Primitive | isize  | isize           | [global]
u0:7  | Primitive | u32    | u32             | [global]
u0:8  | Primitive | u64    | u64             | [global]
u0:9  | Primitive | u16    | u16             | [global]
u0:10 | Primitive | u8     | u8              | [global]
u0:11 | Primitive | u128   | u128            | [global]
u0:12 | Primitive | usize  | usize           | [global]
u0:13 | Primitive | f32    | f32             | [global]
u0:14 | Primitive | f64    | f64             | [global]
u0:15 | Primitive | bool   | bool            | [global]
u0:16 | Primitive | char   | char            | [global]
u0:17 | Primitive | str    | str             | [global]
u0:18 | Primitive | String | String          | [global]
u0:19 | Crate     | _c     | _c              | [global]
u0:20 | Crate     | crate  | _c::crate       |
u0:21 | File      | main   | _c::main        |
u0:22 | Function  | foo_1  | _c::main::foo_1 |

--- expect:symbol-deps ---
u0:22 -> [u0:7]
u0:7 <- [u0:22]


===============================================================================
function-declarations-five
===============================================================================


--- file: src/main.rs ---
struct Foo;

fn foo_2() -> (u32, Foo) {
    return (1, Foo);
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32             | [global]
u0:2  | Primitive | i64    | i64             | [global]
u0:3  | Primitive | i16    | i16             | [global]
u0:4  | Primitive | i8     | i8              | [global]
u0:5  | Primitive | i128   | i128            | [global]
u0:6  | Primitive | isize  | isize           | [global]
u0:7  | Primitive | u32    | u32             | [global]
u0:8  | Primitive | u64    | u64             | [global]
u0:9  | Primitive | u16    | u16             | [global]
u0:10 | Primitive | u8     | u8              | [global]
u0:11 | Primitive | u128   | u128            | [global]
u0:12 | Primitive | usize  | usize           | [global]
u0:13 | Primitive | f32    | f32             | [global]
u0:14 | Primitive | f64    | f64             | [global]
u0:15 | Primitive | bool   | bool            | [global]
u0:16 | Primitive | char   | char            | [global]
u0:17 | Primitive | str    | str             | [global]
u0:18 | Primitive | String | String          | [global]
u0:19 | Crate     | _c     | _c              | [global]
u0:20 | Crate     | crate  | _c::crate       |
u0:21 | File      | main   | _c::main        |
u0:22 | Struct    | Foo    | _c::main::Foo   |
u0:23 | Function  | foo_2  | _c::main::foo_2 |

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22, u0:7]
u0:7 <- [u0:23]


===============================================================================
function-declarations-six
===============================================================================


--- file: src/main.rs ---
fn foo_3() -> u32 {
    return
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32             | [global]
u0:2  | Primitive | i64    | i64             | [global]
u0:3  | Primitive | i16    | i16             | [global]
u0:4  | Primitive | i8     | i8              | [global]
u0:5  | Primitive | i128   | i128            | [global]
u0:6  | Primitive | isize  | isize           | [global]
u0:7  | Primitive | u32    | u32             | [global]
u0:8  | Primitive | u64    | u64             | [global]
u0:9  | Primitive | u16    | u16             | [global]
u0:10 | Primitive | u8     | u8              | [global]
u0:11 | Primitive | u128   | u128            | [global]
u0:12 | Primitive | usize  | usize           | [global]
u0:13 | Primitive | f32    | f32             | [global]
u0:14 | Primitive | f64    | f64             | [global]
u0:15 | Primitive | bool   | bool            | [global]
u0:16 | Primitive | char   | char            | [global]
u0:17 | Primitive | str    | str             | [global]
u0:18 | Primitive | String | String          | [global]
u0:19 | Crate     | _c     | _c              | [global]
u0:20 | Crate     | crate  | _c::crate       |
u0:21 | File      | main   | _c::main        |
u0:22 | Function  | foo_3  | _c::main::foo_3 |

--- expect:symbol-deps ---
u0:22 -> [u0:7]
u0:7 <- [u0:22]


===============================================================================
function-declarations-seven
===============================================================================


--- file: src/main.rs ---
trait FnOnce {}
fn foo_4(x: impl FnOnce() -> result::Result<T, E>) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                | [global]
u0:2  | Primitive | i64    | i64                | [global]
u0:3  | Primitive | i16    | i16                | [global]
u0:4  | Primitive | i8     | i8                 | [global]
u0:5  | Primitive | i128   | i128               | [global]
u0:6  | Primitive | isize  | isize              | [global]
u0:7  | Primitive | u32    | u32                | [global]
u0:8  | Primitive | u64    | u64                | [global]
u0:9  | Primitive | u16    | u16                | [global]
u0:10 | Primitive | u8     | u8                 | [global]
u0:11 | Primitive | u128   | u128               | [global]
u0:12 | Primitive | usize  | usize              | [global]
u0:13 | Primitive | f32    | f32                | [global]
u0:14 | Primitive | f64    | f64                | [global]
u0:15 | Primitive | bool   | bool               | [global]
u0:16 | Primitive | char   | char               | [global]
u0:17 | Primitive | str    | str                | [global]
u0:18 | Primitive | String | String             | [global]
u0:19 | Crate     | _c     | _c                 | [global]
u0:20 | Crate     | crate  | _c::crate          |
u0:21 | File      | main   | _c::main           |
u0:22 | Trait     | FnOnce | _c::main::FnOnce   |
u0:23 | Function  | foo_4  | _c::main::foo_4    |
u0:24 | Variable  | x      | _c::main::foo_4::x |

--- expect:symbol-deps ---
u0:22 <- [u0:23, u0:24]
u0:23 -> [u0:22]
u0:24 -> [u0:22]


===============================================================================
function-declarations-eight
===============================================================================


--- file: src/main.rs ---
fn foo_5(#[attr] x: i32, #[attr] y: i64) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                | [global]
u0:2  | Primitive | i64    | i64                | [global]
u0:3  | Primitive | i16    | i16                | [global]
u0:4  | Primitive | i8     | i8                 | [global]
u0:5  | Primitive | i128   | i128               | [global]
u0:6  | Primitive | isize  | isize              | [global]
u0:7  | Primitive | u32    | u32                | [global]
u0:8  | Primitive | u64    | u64                | [global]
u0:9  | Primitive | u16    | u16                | [global]
u0:10 | Primitive | u8     | u8                 | [global]
u0:11 | Primitive | u128   | u128               | [global]
u0:12 | Primitive | usize  | usize              | [global]
u0:13 | Primitive | f32    | f32                | [global]
u0:14 | Primitive | f64    | f64                | [global]
u0:15 | Primitive | bool   | bool               | [global]
u0:16 | Primitive | char   | char               | [global]
u0:17 | Primitive | str    | str                | [global]
u0:18 | Primitive | String | String             | [global]
u0:19 | Crate     | _c     | _c                 | [global]
u0:20 | Crate     | crate  | _c::crate          |
u0:21 | File      | main   | _c::main           |
u0:22 | Function  | foo_5  | _c::main::foo_5    |
u0:23 | Variable  | x      | _c::main::foo_5::x |
u0:24 | Variable  | y      | _c::main::foo_5::y |

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23]
u0:2 <- [u0:22, u0:24]
u0:22 -> [u0:1, u0:2]
u0:23 -> [u0:1]
u0:24 -> [u0:2]


===============================================================================
function-declarations-nine
===============================================================================


--- file: src/main.rs ---
struct Machine;
fn accumulate(self) -> Machine<{State::Accumulate}> {}

--- expect:symbols ---
u0:1  | Primitive | i32        | i32                  | [global]
u0:2  | Primitive | i64        | i64                  | [global]
u0:3  | Primitive | i16        | i16                  | [global]
u0:4  | Primitive | i8         | i8                   | [global]
u0:5  | Primitive | i128       | i128                 | [global]
u0:6  | Primitive | isize      | isize                | [global]
u0:7  | Primitive | u32        | u32                  | [global]
u0:8  | Primitive | u64        | u64                  | [global]
u0:9  | Primitive | u16        | u16                  | [global]
u0:10 | Primitive | u8         | u8                   | [global]
u0:11 | Primitive | u128       | u128                 | [global]
u0:12 | Primitive | usize      | usize                | [global]
u0:13 | Primitive | f32        | f32                  | [global]
u0:14 | Primitive | f64        | f64                  | [global]
u0:15 | Primitive | bool       | bool                 | [global]
u0:16 | Primitive | char       | char                 | [global]
u0:17 | Primitive | str        | str                  | [global]
u0:18 | Primitive | String     | String               | [global]
u0:19 | Crate     | _c         | _c                   | [global]
u0:20 | Crate     | crate      | _c::crate            |
u0:21 | File      | main       | _c::main             |
u0:22 | Struct    | Machine    | _c::main::Machine    |
u0:23 | Function  | accumulate | _c::main::accumulate |

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22]


===============================================================================
function-declarations-ten
===============================================================================


--- file: src/main.rs ---
struct Quux<'a> {
    data: &'a str,
}
trait Baz<T> {}
fn foo_6(bar: impl for<'a> Baz<Quux<'a>>) {}

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32                  | [global]
u0:2  | Primitive     | i64    | i64                  | [global]
u0:3  | Primitive     | i16    | i16                  | [global]
u0:4  | Primitive     | i8     | i8                   | [global]
u0:5  | Primitive     | i128   | i128                 | [global]
u0:6  | Primitive     | isize  | isize                | [global]
u0:7  | Primitive     | u32    | u32                  | [global]
u0:8  | Primitive     | u64    | u64                  | [global]
u0:9  | Primitive     | u16    | u16                  | [global]
u0:10 | Primitive     | u8     | u8                   | [global]
u0:11 | Primitive     | u128   | u128                 | [global]
u0:12 | Primitive     | usize  | usize                | [global]
u0:13 | Primitive     | f32    | f32                  | [global]
u0:14 | Primitive     | f64    | f64                  | [global]
u0:15 | Primitive     | bool   | bool                 | [global]
u0:16 | Primitive     | char   | char                 | [global]
u0:17 | Primitive     | str    | str                  | [global]
u0:18 | Primitive     | String | String               | [global]
u0:19 | Crate         | _c     | _c                   | [global]
u0:20 | Crate         | crate  | _c::crate            |
u0:21 | File          | main   | _c::main             |
u0:22 | Struct        | Quux   | _c::main::Quux       |
u0:23 | Field         | data   | _c::main::Quux::data |
u0:24 | Trait         | Baz    | _c::main::Baz        |
u0:25 | TypeParameter | T      | _c::main::Baz::T     |
u0:26 | Function      | foo_6  | _c::main::foo_6      |
u0:27 | Variable      | bar    | _c::main::foo_6::bar |

--- expect:symbol-deps ---
u0:17 <- [u0:22]
u0:22 -> [u0:17]
u0:22 <- [u0:26, u0:27]
u0:24 <- [u0:26, u0:27]
u0:26 -> [u0:22, u0:24]
u0:27 -> [u0:22, u0:24]


===============================================================================
const-function-declarations
===============================================================================


--- file: src/main.rs ---
const fn main() {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Function  | main   | _c::main::main |

--- expect:symbol-deps ---


===============================================================================
functions-with-abstract-return-types
===============================================================================


--- file: src/main.rs ---
trait B {}

struct Foo;
struct Iterator;

fn triples(a: impl B) -> impl Iterator<Item=(Foo)> {
}

--- expect:symbols ---
u0:1  | Primitive | i32      | i32                  | [global]
u0:2  | Primitive | i64      | i64                  | [global]
u0:3  | Primitive | i16      | i16                  | [global]
u0:4  | Primitive | i8       | i8                   | [global]
u0:5  | Primitive | i128     | i128                 | [global]
u0:6  | Primitive | isize    | isize                | [global]
u0:7  | Primitive | u32      | u32                  | [global]
u0:8  | Primitive | u64      | u64                  | [global]
u0:9  | Primitive | u16      | u16                  | [global]
u0:10 | Primitive | u8       | u8                   | [global]
u0:11 | Primitive | u128     | u128                 | [global]
u0:12 | Primitive | usize    | usize                | [global]
u0:13 | Primitive | f32      | f32                  | [global]
u0:14 | Primitive | f64      | f64                  | [global]
u0:15 | Primitive | bool     | bool                 | [global]
u0:16 | Primitive | char     | char                 | [global]
u0:17 | Primitive | str      | str                  | [global]
u0:18 | Primitive | String   | String               | [global]
u0:19 | Crate     | _c       | _c                   | [global]
u0:20 | Crate     | crate    | _c::crate            |
u0:21 | File      | main     | _c::main             |
u0:22 | Trait     | B        | _c::main::B          |
u0:23 | Struct    | Foo      | _c::main::Foo        |
u0:24 | Struct    | Iterator | _c::main::Iterator   |
u0:25 | Function  | triples  | _c::main::triples    |
u0:26 | Variable  | a        | _c::main::triples::a |

--- expect:symbol-deps ---
u0:22 <- [u0:25, u0:26]
u0:23 <- [u0:25]
u0:24 <- [u0:25]
u0:25 -> [u0:22, u0:23, u0:24]
u0:26 -> [u0:22]


===============================================================================
impl-with-different-names
===============================================================================


--- file: src/main.rs ---
impl foo::Bar {  }
impl ::std::fmt::Display for Foo {  }
impl Self::Nested {  }

--- expect:symbols ---
u0:1  | Primitive      | i32     | i32               | [global]
u0:2  | Primitive      | i64     | i64               | [global]
u0:3  | Primitive      | i16     | i16               | [global]
u0:4  | Primitive      | i8      | i8                | [global]
u0:5  | Primitive      | i128    | i128              | [global]
u0:6  | Primitive      | isize   | isize             | [global]
u0:7  | Primitive      | u32     | u32               | [global]
u0:8  | Primitive      | u64     | u64               | [global]
u0:9  | Primitive      | u16     | u16               | [global]
u0:10 | Primitive      | u8      | u8                | [global]
u0:11 | Primitive      | u128    | u128              | [global]
u0:12 | Primitive      | usize   | usize             | [global]
u0:13 | Primitive      | f32     | f32               | [global]
u0:14 | Primitive      | f64     | f64               | [global]
u0:15 | Primitive      | bool    | bool              | [global]
u0:16 | Primitive      | char    | char              | [global]
u0:17 | Primitive      | str     | str               | [global]
u0:18 | Primitive      | String  | String            | [global]
u0:19 | Crate          | _c      | _c                | [global]
u0:20 | Crate          | crate   | _c::crate         |
u0:21 | File           | main    | _c::main          |
u0:22 | UnresolvedType | Bar     | _c::main::Bar     |
u0:23 | UnresolvedType | Display | _c::main::Display |
u0:24 | UnresolvedType | Foo     | _c::main::Foo     |
u0:25 | UnresolvedType | Nested  | _c::main::Nested  |

--- expect:symbol-deps ---


===============================================================================
impl-with-lifetimes-first
===============================================================================


--- file: src/main.rs ---
fn foo<'a>(x: impl 'a + Clone) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Function  | foo    | _c::main::foo    |
u0:23 | Variable  | x      | _c::main::foo::x |

--- expect:symbol-deps ---


===============================================================================
functions-with-precise-capture-syntax
===============================================================================


--- file: src/main.rs ---
fn capture<T>(&self) -> impl Iterator<Item = usize> + use<'_, T> {
}

--- expect:symbols ---
u0:1  | Primitive     | i32     | i32                  | [global]
u0:2  | Primitive     | i64     | i64                  | [global]
u0:3  | Primitive     | i16     | i16                  | [global]
u0:4  | Primitive     | i8      | i8                   | [global]
u0:5  | Primitive     | i128    | i128                 | [global]
u0:6  | Primitive     | isize   | isize                | [global]
u0:7  | Primitive     | u32     | u32                  | [global]
u0:8  | Primitive     | u64     | u64                  | [global]
u0:9  | Primitive     | u16     | u16                  | [global]
u0:10 | Primitive     | u8      | u8                   | [global]
u0:11 | Primitive     | u128    | u128                 | [global]
u0:12 | Primitive     | usize   | usize                | [global]
u0:13 | Primitive     | f32     | f32                  | [global]
u0:14 | Primitive     | f64     | f64                  | [global]
u0:15 | Primitive     | bool    | bool                 | [global]
u0:16 | Primitive     | char    | char                 | [global]
u0:17 | Primitive     | str     | str                  | [global]
u0:18 | Primitive     | String  | String               | [global]
u0:19 | Crate         | _c      | _c                   | [global]
u0:20 | Crate         | crate   | _c::crate            |
u0:21 | File          | main    | _c::main             |
u0:22 | Function      | capture | _c::main::capture    |
u0:23 | TypeParameter | T       | _c::main::capture::T |

--- expect:symbol-deps ---
u0:12 <- [u0:22]
u0:22 -> [u0:12]


===============================================================================
functions-with-empty-precise-capture-syntax
===============================================================================


--- file: src/main.rs ---
trait Iterator {
    type Item;
}

fn capture(&self) -> impl Iterator<Item = usize> + use<> {
}

--- expect:symbols ---
u0:1  | Primitive | i32      | i32                      | [global]
u0:2  | Primitive | i64      | i64                      | [global]
u0:3  | Primitive | i16      | i16                      | [global]
u0:4  | Primitive | i8       | i8                       | [global]
u0:5  | Primitive | i128     | i128                     | [global]
u0:6  | Primitive | isize    | isize                    | [global]
u0:7  | Primitive | u32      | u32                      | [global]
u0:8  | Primitive | u64      | u64                      | [global]
u0:9  | Primitive | u16      | u16                      | [global]
u0:10 | Primitive | u8       | u8                       | [global]
u0:11 | Primitive | u128     | u128                     | [global]
u0:12 | Primitive | usize    | usize                    | [global]
u0:13 | Primitive | f32      | f32                      | [global]
u0:14 | Primitive | f64      | f64                      | [global]
u0:15 | Primitive | bool     | bool                     | [global]
u0:16 | Primitive | char     | char                     | [global]
u0:17 | Primitive | str      | str                      | [global]
u0:18 | Primitive | String   | String                   | [global]
u0:19 | Crate     | _c       | _c                       | [global]
u0:20 | Crate     | crate    | _c::crate                |
u0:21 | File      | main     | _c::main                 |
u0:22 | Trait     | Iterator | _c::main::Iterator       |
u0:23 | TypeAlias | Item     | _c::main::Iterator::Item |
u0:24 | Function  | capture  | _c::main::capture        |

--- expect:symbol-deps ---
u0:12 <- [u0:24]
u0:22 -> [u0:23]
u0:22 <- [u0:24]
u0:23 <- [u0:22]
u0:24 -> [u0:12, u0:22]


===============================================================================
diverging-functions
===============================================================================


--- file: src/main.rs ---
fn aborts() -> ! {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Function  | aborts | _c::main::aborts |

--- expect:symbol-deps ---


===============================================================================
extern-function-declarations
===============================================================================


--- file: src/main.rs ---
extern "C" fn foo() {}
extern "C" fn vprintf(*const c_char, ...,) {}

pub unsafe extern "C" fn c_variadic_no_use(fmt: *const i8, mut ap: ...) -> i32 {
    // CHECK: call void @llvm.va_start
    vprintf(fmt, ap.as_va_list())
    // CHECK: call void @llvm.va_end
}

--- expect:symbols ---
u0:1  | Primitive | i32               | i32                              | [global]
u0:2  | Primitive | i64               | i64                              | [global]
u0:3  | Primitive | i16               | i16                              | [global]
u0:4  | Primitive | i8                | i8                               | [global]
u0:5  | Primitive | i128              | i128                             | [global]
u0:6  | Primitive | isize             | isize                            | [global]
u0:7  | Primitive | u32               | u32                              | [global]
u0:8  | Primitive | u64               | u64                              | [global]
u0:9  | Primitive | u16               | u16                              | [global]
u0:10 | Primitive | u8                | u8                               | [global]
u0:11 | Primitive | u128              | u128                             | [global]
u0:12 | Primitive | usize             | usize                            | [global]
u0:13 | Primitive | f32               | f32                              | [global]
u0:14 | Primitive | f64               | f64                              | [global]
u0:15 | Primitive | bool              | bool                             | [global]
u0:16 | Primitive | char              | char                             | [global]
u0:17 | Primitive | str               | str                              | [global]
u0:18 | Primitive | String            | String                           | [global]
u0:19 | Crate     | _c                | _c                               | [global]
u0:20 | Crate     | crate             | _c::crate                        |
u0:21 | File      | main              | _c::main                         |
u0:22 | Function  | foo               | _c::main::foo                    |
u0:23 | Function  | vprintf           | _c::main::vprintf                |
u0:24 | Function  | c_variadic_no_use | _c::main::c_variadic_no_use      | [global]
u0:25 | Variable  | fmt               | _c::main::c_variadic_no_use::fmt |

--- expect:symbol-deps ---
u0:1 <- [u0:24]
u0:23 <- [u0:24]
u0:24 -> [u0:1, u0:23, u0:4]
u0:25 -> [u0:4]
u0:4 <- [u0:24, u0:25]


===============================================================================
use-declarations
===============================================================================


--- file: src/main.rs ---
use abc;
use phrases::japanese;
use sayings::english::greetings;
use sayings::english::greetings as en_greetings ;
use phrases::english::{greetings,farewells};
use sayings::japanese::farewells::*;
pub use self::greetings::hello;
use sayings::english::{self, greetings as en_greetings, farewells as en_farewells};
use three::{ dot::{one, four} };
use my::{ some::* };
use my::{*};
use ::*;

--- expect:symbols ---
u0:1  | Primitive | i32    | i32       | [global]
u0:2  | Primitive | i64    | i64       | [global]
u0:3  | Primitive | i16    | i16       | [global]
u0:4  | Primitive | i8     | i8        | [global]
u0:5  | Primitive | i128   | i128      | [global]
u0:6  | Primitive | isize  | isize     | [global]
u0:7  | Primitive | u32    | u32       | [global]
u0:8  | Primitive | u64    | u64       | [global]
u0:9  | Primitive | u16    | u16       | [global]
u0:10 | Primitive | u8     | u8        | [global]
u0:11 | Primitive | u128   | u128      | [global]
u0:12 | Primitive | usize  | usize     | [global]
u0:13 | Primitive | f32    | f32       | [global]
u0:14 | Primitive | f64    | f64       | [global]
u0:15 | Primitive | bool   | bool      | [global]
u0:16 | Primitive | char   | char      | [global]
u0:17 | Primitive | str    | str       | [global]
u0:18 | Primitive | String | String    | [global]
u0:19 | Crate     | _c     | _c        | [global]
u0:20 | Crate     | crate  | _c::crate |
u0:21 | File      | main   | _c::main  |

--- expect:symbol-deps ---


===============================================================================
variable-bindings
===============================================================================


--- file: src/main.rs ---
let x;
let x = 42;
let x: i32;
let x: i8 = 42;
let mut x = 5;
let y: bool = false;
let bool: bool = false;
let u32: str = "";

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Variable  | x      | _c::main::x    |
u0:23 | Variable  | y      | _c::main::y    |
u0:24 | Variable  | bool   | _c::main::bool |
u0:25 | Variable  | u32    | _c::main::u32  |

--- expect:symbol-deps ---
u0:1 <- [u0:22]
u0:15 <- [u0:23, u0:24]
u0:17 <- [u0:25]
u0:22 -> [u0:1, u0:4]
u0:23 -> [u0:15]
u0:24 -> [u0:15]
u0:25 -> [u0:17]
u0:4 <- [u0:22]


===============================================================================
function-variable-bindings
===============================================================================


--- file: src/main.rs ---
struct Baz;
struct Foo;

fn func() {
    let x: Foo = Foo::new();
    let mut y = Baz::new();
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32               | [global]
u0:2  | Primitive | i64    | i64               | [global]
u0:3  | Primitive | i16    | i16               | [global]
u0:4  | Primitive | i8     | i8                | [global]
u0:5  | Primitive | i128   | i128              | [global]
u0:6  | Primitive | isize  | isize             | [global]
u0:7  | Primitive | u32    | u32               | [global]
u0:8  | Primitive | u64    | u64               | [global]
u0:9  | Primitive | u16    | u16               | [global]
u0:10 | Primitive | u8     | u8                | [global]
u0:11 | Primitive | u128   | u128              | [global]
u0:12 | Primitive | usize  | usize             | [global]
u0:13 | Primitive | f32    | f32               | [global]
u0:14 | Primitive | f64    | f64               | [global]
u0:15 | Primitive | bool   | bool              | [global]
u0:16 | Primitive | char   | char              | [global]
u0:17 | Primitive | str    | str               | [global]
u0:18 | Primitive | String | String            | [global]
u0:19 | Crate     | _c     | _c                | [global]
u0:20 | Crate     | crate  | _c::crate         |
u0:21 | File      | main   | _c::main          |
u0:22 | Struct    | Baz    | _c::main::Baz     |
u0:23 | Struct    | Foo    | _c::main::Foo     |
u0:24 | Function  | func   | _c::main::func    |
u0:25 | Variable  | x      | _c::main::func::x |
u0:26 | Variable  | y      | _c::main::func::y |

--- expect:symbol-deps ---
u0:22 <- [u0:24]
u0:23 <- [u0:24, u0:25]
u0:24 -> [u0:22, u0:23]
u0:25 -> [u0:23]


===============================================================================
let-else-statements
===============================================================================


--- file: src/main.rs ---
struct Boo;

impl Boo {
    fn new() -> Self {
        Boo
    }
}

mod Foo {
    struct Bar {
        texts: u16,
        values: Boo,
    }
}
struct Baz;

fn func() {
    let y = Baz::new();
    let x = Foo::Bar{texts: 5, values: Boo::new()};
    let Foo::Bar{texts, values} = x;
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                        | [global]
u0:2  | Primitive | i64    | i64                        | [global]
u0:3  | Primitive | i16    | i16                        | [global]
u0:4  | Primitive | i8     | i8                         | [global]
u0:5  | Primitive | i128   | i128                       | [global]
u0:6  | Primitive | isize  | isize                      | [global]
u0:7  | Primitive | u32    | u32                        | [global]
u0:8  | Primitive | u64    | u64                        | [global]
u0:9  | Primitive | u16    | u16                        | [global]
u0:10 | Primitive | u8     | u8                         | [global]
u0:11 | Primitive | u128   | u128                       | [global]
u0:12 | Primitive | usize  | usize                      | [global]
u0:13 | Primitive | f32    | f32                        | [global]
u0:14 | Primitive | f64    | f64                        | [global]
u0:15 | Primitive | bool   | bool                       | [global]
u0:16 | Primitive | char   | char                       | [global]
u0:17 | Primitive | str    | str                        | [global]
u0:18 | Primitive | String | String                     | [global]
u0:19 | Crate     | _c     | _c                         | [global]
u0:20 | Crate     | crate  | _c::crate                  |
u0:21 | File      | main   | _c::main                   |
u0:22 | Struct    | Boo    | _c::main::Boo              |
u0:23 | Function  | new    | _c::main::Boo::new         |
u0:24 | Namespace | Foo    | _c::main::Foo              |
u0:25 | Struct    | Bar    | _c::main::Foo::Bar         |
u0:26 | Field     | texts  | _c::main::Foo::Bar::texts  |
u0:27 | Field     | values | _c::main::Foo::Bar::values |
u0:28 | Struct    | Baz    | _c::main::Baz              |
u0:29 | Function  | func   | _c::main::func             |
u0:30 | Variable  | y      | _c::main::func::y          |
u0:31 | Variable  | x      | _c::main::func::x          |
u0:32 | Variable  | texts  | _c::main::func::texts      |
u0:33 | Variable  | values | _c::main::func::values     |

--- expect:symbol-deps ---
u0:22 -> [u0:23]
u0:22 <- [u0:25, u0:27, u0:29, u0:33]
u0:23 <- [u0:22, u0:29]
u0:24 -> [u0:25]
u0:25 -> [u0:22, u0:9]
u0:25 <- [u0:24, u0:29, u0:31]
u0:26 -> [u0:9]
u0:27 -> [u0:22]
u0:28 <- [u0:29]
u0:29 -> [u0:22, u0:23, u0:25, u0:28]
u0:31 -> [u0:25]
u0:32 -> [u0:9]
u0:33 -> [u0:22]
u0:9 <- [u0:25, u0:26, u0:32]


===============================================================================
let-declarations-with-if-expressions-as-the-value
===============================================================================


--- file: src/main.rs ---
let a = if b {
    c
} else {
    d
};

--- expect:symbols ---
u0:1  | Primitive | i32    | i32         | [global]
u0:2  | Primitive | i64    | i64         | [global]
u0:3  | Primitive | i16    | i16         | [global]
u0:4  | Primitive | i8     | i8          | [global]
u0:5  | Primitive | i128   | i128        | [global]
u0:6  | Primitive | isize  | isize       | [global]
u0:7  | Primitive | u32    | u32         | [global]
u0:8  | Primitive | u64    | u64         | [global]
u0:9  | Primitive | u16    | u16         | [global]
u0:10 | Primitive | u8     | u8          | [global]
u0:11 | Primitive | u128   | u128        | [global]
u0:12 | Primitive | usize  | usize       | [global]
u0:13 | Primitive | f32    | f32         | [global]
u0:14 | Primitive | f64    | f64         | [global]
u0:15 | Primitive | bool   | bool        | [global]
u0:16 | Primitive | char   | char        | [global]
u0:17 | Primitive | str    | str         | [global]
u0:18 | Primitive | String | String      | [global]
u0:19 | Crate     | _c     | _c          | [global]
u0:20 | Crate     | crate  | _c::crate   |
u0:21 | File      | main   | _c::main    |
u0:22 | Variable  | a      | _c::main::a |

--- expect:symbol-deps ---


===============================================================================
let-declarations-with-contextual-keywords-as-names
===============================================================================


--- file: src/main.rs ---
let default = 1;
let union = 2;

--- expect:symbols ---
u0:1  | Primitive | i32     | i32               | [global]
u0:2  | Primitive | i64     | i64               | [global]
u0:3  | Primitive | i16     | i16               | [global]
u0:4  | Primitive | i8      | i8                | [global]
u0:5  | Primitive | i128    | i128              | [global]
u0:6  | Primitive | isize   | isize             | [global]
u0:7  | Primitive | u32     | u32               | [global]
u0:8  | Primitive | u64     | u64               | [global]
u0:9  | Primitive | u16     | u16               | [global]
u0:10 | Primitive | u8      | u8                | [global]
u0:11 | Primitive | u128    | u128              | [global]
u0:12 | Primitive | usize   | usize             | [global]
u0:13 | Primitive | f32     | f32               | [global]
u0:14 | Primitive | f64     | f64               | [global]
u0:15 | Primitive | bool    | bool              | [global]
u0:16 | Primitive | char    | char              | [global]
u0:17 | Primitive | str     | str               | [global]
u0:18 | Primitive | String  | String            | [global]
u0:19 | Crate     | _c      | _c                | [global]
u0:20 | Crate     | crate   | _c::crate         |
u0:21 | File      | main    | _c::main          |
u0:22 | Variable  | default | _c::main::default |
u0:23 | Variable  | union   | _c::main::union   |

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23]
u0:22 -> [u0:1]
u0:23 -> [u0:1]


===============================================================================
structs
===============================================================================


--- file: src/main.rs ---
struct Proton;
struct Electron {}
struct Person {pub name: String, pub age: u32}
struct Point {
  x: i32,

  #[attribute1]
  y: i32,
}
struct Color(pub i32, i32, i32);
struct Inches(i32);
struct Empty(pub ());

--- expect:symbols ---
u0:1  | Primitive | i32      | i32                    | [global]
u0:2  | Primitive | i64      | i64                    | [global]
u0:3  | Primitive | i16      | i16                    | [global]
u0:4  | Primitive | i8       | i8                     | [global]
u0:5  | Primitive | i128     | i128                   | [global]
u0:6  | Primitive | isize    | isize                  | [global]
u0:7  | Primitive | u32      | u32                    | [global]
u0:8  | Primitive | u64      | u64                    | [global]
u0:9  | Primitive | u16      | u16                    | [global]
u0:10 | Primitive | u8       | u8                     | [global]
u0:11 | Primitive | u128     | u128                   | [global]
u0:12 | Primitive | usize    | usize                  | [global]
u0:13 | Primitive | f32      | f32                    | [global]
u0:14 | Primitive | f64      | f64                    | [global]
u0:15 | Primitive | bool     | bool                   | [global]
u0:16 | Primitive | char     | char                   | [global]
u0:17 | Primitive | str      | str                    | [global]
u0:18 | Primitive | String   | String                 | [global]
u0:19 | Crate     | _c       | _c                     | [global]
u0:20 | Crate     | crate    | _c::crate              |
u0:21 | File      | main     | _c::main               |
u0:22 | Struct    | Proton   | _c::main::Proton       |
u0:23 | Struct    | Electron | _c::main::Electron     |
u0:24 | Struct    | Person   | _c::main::Person       |
u0:25 | Field     | name     | _c::main::Person::name |
u0:26 | Field     | age      | _c::main::Person::age  |
u0:27 | Struct    | Point    | _c::main::Point        |
u0:28 | Field     | x        | _c::main::Point::x     |
u0:29 | Field     | y        | _c::main::Point::y     |
u0:30 | Struct    | Color    | _c::main::Color        |
u0:31 | Struct    | Inches   | _c::main::Inches       |
u0:32 | Struct    | Empty    | _c::main::Empty        |

--- expect:symbol-deps ---
u0:1 <- [u0:27, u0:28, u0:29, u0:30, u0:31]
u0:18 <- [u0:24, u0:25]
u0:24 -> [u0:18, u0:7]
u0:25 -> [u0:18]
u0:26 -> [u0:7]
u0:27 -> [u0:1]
u0:28 -> [u0:1]
u0:29 -> [u0:1]
u0:30 -> [u0:1]
u0:31 -> [u0:1]
u0:7 <- [u0:24, u0:26]


===============================================================================
unions
===============================================================================


--- file: src/main.rs ---
pub union in6_addr__bindgen_ty_1 {
    pub __u6_addr8: [__uint8_t; 16usize],
    pub __u6_addr16: [__uint16_t; 8usize],
    pub __u6_addr32: [__uint32_t; 4usize],
    _bindgen_union_align: [u32; 4usize],
}

--- expect:symbols ---
u0:1  | Primitive | i32                  | i32                            | [global]
u0:2  | Primitive | i64                  | i64                            | [global]
u0:3  | Primitive | i16                  | i16                            | [global]
u0:4  | Primitive | i8                   | i8                             | [global]
u0:5  | Primitive | i128                 | i128                           | [global]
u0:6  | Primitive | isize                | isize                          | [global]
u0:7  | Primitive | u32                  | u32                            | [global]
u0:8  | Primitive | u64                  | u64                            | [global]
u0:9  | Primitive | u16                  | u16                            | [global]
u0:10 | Primitive | u8                   | u8                             | [global]
u0:11 | Primitive | u128                 | u128                           | [global]
u0:12 | Primitive | usize                | usize                          | [global]
u0:13 | Primitive | f32                  | f32                            | [global]
u0:14 | Primitive | f64                  | f64                            | [global]
u0:15 | Primitive | bool                 | bool                           | [global]
u0:16 | Primitive | char                 | char                           | [global]
u0:17 | Primitive | str                  | str                            | [global]
u0:18 | Primitive | String               | String                         | [global]
u0:19 | Crate     | _c                   | _c                             | [global]
u0:20 | Crate     | crate                | _c::crate                      |
u0:21 | File      | main                 | _c::main                       |
u0:22 | Field     | __u6_addr8           | _c::main::__u6_addr8           |
u0:23 | Field     | __u6_addr16          | _c::main::__u6_addr16          |
u0:24 | Field     | __u6_addr32          | _c::main::__u6_addr32          |
u0:25 | Field     | _bindgen_union_align | _c::main::_bindgen_union_align |

--- expect:symbol-deps ---


===============================================================================
generic-structs
===============================================================================


--- file: src/main.rs ---
struct A<B> {}
struct C<'a, 'b> {}
struct C<'a,> {}
struct D<const SIZE: usize> {}
struct E<#[attr] T> {}
trait F {}
trait G {}
struct H<T: F> {}
struct I<U> where U: F + G {}

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32               | [global]
u0:2  | Primitive     | i64    | i64               | [global]
u0:3  | Primitive     | i16    | i16               | [global]
u0:4  | Primitive     | i8     | i8                | [global]
u0:5  | Primitive     | i128   | i128              | [global]
u0:6  | Primitive     | isize  | isize             | [global]
u0:7  | Primitive     | u32    | u32               | [global]
u0:8  | Primitive     | u64    | u64               | [global]
u0:9  | Primitive     | u16    | u16               | [global]
u0:10 | Primitive     | u8     | u8                | [global]
u0:11 | Primitive     | u128   | u128              | [global]
u0:12 | Primitive     | usize  | usize             | [global]
u0:13 | Primitive     | f32    | f32               | [global]
u0:14 | Primitive     | f64    | f64               | [global]
u0:15 | Primitive     | bool   | bool              | [global]
u0:16 | Primitive     | char   | char              | [global]
u0:17 | Primitive     | str    | str               | [global]
u0:18 | Primitive     | String | String            | [global]
u0:19 | Crate         | _c     | _c                | [global]
u0:20 | Crate         | crate  | _c::crate         |
u0:21 | File          | main   | _c::main          |
u0:22 | Struct        | A      | _c::main::A       |
u0:23 | TypeParameter | B      | _c::main::A::B    |
u0:24 | Struct        | C      | _c::main::C       |
u0:25 | Struct        | D      | _c::main::D       |
u0:26 | Const         | SIZE   | _c::main::D::SIZE |
u0:27 | Struct        | E      | _c::main::E       |
u0:28 | TypeParameter | T      | _c::main::E::T    |
u0:29 | Trait         | F      | _c::main::F       |
u0:30 | Trait         | G      | _c::main::G       |
u0:31 | Struct        | H      | _c::main::H       |
u0:32 | TypeParameter | T      | _c::main::H::T    |
u0:33 | Struct        | I      | _c::main::I       |
u0:34 | TypeParameter | U      | _c::main::I::U    |

--- expect:symbol-deps ---
u0:12 <- [u0:25, u0:26]
u0:25 -> [u0:12, u0:26]
u0:26 -> [u0:12]
u0:26 <- [u0:25]
u0:29 <- [u0:31, u0:33]
u0:30 <- [u0:33]
u0:31 -> [u0:29]
u0:33 -> [u0:29, u0:30]


===============================================================================
enums-basic
===============================================================================


--- file: src/main.rs ---
struct Tree;
struct Item;
struct Vec<T>;

pub enum Option<T> {
    None,
    Some(T),
}

pub enum Node<T: Item> {
    Internal {
        children: Vec<Tree<T>>,
        height: u16
    },
    #[attribute1]
    #[attribute2]
    Leaf {
        value: T
    }
}

--- expect:symbols ---
u0:1  | Primitive     | i32      | i32                                | [global]
u0:2  | Primitive     | i64      | i64                                | [global]
u0:3  | Primitive     | i16      | i16                                | [global]
u0:4  | Primitive     | i8       | i8                                 | [global]
u0:5  | Primitive     | i128     | i128                               | [global]
u0:6  | Primitive     | isize    | isize                              | [global]
u0:7  | Primitive     | u32      | u32                                | [global]
u0:8  | Primitive     | u64      | u64                                | [global]
u0:9  | Primitive     | u16      | u16                                | [global]
u0:10 | Primitive     | u8       | u8                                 | [global]
u0:11 | Primitive     | u128     | u128                               | [global]
u0:12 | Primitive     | usize    | usize                              | [global]
u0:13 | Primitive     | f32      | f32                                | [global]
u0:14 | Primitive     | f64      | f64                                | [global]
u0:15 | Primitive     | bool     | bool                               | [global]
u0:16 | Primitive     | char     | char                               | [global]
u0:17 | Primitive     | str      | str                                | [global]
u0:18 | Primitive     | String   | String                             | [global]
u0:19 | Crate         | _c       | _c                                 | [global]
u0:20 | Crate         | crate    | _c::crate                          |
u0:21 | File          | main     | _c::main                           |
u0:22 | Struct        | Tree     | _c::main::Tree                     |
u0:23 | Struct        | Item     | _c::main::Item                     |
u0:24 | Struct        | Vec      | _c::main::Vec                      |
u0:25 | TypeParameter | T        | _c::main::Vec::T                   |
u0:26 | Enum          | Option   | _c::main::Option                   | [global]
u0:27 | TypeParameter | T        | _c::main::Option::T                |
u0:28 | EnumVariant   | None     | _c::main::Option::None             |
u0:29 | EnumVariant   | Some     | _c::main::Option::Some             |
u0:30 | Enum          | Node     | _c::main::Node                     | [global]
u0:31 | TypeParameter | T        | _c::main::Node::T                  |
u0:32 | EnumVariant   | Internal | _c::main::Node::Internal           |
u0:33 | Field         | children | _c::main::Node::Internal::children |
u0:34 | Field         | height   | _c::main::Node::Internal::height   |
u0:35 | EnumVariant   | Leaf     | _c::main::Node::Leaf               |
u0:36 | Field         | value    | _c::main::Node::Leaf::value        |

--- expect:symbol-deps ---
u0:22 <- [u0:30]
u0:23 <- [u0:30]
u0:24 <- [u0:30]
u0:26 -> [u0:28, u0:29]
u0:28 <- [u0:26]
u0:29 <- [u0:26]
u0:30 -> [u0:22, u0:23, u0:24, u0:32, u0:35, u0:9]
u0:32 <- [u0:30]
u0:35 <- [u0:30]
u0:9 <- [u0:30]

--- expect:blocks ---
u0:1 | root  | main
u0:2 | class | Tree
u0:3 | class | Item
u0:4 | class | Vec
u0:5 | enum  | Option
u0:6 | enum  | Node

--- expect:block-deps ---
u0:2 <- [u0:6]
u0:3 <- [u0:6]
u0:4 <- [u0:6]
u0:6 -> [u0:2, u0:3, u0:4]


===============================================================================
enums-with-values-specified
===============================================================================


--- file: src/main.rs ---
pub enum c_style_enum {
    val1 = 1,
    val2 = 2
}

--- expect:symbols ---
u0:1  | Primitive   | i32          | i32                          | [global]
u0:2  | Primitive   | i64          | i64                          | [global]
u0:3  | Primitive   | i16          | i16                          | [global]
u0:4  | Primitive   | i8           | i8                           | [global]
u0:5  | Primitive   | i128         | i128                         | [global]
u0:6  | Primitive   | isize        | isize                        | [global]
u0:7  | Primitive   | u32          | u32                          | [global]
u0:8  | Primitive   | u64          | u64                          | [global]
u0:9  | Primitive   | u16          | u16                          | [global]
u0:10 | Primitive   | u8           | u8                           | [global]
u0:11 | Primitive   | u128         | u128                         | [global]
u0:12 | Primitive   | usize        | usize                        | [global]
u0:13 | Primitive   | f32          | f32                          | [global]
u0:14 | Primitive   | f64          | f64                          | [global]
u0:15 | Primitive   | bool         | bool                         | [global]
u0:16 | Primitive   | char         | char                         | [global]
u0:17 | Primitive   | str          | str                          | [global]
u0:18 | Primitive   | String       | String                       | [global]
u0:19 | Crate       | _c           | _c                           | [global]
u0:20 | Crate       | crate        | _c::crate                    |
u0:21 | File        | main         | _c::main                     |
u0:22 | Enum        | c_style_enum | _c::main::c_style_enum       | [global]
u0:23 | EnumVariant | val1         | _c::main::c_style_enum::val1 |
u0:24 | EnumVariant | val2         | _c::main::c_style_enum::val2 |

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23, u0:24]
u0:22 -> [u0:1, u0:23, u0:24]
u0:23 -> [u0:1]
u0:23 <- [u0:22]
u0:24 -> [u0:1]
u0:24 <- [u0:22]


===============================================================================
generic-functions-one
===============================================================================


--- file: src/main.rs ---
struct Text;
trait Into<T> {}
struct Range<Idx> {}

pub fn splice<T: Into<Text>>(&mut self, old_range: Range<usize>, new_text: T) {
}
pub fn uninit_array<const LEN: usize>() -> [Self; LEN] {}

--- expect:symbols ---
u0:1  | Primitive     | i32          | i32                         | [global]
u0:2  | Primitive     | i64          | i64                         | [global]
u0:3  | Primitive     | i16          | i16                         | [global]
u0:4  | Primitive     | i8           | i8                          | [global]
u0:5  | Primitive     | i128         | i128                        | [global]
u0:6  | Primitive     | isize        | isize                       | [global]
u0:7  | Primitive     | u32          | u32                         | [global]
u0:8  | Primitive     | u64          | u64                         | [global]
u0:9  | Primitive     | u16          | u16                         | [global]
u0:10 | Primitive     | u8           | u8                          | [global]
u0:11 | Primitive     | u128         | u128                        | [global]
u0:12 | Primitive     | usize        | usize                       | [global]
u0:13 | Primitive     | f32          | f32                         | [global]
u0:14 | Primitive     | f64          | f64                         | [global]
u0:15 | Primitive     | bool         | bool                        | [global]
u0:16 | Primitive     | char         | char                        | [global]
u0:17 | Primitive     | str          | str                         | [global]
u0:18 | Primitive     | String       | String                      | [global]
u0:19 | Crate         | _c           | _c                          | [global]
u0:20 | Crate         | crate        | _c::crate                   |
u0:21 | File          | main         | _c::main                    |
u0:22 | Struct        | Text         | _c::main::Text              |
u0:23 | Trait         | Into         | _c::main::Into              |
u0:24 | TypeParameter | T            | _c::main::Into::T           |
u0:25 | Struct        | Range        | _c::main::Range             |
u0:26 | TypeParameter | Idx          | _c::main::Range::Idx        |
u0:27 | Function      | splice       | _c::main::splice            | [global]
u0:28 | TypeParameter | T            | _c::main::splice::T         |
u0:29 | Variable      | old_range    | _c::main::splice::old_range |
u0:30 | Variable      | new_text     | _c::main::splice::new_text  |
u0:31 | Function      | uninit_array | _c::main::uninit_array      | [global]
u0:32 | Const         | LEN          | _c::main::uninit_array::LEN |

--- expect:symbol-deps ---
u0:12 <- [u0:27, u0:31, u0:32]
u0:22 <- [u0:27]
u0:23 <- [u0:27]
u0:25 <- [u0:27, u0:29]
u0:27 -> [u0:12, u0:22, u0:23, u0:25]
u0:29 -> [u0:25]
u0:31 -> [u0:12, u0:32]
u0:32 -> [u0:12]
u0:32 <- [u0:31]

--- expect:blocks ---
u0:1 | root | main |  | 
u0:2 | class | Text |  | 
u0:3 | trait | Into |  | 
u0:4 | class | Range |  | 
u0:5 | func | splice |  | 
u0:6 | func | uninit_array |  | 

--- expect:block-deps ---
u0:2 <- [u0:5]
u0:3 <- [u0:5]
u0:4 <- [u0:5]
u0:5 -> [u0:2, u0:3, u0:4]


===============================================================================
functions-with-mutable-parameters
===============================================================================


--- file: src/main.rs ---
fn foo(mut x : u32) {
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Function  | foo    | _c::main::foo    |
u0:23 | Variable  | x      | _c::main::foo::x |

--- expect:symbol-deps ---
u0:22 -> [u0:7]
u0:23 -> [u0:7]
u0:7 <- [u0:22, u0:23]


===============================================================================
functions-with-destructured-parameters
===============================================================================


--- file: src/main.rs ---
struct Foo;
struct Y;
struct T;
struct U;

fn f1([x, y]: [Foo; 2]) {}

fn f2(&x: &Y) {}

fn f3((x, y): (T, U)) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32             | [global]
u0:2  | Primitive | i64    | i64             | [global]
u0:3  | Primitive | i16    | i16             | [global]
u0:4  | Primitive | i8     | i8              | [global]
u0:5  | Primitive | i128   | i128            | [global]
u0:6  | Primitive | isize  | isize           | [global]
u0:7  | Primitive | u32    | u32             | [global]
u0:8  | Primitive | u64    | u64             | [global]
u0:9  | Primitive | u16    | u16             | [global]
u0:10 | Primitive | u8     | u8              | [global]
u0:11 | Primitive | u128   | u128            | [global]
u0:12 | Primitive | usize  | usize           | [global]
u0:13 | Primitive | f32    | f32             | [global]
u0:14 | Primitive | f64    | f64             | [global]
u0:15 | Primitive | bool   | bool            | [global]
u0:16 | Primitive | char   | char            | [global]
u0:17 | Primitive | str    | str             | [global]
u0:18 | Primitive | String | String          | [global]
u0:19 | Crate     | _c     | _c              | [global]
u0:20 | Crate     | crate  | _c::crate       |
u0:21 | File      | main   | _c::main        |
u0:22 | Struct    | Foo    | _c::main::Foo   |
u0:23 | Struct    | Y      | _c::main::Y     |
u0:24 | Struct    | T      | _c::main::T     |
u0:25 | Struct    | U      | _c::main::U     |
u0:26 | Function  | f1     | _c::main::f1    |
u0:27 | Variable  | x      | _c::main::f1::x |
u0:28 | Function  | f2     | _c::main::f2    |
u0:29 | Variable  | x      | _c::main::f2::x |
u0:30 | Function  | f3     | _c::main::f3    |
u0:31 | Variable  | x      | _c::main::f3::x |

--- expect:symbol-deps ---
u0:22 <- [u0:26, u0:27]
u0:23 <- [u0:28, u0:29]
u0:24 <- [u0:30, u0:31]
u0:25 <- [u0:30, u0:31]
u0:26 -> [u0:22]
u0:27 -> [u0:22]
u0:28 -> [u0:23]
u0:29 -> [u0:23]
u0:30 -> [u0:24, u0:25]
u0:31 -> [u0:24, u0:25]

--- expect:blocks ---
u0:1 | root  | main
u0:2 | class | Foo
u0:3 | class | Y
u0:4 | class | T
u0:5 | class | U
u0:6 | func  | f1
u0:7 | func  | f2
u0:8 | func  | f3

--- expect:block-deps ---
u0:2 <- [u0:6]
u0:3 <- [u0:7]
u0:4 <- [u0:8]
u0:5 <- [u0:8]
u0:6 -> [u0:2]
u0:7 -> [u0:3]
u0:8 -> [u0:4, u0:5]


===============================================================================
functions-with-custom-types-for-self
===============================================================================


--- file: src/main.rs ---
struct Box<T> {};
trait Callback {
    fn call(self: Box<Self>);
}

--- expect:symbols ---
u0:1  | Primitive     | i32      | i32                      | [global]
u0:2  | Primitive     | i64      | i64                      | [global]
u0:3  | Primitive     | i16      | i16                      | [global]
u0:4  | Primitive     | i8       | i8                       | [global]
u0:5  | Primitive     | i128     | i128                     | [global]
u0:6  | Primitive     | isize    | isize                    | [global]
u0:7  | Primitive     | u32      | u32                      | [global]
u0:8  | Primitive     | u64      | u64                      | [global]
u0:9  | Primitive     | u16      | u16                      | [global]
u0:10 | Primitive     | u8       | u8                       | [global]
u0:11 | Primitive     | u128     | u128                     | [global]
u0:12 | Primitive     | usize    | usize                    | [global]
u0:13 | Primitive     | f32      | f32                      | [global]
u0:14 | Primitive     | f64      | f64                      | [global]
u0:15 | Primitive     | bool     | bool                     | [global]
u0:16 | Primitive     | char     | char                     | [global]
u0:17 | Primitive     | str      | str                      | [global]
u0:18 | Primitive     | String   | String                   | [global]
u0:19 | Crate         | _c       | _c                       | [global]
u0:20 | Crate         | crate    | _c::crate                |
u0:21 | File          | main     | _c::main                 |
u0:22 | Struct        | Box      | _c::main::Box            |
u0:23 | TypeParameter | T        | _c::main::Box::T         |
u0:24 | Trait         | Callback | _c::main::Callback       |
u0:25 | Function      | call     | _c::main::Callback::call |

--- expect:symbol-deps ---
u0:22 <- [u0:25]
u0:24 -> [u0:25]
u0:25 -> [u0:22]
u0:25 <- [u0:24]


===============================================================================
constant-items
===============================================================================


--- file: src/main.rs ---
const N: i32 = 5;

trait Foo {
    const X: u8;
}

fn func() {
    println!("{}", N);
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Const     | N      | _c::main::N      |
u0:23 | Trait     | Foo    | _c::main::Foo    |
u0:24 | Const     | X      | _c::main::Foo::X |
u0:25 | Function  | func   | _c::main::func   |

--- expect:symbol-deps ---
u0:1 <- [u0:22]
u0:10 <- [u0:24]
u0:22 -> [u0:1]
u0:22 <- [u0:25]
u0:23 -> [u0:24]
u0:24 -> [u0:10]
u0:24 <- [u0:23]
u0:25 -> [u0:22]


===============================================================================
static-items
===============================================================================


--- file: src/main.rs ---
static N: i32 = 5;
static mut __progname: *mut ::c_char;

fn func() {
    println!("{}", N);
}

--- expect:symbols ---
u0:1  | Primitive | i32        | i32                  | [global]
u0:2  | Primitive | i64        | i64                  | [global]
u0:3  | Primitive | i16        | i16                  | [global]
u0:4  | Primitive | i8         | i8                   | [global]
u0:5  | Primitive | i128       | i128                 | [global]
u0:6  | Primitive | isize      | isize                | [global]
u0:7  | Primitive | u32        | u32                  | [global]
u0:8  | Primitive | u64        | u64                  | [global]
u0:9  | Primitive | u16        | u16                  | [global]
u0:10 | Primitive | u8         | u8                   | [global]
u0:11 | Primitive | u128       | u128                 | [global]
u0:12 | Primitive | usize      | usize                | [global]
u0:13 | Primitive | f32        | f32                  | [global]
u0:14 | Primitive | f64        | f64                  | [global]
u0:15 | Primitive | bool       | bool                 | [global]
u0:16 | Primitive | char       | char                 | [global]
u0:17 | Primitive | str        | str                  | [global]
u0:18 | Primitive | String     | String               | [global]
u0:19 | Crate     | _c         | _c                   | [global]
u0:20 | Crate     | crate      | _c::crate            |
u0:21 | File      | main       | _c::main             |
u0:22 | Static    | N          | _c::main::N          |
u0:23 | Static    | __progname | _c::main::__progname |
u0:24 | Function  | func       | _c::main::func       |

--- expect:symbol-deps ---
u0:1 <- [u0:22]
u0:22 -> [u0:1]
u0:22 <- [u0:24]
u0:24 -> [u0:22]


===============================================================================
static-ref-items-using-lazy-static
===============================================================================


--- file: src/main.rs ---
static ref ONE: usize = 0;

fn func() {
    println!("{}", ONE);
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Static    | ONE    | _c::main::ONE  |
u0:23 | Function  | func   | _c::main::func |

--- expect:symbol-deps ---
u0:12 <- [u0:22]
u0:22 -> [u0:12]
u0:22 <- [u0:23]
u0:23 -> [u0:22]


===============================================================================
type-aliases
===============================================================================


--- file: src/main.rs ---
struct Tree<T>;
trait Send {}
trait Sync {}
type Inch = u64;
type Name<T> = Tree<T>;
type LazyResolve = impl (FnOnce() -> Capture) + Send + Sync + UnwindSafe;

--- expect:symbols ---
u0:1  | Primitive     | i32         | i32                   | [global]
u0:2  | Primitive     | i64         | i64                   | [global]
u0:3  | Primitive     | i16         | i16                   | [global]
u0:4  | Primitive     | i8          | i8                    | [global]
u0:5  | Primitive     | i128        | i128                  | [global]
u0:6  | Primitive     | isize       | isize                 | [global]
u0:7  | Primitive     | u32         | u32                   | [global]
u0:8  | Primitive     | u64         | u64                   | [global]
u0:9  | Primitive     | u16         | u16                   | [global]
u0:10 | Primitive     | u8          | u8                    | [global]
u0:11 | Primitive     | u128        | u128                  | [global]
u0:12 | Primitive     | usize       | usize                 | [global]
u0:13 | Primitive     | f32         | f32                   | [global]
u0:14 | Primitive     | f64         | f64                   | [global]
u0:15 | Primitive     | bool        | bool                  | [global]
u0:16 | Primitive     | char        | char                  | [global]
u0:17 | Primitive     | str         | str                   | [global]
u0:18 | Primitive     | String      | String                | [global]
u0:19 | Crate         | _c          | _c                    | [global]
u0:20 | Crate         | crate       | _c::crate             |
u0:21 | File          | main        | _c::main              |
u0:22 | Struct        | Tree        | _c::main::Tree        |
u0:23 | TypeParameter | T           | _c::main::Tree::T     |
u0:24 | Trait         | Send        | _c::main::Send        |
u0:25 | Trait         | Sync        | _c::main::Sync        |
u0:26 | TypeAlias     | Inch        | _c::main::Inch        |
u0:27 | TypeAlias     | Name        | _c::main::Name        |
u0:28 | TypeParameter | T           | _c::main::T           |
u0:29 | TypeAlias     | LazyResolve | _c::main::LazyResolve |

--- expect:symbol-deps ---
u0:22 <- [u0:27]
u0:24 <- [u0:29]
u0:25 <- [u0:29]
u0:26 -> [u0:8]
u0:27 -> [u0:22]
u0:29 -> [u0:24, u0:25]
u0:8 <- [u0:26]


===============================================================================
type-alias-where-clauses
===============================================================================


--- file: src/main.rs ---
trait Copy {}
struct Box<T> {}
type Foo<T> where T: Copy = Box<T>;
type Assoc3 where = () where;

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32              | [global]
u0:2  | Primitive     | i64    | i64              | [global]
u0:3  | Primitive     | i16    | i16              | [global]
u0:4  | Primitive     | i8     | i8               | [global]
u0:5  | Primitive     | i128   | i128             | [global]
u0:6  | Primitive     | isize  | isize            | [global]
u0:7  | Primitive     | u32    | u32              | [global]
u0:8  | Primitive     | u64    | u64              | [global]
u0:9  | Primitive     | u16    | u16              | [global]
u0:10 | Primitive     | u8     | u8               | [global]
u0:11 | Primitive     | u128   | u128             | [global]
u0:12 | Primitive     | usize  | usize            | [global]
u0:13 | Primitive     | f32    | f32              | [global]
u0:14 | Primitive     | f64    | f64              | [global]
u0:15 | Primitive     | bool   | bool             | [global]
u0:16 | Primitive     | char   | char             | [global]
u0:17 | Primitive     | str    | str              | [global]
u0:18 | Primitive     | String | String           | [global]
u0:19 | Crate         | _c     | _c               | [global]
u0:20 | Crate         | crate  | _c::crate        |
u0:21 | File          | main   | _c::main         |
u0:22 | Trait         | Copy   | _c::main::Copy   |
u0:23 | Struct        | Box    | _c::main::Box    |
u0:24 | TypeParameter | T      | _c::main::Box::T |
u0:25 | TypeAlias     | Foo    | _c::main::Foo    |
u0:26 | TypeParameter | T      | _c::main::T      |
u0:27 | TypeAlias     | Assoc3 | _c::main::Assoc3 |

--- expect:symbol-deps ---
u0:22 <- [u0:25]
u0:23 <- [u0:25]
u0:25 -> [u0:22, u0:23]


===============================================================================
empty-statements
===============================================================================


--- file: src/main.rs ---
fn main() {
    ;
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Function  | main   | _c::main::main |

--- expect:symbol-deps ---


===============================================================================
attributes
===============================================================================


--- file: src/main.rs ---
#[test]
fn test_foo() {}

#[derive(Debug)]
struct Baz;

#[derive(Debug, Eq,)]
struct Foo;

#[cfg(target_os = "macos")]
mod macos_only {}

#![allow(clippy::useless_transmute)]

#[clippy::cyclomatic_complexity = "100"]

--- expect:symbols ---
u0:1  | Primitive | i32        | i32                  | [global]
u0:2  | Primitive | i64        | i64                  | [global]
u0:3  | Primitive | i16        | i16                  | [global]
u0:4  | Primitive | i8         | i8                   | [global]
u0:5  | Primitive | i128       | i128                 | [global]
u0:6  | Primitive | isize      | isize                | [global]
u0:7  | Primitive | u32        | u32                  | [global]
u0:8  | Primitive | u64        | u64                  | [global]
u0:9  | Primitive | u16        | u16                  | [global]
u0:10 | Primitive | u8         | u8                   | [global]
u0:11 | Primitive | u128       | u128                 | [global]
u0:12 | Primitive | usize      | usize                | [global]
u0:13 | Primitive | f32        | f32                  | [global]
u0:14 | Primitive | f64        | f64                  | [global]
u0:15 | Primitive | bool       | bool                 | [global]
u0:16 | Primitive | char       | char                 | [global]
u0:17 | Primitive | str        | str                  | [global]
u0:18 | Primitive | String     | String               | [global]
u0:19 | Crate     | _c         | _c                   | [global]
u0:20 | Crate     | crate      | _c::crate            |
u0:21 | File      | main       | _c::main             |
u0:22 | Function  | test_foo   | _c::main::test_foo   |
u0:23 | Struct    | Baz        | _c::main::Baz        |
u0:24 | Struct    | Foo        | _c::main::Foo        |
u0:25 | Namespace | macos_only | _c::main::macos_only |

--- expect:symbol-deps ---


===============================================================================
inner-attributes
===============================================================================


--- file: src/main.rs ---
mod macos_only {
  #![cfg(target_os = "macos")]
}

match ty {
    #![cfg_attr(all(test, exhaustive), deny(non_exhaustive_omitted_patterns))]
    syn::Type::Array(ty) => self.visit_type(&ty.elem),
}

--- expect:symbols ---
u0:1  | Primitive | i32        | i32                  | [global]
u0:2  | Primitive | i64        | i64                  | [global]
u0:3  | Primitive | i16        | i16                  | [global]
u0:4  | Primitive | i8         | i8                   | [global]
u0:5  | Primitive | i128       | i128                 | [global]
u0:6  | Primitive | isize      | isize                | [global]
u0:7  | Primitive | u32        | u32                  | [global]
u0:8  | Primitive | u64        | u64                  | [global]
u0:9  | Primitive | u16        | u16                  | [global]
u0:10 | Primitive | u8         | u8                   | [global]
u0:11 | Primitive | u128       | u128                 | [global]
u0:12 | Primitive | usize      | usize                | [global]
u0:13 | Primitive | f32        | f32                  | [global]
u0:14 | Primitive | f64        | f64                  | [global]
u0:15 | Primitive | bool       | bool                 | [global]
u0:16 | Primitive | char       | char                 | [global]
u0:17 | Primitive | str        | str                  | [global]
u0:18 | Primitive | String     | String               | [global]
u0:19 | Crate     | _c         | _c                   | [global]
u0:20 | Crate     | crate      | _c::crate            |
u0:21 | File      | main       | _c::main             |
u0:22 | Namespace | macos_only | _c::main::macos_only |

--- expect:symbol-deps ---


===============================================================================
key-value-attribute-expressions
===============================================================================


--- file: src/main.rs ---
#[doc = include_str!("foo-doc.md")]
fn foo() {}

#[namespace = foo::bar]
fn baz() {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32           | [global]
u0:2  | Primitive | i64    | i64           | [global]
u0:3  | Primitive | i16    | i16           | [global]
u0:4  | Primitive | i8     | i8            | [global]
u0:5  | Primitive | i128   | i128          | [global]
u0:6  | Primitive | isize  | isize         | [global]
u0:7  | Primitive | u32    | u32           | [global]
u0:8  | Primitive | u64    | u64           | [global]
u0:9  | Primitive | u16    | u16           | [global]
u0:10 | Primitive | u8     | u8            | [global]
u0:11 | Primitive | u128   | u128          | [global]
u0:12 | Primitive | usize  | usize         | [global]
u0:13 | Primitive | f32    | f32           | [global]
u0:14 | Primitive | f64    | f64           | [global]
u0:15 | Primitive | bool   | bool          | [global]
u0:16 | Primitive | char   | char          | [global]
u0:17 | Primitive | str    | str           | [global]
u0:18 | Primitive | String | String        | [global]
u0:19 | Crate     | _c     | _c            | [global]
u0:20 | Crate     | crate  | _c::crate     |
u0:21 | File      | main   | _c::main      |
u0:22 | Function  | foo    | _c::main::foo |
u0:23 | Function  | baz    | _c::main::baz |

--- expect:symbol-deps ---


===============================================================================
attribute-macros
===============================================================================


--- file: src/main.rs ---
foo(#[attr(=> arbitrary tokens <=)] x, y);

foo(#[bar(some tokens are special in other contexts: $/';()*()+.)] x);

--- expect:symbols ---
u0:1  | Primitive | i32    | i32       | [global]
u0:2  | Primitive | i64    | i64       | [global]
u0:3  | Primitive | i16    | i16       | [global]
u0:4  | Primitive | i8     | i8        | [global]
u0:5  | Primitive | i128   | i128      | [global]
u0:6  | Primitive | isize  | isize     | [global]
u0:7  | Primitive | u32    | u32       | [global]
u0:8  | Primitive | u64    | u64       | [global]
u0:9  | Primitive | u16    | u16       | [global]
u0:10 | Primitive | u8     | u8        | [global]
u0:11 | Primitive | u128   | u128      | [global]
u0:12 | Primitive | usize  | usize     | [global]
u0:13 | Primitive | f32    | f32       | [global]
u0:14 | Primitive | f64    | f64       | [global]
u0:15 | Primitive | bool   | bool      | [global]
u0:16 | Primitive | char   | char      | [global]
u0:17 | Primitive | str    | str       | [global]
u0:18 | Primitive | String | String    | [global]
u0:19 | Crate     | _c     | _c        | [global]
u0:20 | Crate     | crate  | _c::crate |
u0:21 | File      | main   | _c::main  |

--- expect:symbol-deps ---


===============================================================================
derive-macro-helper-attributes
===============================================================================


--- file: src/main.rs ---
// Example from https://github.com/dtolnay/thiserror/blob/21c26903e29cb92ba1a7ff11e82ae2001646b60d/README.md

use thiserror::Error;

pub struct Limits;

#[derive(Error, Debug)]
pub enum Error {
    #[error("first letter must be lowercase but was {:?}", first_char(.0))]
    WrongCase(String),
    #[error("invalid index {idx}, expected at least {} and at most {}", .limits.lo, .limits.hi)]
    OutOfBounds { idx: usize, limits: Limits },
}

--- expect:symbols ---
u0:1  | Primitive   | i32         | i32                                  | [global]
u0:2  | Primitive   | i64         | i64                                  | [global]
u0:3  | Primitive   | i16         | i16                                  | [global]
u0:4  | Primitive   | i8          | i8                                   | [global]
u0:5  | Primitive   | i128        | i128                                 | [global]
u0:6  | Primitive   | isize       | isize                                | [global]
u0:7  | Primitive   | u32         | u32                                  | [global]
u0:8  | Primitive   | u64         | u64                                  | [global]
u0:9  | Primitive   | u16         | u16                                  | [global]
u0:10 | Primitive   | u8          | u8                                   | [global]
u0:11 | Primitive   | u128        | u128                                 | [global]
u0:12 | Primitive   | usize       | usize                                | [global]
u0:13 | Primitive   | f32         | f32                                  | [global]
u0:14 | Primitive   | f64         | f64                                  | [global]
u0:15 | Primitive   | bool        | bool                                 | [global]
u0:16 | Primitive   | char        | char                                 | [global]
u0:17 | Primitive   | str         | str                                  | [global]
u0:18 | Primitive   | String      | String                               | [global]
u0:19 | Crate       | _c          | _c                                   | [global]
u0:20 | Crate       | crate       | _c::crate                            |
u0:21 | File        | main        | _c::main                             |
u0:22 | Struct      | Limits      | _c::main::Limits                     | [global]
u0:23 | Enum        | Error       | _c::main::Error                      | [global]
u0:24 | EnumVariant | WrongCase   | _c::main::Error::WrongCase           |
u0:25 | EnumVariant | OutOfBounds | _c::main::Error::OutOfBounds         |
u0:26 | Field       | idx         | _c::main::Error::OutOfBounds::idx    |
u0:27 | Field       | limits      | _c::main::Error::OutOfBounds::limits |

--- expect:symbol-deps ---
u0:12 <- [u0:23]
u0:18 <- [u0:23]
u0:22 <- [u0:23]
u0:23 -> [u0:12, u0:18, u0:22, u0:24, u0:25]
u0:24 <- [u0:23]
u0:25 <- [u0:23]


===============================================================================
attributes-and-expressions
===============================================================================


--- file: src/main.rs ---
fn foo() {
   bar(x,
       #[cfg(foo = "bar")]
       y);
   let z = [#[hello] 2, 7, 8];
   let t = (#[hello] 2, 7, 8);
}

fn bar(x: i32, y: i32) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32              | [global]
u0:2  | Primitive | i64    | i64              | [global]
u0:3  | Primitive | i16    | i16              | [global]
u0:4  | Primitive | i8     | i8               | [global]
u0:5  | Primitive | i128   | i128             | [global]
u0:6  | Primitive | isize  | isize            | [global]
u0:7  | Primitive | u32    | u32              | [global]
u0:8  | Primitive | u64    | u64              | [global]
u0:9  | Primitive | u16    | u16              | [global]
u0:10 | Primitive | u8     | u8               | [global]
u0:11 | Primitive | u128   | u128             | [global]
u0:12 | Primitive | usize  | usize            | [global]
u0:13 | Primitive | f32    | f32              | [global]
u0:14 | Primitive | f64    | f64              | [global]
u0:15 | Primitive | bool   | bool             | [global]
u0:16 | Primitive | char   | char             | [global]
u0:17 | Primitive | str    | str              | [global]
u0:18 | Primitive | String | String           | [global]
u0:19 | Crate     | _c     | _c               | [global]
u0:20 | Crate     | crate  | _c::crate        |
u0:21 | File      | main   | _c::main         |
u0:22 | Function  | foo    | _c::main::foo    |
u0:23 | Variable  | z      | _c::main::foo::z |
u0:24 | Variable  | t      | _c::main::foo::t |
u0:25 | Function  | bar    | _c::main::bar    |
u0:26 | Variable  | x      | _c::main::bar::x |
u0:27 | Variable  | y      | _c::main::bar::y |

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23, u0:24, u0:25, u0:26, u0:27]
u0:22 -> [u0:1, u0:25]
u0:23 -> [u0:1]
u0:24 -> [u0:1]
u0:25 -> [u0:1]
u0:25 <- [u0:22]
u0:26 -> [u0:1]
u0:27 -> [u0:1]


===============================================================================
inherent-impls-one
===============================================================================


--- file: src/main.rs ---
enum State {
    Init,
    Running,
    Stopped,
}

struct Person;
struct Machine<const STATE: State>;

impl Person {
  const leg_count : u32 = 2;

  fn walk(self) {}
  fn walk_mut(mut self) {}
  fn talk(& self) {}
  fn talk_mut(&'a mut self) {}
}

impl Machine<{State::Init}> {}

--- expect:symbols ---
u0:1  | Primitive   | i32       | i32                         | [global]
u0:2  | Primitive   | i64       | i64                         | [global]
u0:3  | Primitive   | i16       | i16                         | [global]
u0:4  | Primitive   | i8        | i8                          | [global]
u0:5  | Primitive   | i128      | i128                        | [global]
u0:6  | Primitive   | isize     | isize                       | [global]
u0:7  | Primitive   | u32       | u32                         | [global]
u0:8  | Primitive   | u64       | u64                         | [global]
u0:9  | Primitive   | u16       | u16                         | [global]
u0:10 | Primitive   | u8        | u8                          | [global]
u0:11 | Primitive   | u128      | u128                        | [global]
u0:12 | Primitive   | usize     | usize                       | [global]
u0:13 | Primitive   | f32       | f32                         | [global]
u0:14 | Primitive   | f64       | f64                         | [global]
u0:15 | Primitive   | bool      | bool                        | [global]
u0:16 | Primitive   | char      | char                        | [global]
u0:17 | Primitive   | str       | str                         | [global]
u0:18 | Primitive   | String    | String                      | [global]
u0:19 | Crate       | _c        | _c                          | [global]
u0:20 | Crate       | crate     | _c::crate                   |
u0:21 | File        | main      | _c::main                    |
u0:22 | Enum        | State     | _c::main::State             |
u0:23 | EnumVariant | Init      | _c::main::State::Init       |
u0:24 | EnumVariant | Running   | _c::main::State::Running    |
u0:25 | EnumVariant | Stopped   | _c::main::State::Stopped    |
u0:26 | Struct      | Person    | _c::main::Person            |
u0:27 | Struct      | Machine   | _c::main::Machine           |
u0:28 | Const       | STATE     | _c::main::Machine::STATE    |
u0:29 | Const       | leg_count | _c::main::Person::leg_count |
u0:30 | Function    | walk      | _c::main::Person::walk      |
u0:31 | Function    | walk_mut  | _c::main::Person::walk_mut  |
u0:32 | Function    | talk      | _c::main::Person::talk      |
u0:33 | Function    | talk_mut  | _c::main::Person::talk_mut  |

--- expect:symbol-deps ---
u0:22 -> [u0:23, u0:24, u0:25]
u0:22 <- [u0:27, u0:28]
u0:23 <- [u0:22]
u0:24 <- [u0:22]
u0:25 <- [u0:22]
u0:26 -> [u0:29, u0:30, u0:31, u0:32, u0:33]
u0:27 -> [u0:22, u0:28]
u0:28 -> [u0:22]
u0:28 <- [u0:27]
u0:29 -> [u0:7]
u0:29 <- [u0:26]
u0:30 <- [u0:26]
u0:31 <- [u0:26]
u0:32 <- [u0:26]
u0:33 <- [u0:26]
u0:7 <- [u0:29]


$// TOOD: The binding order is random so this test is flaky.
$// ===============================================================================
$// inherent-impls-across-multiple-files
$// ===============================================================================
$// --- file: src/main.rs ---
$// pub struct Person;
$// impl Person {
$//   fn walk(self) {}
$// }
$// --- file: src/foo.rs ---
$// impl Person {
$//   fn talk(& self) {}
$// }
$// --- file: src/bar.rs ---
$// fn main() {
$//     let p = Person;
$//     p.walk();
$//     p.talk();
$// }
$// --- expect:symbols ---
$// u0:1  | Primitive | i32    | i32                        | [global]
$// u0:2  | Primitive | i64    | i64                        | [global]
$// u0:3  | Primitive | i16    | i16                        | [global]
$// u0:4  | Primitive | i8     | i8                         | [global]
$// u0:5  | Primitive | i128   | i128                       | [global]
$// u0:6  | Primitive | isize  | isize                      | [global]
$// u0:7  | Primitive | u32    | u32                        | [global]
$// u0:8  | Primitive | u64    | u64                        | [global]
$// u0:9  | Primitive | u16    | u16                        | [global]
$// u0:10 | Primitive | u8     | u8                         | [global]
$// u0:11 | Primitive | u128   | u128                       | [global]
$// u0:12 | Primitive | usize  | usize                      | [global]
$// u0:13 | Primitive | f32    | f32                        | [global]
$// u0:14 | Primitive | f64    | f64                        | [global]
$// u0:15 | Primitive | bool   | bool                       | [global]
$// u0:16 | Primitive | char   | char                       | [global]
$// u0:17 | Primitive | str    | str                        | [global]
$// u0:18 | Primitive | String | String                     | [global]
$// u0:19 | Crate     | _c     | _c                         | [global]
$// u0:20 | Crate     | crate  | _c::crate                  |
$// u0:21 | Module    | _m     | _c::_m                     |
$// u0:22 | File      | bar    | _c::_m::bar                |
$// u0:23 | Function  | main   | _c::_m::bar::main          |
$// u0:24 | Variable  | p      | _c::_m::bar::main::p       |
$// u1:25 | Crate     | crate  | _c::crate                  |
$// u1:26 | Module    | _m     | _c::_m                     |
$// u1:27 | File      | foo    | _c::_m::foo                |
$// u1:28 | Struct    | Person | _c::_m::foo::Person        | [global]
$// u1:29 | Function  | talk   | _c::_m::foo::Person::talk  |
$// u2:30 | Crate     | crate  | _c::crate                  |
$// u2:31 | Module    | _m     | _c::_m                     |
$// u2:32 | File      | main   | _c::_m::main               |
$// u2:33 | Struct    | Person | _c::_m::main::Person       | [global]
$// u2:34 | Function  | walk   | _c::_m::main::Person::walk |
$// --- expect:symbol-deps ---
$// u0:23 -> [u1:29, u2:33, u2:34]
$// u0:24 -> [u2:33]
$// u1:28 -> [u1:29, u2:33]
$// u1:29 <- [u0:23, u1:28]
$// u2:33 -> [u2:34]
$// u2:33 <- [u0:23, u0:24, u1:28]
$// u2:34 <- [u0:23, u2:33]
===============================================================================
inherent-impls-no-defines
===============================================================================


--- file: src/main.rs ---
impl Person {
  fn walk(self) {}
}

--- expect:symbols ---
u0:1  | Primitive      | i32    | i32                    | [global]
u0:2  | Primitive      | i64    | i64                    | [global]
u0:3  | Primitive      | i16    | i16                    | [global]
u0:4  | Primitive      | i8     | i8                     | [global]
u0:5  | Primitive      | i128   | i128                   | [global]
u0:6  | Primitive      | isize  | isize                  | [global]
u0:7  | Primitive      | u32    | u32                    | [global]
u0:8  | Primitive      | u64    | u64                    | [global]
u0:9  | Primitive      | u16    | u16                    | [global]
u0:10 | Primitive      | u8     | u8                     | [global]
u0:11 | Primitive      | u128   | u128                   | [global]
u0:12 | Primitive      | usize  | usize                  | [global]
u0:13 | Primitive      | f32    | f32                    | [global]
u0:14 | Primitive      | f64    | f64                    | [global]
u0:15 | Primitive      | bool   | bool                   | [global]
u0:16 | Primitive      | char   | char                   | [global]
u0:17 | Primitive      | str    | str                    | [global]
u0:18 | Primitive      | String | String                 | [global]
u0:19 | Crate          | _c     | _c                     | [global]
u0:20 | Crate          | crate  | _c::crate              |
u0:21 | File           | main   | _c::main               |
u0:22 | UnresolvedType | Person | _c::main::Person       |
u0:23 | Function       | walk   | _c::main::Person::walk |

--- expect:symbol-deps ---
u0:22 -> [u0:23]
u0:23 <- [u0:22]


===============================================================================
trait-impls
===============================================================================


--- file: src/main.rs ---
impl<'a> iter::Iterator for Self::Iter<'a> {
}

impl ConvertTo<i64> for i32 {
    fn convert(&self) -> i64 { *self as i64 }
}

--- expect:symbols ---
u0:1  | Primitive      | i32       | i32                 | [global]
u0:2  | Primitive      | i64       | i64                 | [global]
u0:3  | Primitive      | i16       | i16                 | [global]
u0:4  | Primitive      | i8        | i8                  | [global]
u0:5  | Primitive      | i128      | i128                | [global]
u0:6  | Primitive      | isize     | isize               | [global]
u0:7  | Primitive      | u32       | u32                 | [global]
u0:8  | Primitive      | u64       | u64                 | [global]
u0:9  | Primitive      | u16       | u16                 | [global]
u0:10 | Primitive      | u8        | u8                  | [global]
u0:11 | Primitive      | u128      | u128                | [global]
u0:12 | Primitive      | usize     | usize               | [global]
u0:13 | Primitive      | f32       | f32                 | [global]
u0:14 | Primitive      | f64       | f64                 | [global]
u0:15 | Primitive      | bool      | bool                | [global]
u0:16 | Primitive      | char      | char                | [global]
u0:17 | Primitive      | str       | str                 | [global]
u0:18 | Primitive      | String    | String              | [global]
u0:19 | Crate          | _c        | _c                  | [global]
u0:20 | Crate          | crate     | _c::crate           |
u0:21 | File           | main      | _c::main            |
u0:22 | UnresolvedType | Iterator  | _c::main::Iterator  |
u0:23 | UnresolvedType | Iter      | _c::main::Iter      |
u0:24 | UnresolvedType | ConvertTo | _c::main::ConvertTo |
u0:25 | Function       | convert   | i32::convert        |

--- expect:symbol-deps ---
u0:1 -> [u0:2, u0:25]
u0:2 <- [u0:1, u0:25]
u0:25 -> [u0:2]
u0:25 <- [u0:1]


===============================================================================
unsafe-impls
===============================================================================


--- file: src/main.rs ---
unsafe impl Foo {
}

--- expect:symbols ---
u0:1  | Primitive      | i32    | i32           | [global]
u0:2  | Primitive      | i64    | i64           | [global]
u0:3  | Primitive      | i16    | i16           | [global]
u0:4  | Primitive      | i8     | i8            | [global]
u0:5  | Primitive      | i128   | i128          | [global]
u0:6  | Primitive      | isize  | isize         | [global]
u0:7  | Primitive      | u32    | u32           | [global]
u0:8  | Primitive      | u64    | u64           | [global]
u0:9  | Primitive      | u16    | u16           | [global]
u0:10 | Primitive      | u8     | u8            | [global]
u0:11 | Primitive      | u128   | u128          | [global]
u0:12 | Primitive      | usize  | usize         | [global]
u0:13 | Primitive      | f32    | f32           | [global]
u0:14 | Primitive      | f64    | f64           | [global]
u0:15 | Primitive      | bool   | bool          | [global]
u0:16 | Primitive      | char   | char          | [global]
u0:17 | Primitive      | str    | str           | [global]
u0:18 | Primitive      | String | String        | [global]
u0:19 | Crate          | _c     | _c            | [global]
u0:20 | Crate          | crate  | _c::crate     |
u0:21 | File           | main   | _c::main      |
u0:22 | UnresolvedType | Foo    | _c::main::Foo |

--- expect:symbol-deps ---


===============================================================================
disable-automatically-derived-trait-impls
===============================================================================


--- file: src/main.rs ---
impl !Send for Foo {}

--- expect:symbols ---
u0:1  | Primitive      | i32    | i32            | [global]
u0:2  | Primitive      | i64    | i64            | [global]
u0:3  | Primitive      | i16    | i16            | [global]
u0:4  | Primitive      | i8     | i8             | [global]
u0:5  | Primitive      | i128   | i128           | [global]
u0:6  | Primitive      | isize  | isize          | [global]
u0:7  | Primitive      | u32    | u32            | [global]
u0:8  | Primitive      | u64    | u64            | [global]
u0:9  | Primitive      | u16    | u16            | [global]
u0:10 | Primitive      | u8     | u8             | [global]
u0:11 | Primitive      | u128   | u128           | [global]
u0:12 | Primitive      | usize  | usize          | [global]
u0:13 | Primitive      | f32    | f32            | [global]
u0:14 | Primitive      | f64    | f64            | [global]
u0:15 | Primitive      | bool   | bool           | [global]
u0:16 | Primitive      | char   | char           | [global]
u0:17 | Primitive      | str    | str            | [global]
u0:18 | Primitive      | String | String         | [global]
u0:19 | Crate          | _c     | _c             | [global]
u0:20 | Crate          | crate  | _c::crate      |
u0:21 | File           | main   | _c::main       |
u0:22 | UnresolvedType | Send   | _c::main::Send |
u0:23 | UnresolvedType | Foo    | _c::main::Foo  |

--- expect:symbol-deps ---


===============================================================================
impl-dyn-with-parentheses
===============================================================================


--- file: src/main.rs ---
pub unsafe trait Trait {}

unsafe impl Trait for dyn (::std::any::Any) + Send { }

--- expect:symbols ---
u0:1  | Primitive      | i32    | i32             | [global]
u0:2  | Primitive      | i64    | i64             | [global]
u0:3  | Primitive      | i16    | i16             | [global]
u0:4  | Primitive      | i8     | i8              | [global]
u0:5  | Primitive      | i128   | i128            | [global]
u0:6  | Primitive      | isize  | isize           | [global]
u0:7  | Primitive      | u32    | u32             | [global]
u0:8  | Primitive      | u64    | u64             | [global]
u0:9  | Primitive      | u16    | u16             | [global]
u0:10 | Primitive      | u8     | u8              | [global]
u0:11 | Primitive      | u128   | u128            | [global]
u0:12 | Primitive      | usize  | usize           | [global]
u0:13 | Primitive      | f32    | f32             | [global]
u0:14 | Primitive      | f64    | f64             | [global]
u0:15 | Primitive      | bool   | bool            | [global]
u0:16 | Primitive      | char   | char            | [global]
u0:17 | Primitive      | str    | str             | [global]
u0:18 | Primitive      | String | String          | [global]
u0:19 | Crate          | _c     | _c              | [global]
u0:20 | Crate          | crate  | _c::crate       |
u0:21 | File           | main   | _c::main        |
u0:22 | Trait          | Trait  | _c::main::Trait | [global]
u0:23 | UnresolvedType | Send   | _c::main::Send  |

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22]


===============================================================================
trait-impl-signature
===============================================================================


--- file: src/main.rs ---
trait Debug {}
trait Display {}
impl<K: Debug + Ord> Debug for OccupiedError<K>;
impl<K: Debug + Ord> Display for OccupiedError<K>;

--- expect:symbols ---
u0:1  | Primitive      | i32           | i32                        | [global]
u0:2  | Primitive      | i64           | i64                        | [global]
u0:3  | Primitive      | i16           | i16                        | [global]
u0:4  | Primitive      | i8            | i8                         | [global]
u0:5  | Primitive      | i128          | i128                       | [global]
u0:6  | Primitive      | isize         | isize                      | [global]
u0:7  | Primitive      | u32           | u32                        | [global]
u0:8  | Primitive      | u64           | u64                        | [global]
u0:9  | Primitive      | u16           | u16                        | [global]
u0:10 | Primitive      | u8            | u8                         | [global]
u0:11 | Primitive      | u128          | u128                       | [global]
u0:12 | Primitive      | usize         | usize                      | [global]
u0:13 | Primitive      | f32           | f32                        | [global]
u0:14 | Primitive      | f64           | f64                        | [global]
u0:15 | Primitive      | bool          | bool                       | [global]
u0:16 | Primitive      | char          | char                       | [global]
u0:17 | Primitive      | str           | str                        | [global]
u0:18 | Primitive      | String        | String                     | [global]
u0:19 | Crate          | _c            | _c                         | [global]
u0:20 | Crate          | crate         | _c::crate                  |
u0:21 | File           | main          | _c::main                   |
u0:22 | Trait          | Debug         | _c::main::Debug            |
u0:23 | Trait          | Display       | _c::main::Display          |
u0:24 | UnresolvedType | OccupiedError | _c::main::OccupiedError    |
u0:25 | TypeParameter  | K             | _c::main::OccupiedError::K |
u0:26 | TypeParameter  | K             | _c::main::OccupiedError::K |

--- expect:symbol-deps ---
u0:22 <- [u0:24]
u0:23 <- [u0:24]
u0:24 -> [u0:22, u0:23]


===============================================================================
impls-with-default-functions
===============================================================================


--- file: src/main.rs ---
impl Foo {
  const default fn bar() -> i32 {
    // Make 'default' still works as an identifier
    default.bar();
  }
}

--- expect:symbols ---
u0:1  | Primitive      | i32    | i32                | [global]
u0:2  | Primitive      | i64    | i64                | [global]
u0:3  | Primitive      | i16    | i16                | [global]
u0:4  | Primitive      | i8     | i8                 | [global]
u0:5  | Primitive      | i128   | i128               | [global]
u0:6  | Primitive      | isize  | isize              | [global]
u0:7  | Primitive      | u32    | u32                | [global]
u0:8  | Primitive      | u64    | u64                | [global]
u0:9  | Primitive      | u16    | u16                | [global]
u0:10 | Primitive      | u8     | u8                 | [global]
u0:11 | Primitive      | u128   | u128               | [global]
u0:12 | Primitive      | usize  | usize              | [global]
u0:13 | Primitive      | f32    | f32                | [global]
u0:14 | Primitive      | f64    | f64                | [global]
u0:15 | Primitive      | bool   | bool               | [global]
u0:16 | Primitive      | char   | char               | [global]
u0:17 | Primitive      | str    | str                | [global]
u0:18 | Primitive      | String | String             | [global]
u0:19 | Crate          | _c     | _c                 | [global]
u0:20 | Crate          | crate  | _c::crate          |
u0:21 | File           | main   | _c::main           |
u0:22 | UnresolvedType | Foo    | _c::main::Foo      |
u0:23 | Function       | bar    | _c::main::Foo::bar |

--- expect:symbol-deps ---
u0:1 <- [u0:23]
u0:22 -> [u0:23]
u0:23 -> [u0:1]
u0:23 <- [u0:22]


===============================================================================
trait-declarations
===============================================================================


--- file: src/main.rs ---
trait Clone {}
pub trait Item: Clone + Eq + fmt::Debug {
    fn summarize(&self) -> Self::Summary;
}

unsafe trait Foo { }

--- expect:symbols ---
u0:1  | Primitive | i32       | i32                       | [global]
u0:2  | Primitive | i64       | i64                       | [global]
u0:3  | Primitive | i16       | i16                       | [global]
u0:4  | Primitive | i8        | i8                        | [global]
u0:5  | Primitive | i128      | i128                      | [global]
u0:6  | Primitive | isize     | isize                     | [global]
u0:7  | Primitive | u32       | u32                       | [global]
u0:8  | Primitive | u64       | u64                       | [global]
u0:9  | Primitive | u16       | u16                       | [global]
u0:10 | Primitive | u8        | u8                        | [global]
u0:11 | Primitive | u128      | u128                      | [global]
u0:12 | Primitive | usize     | usize                     | [global]
u0:13 | Primitive | f32       | f32                       | [global]
u0:14 | Primitive | f64       | f64                       | [global]
u0:15 | Primitive | bool      | bool                      | [global]
u0:16 | Primitive | char      | char                      | [global]
u0:17 | Primitive | str       | str                       | [global]
u0:18 | Primitive | String    | String                    | [global]
u0:19 | Crate     | _c        | _c                        | [global]
u0:20 | Crate     | crate     | _c::crate                 |
u0:21 | File      | main      | _c::main                  |
u0:22 | Trait     | Clone     | _c::main::Clone           |
u0:23 | Trait     | Item      | _c::main::Item            | [global]
u0:24 | Function  | summarize | _c::main::Item::summarize |
u0:25 | Trait     | Foo       | _c::main::Foo             |

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22, u0:24]
u0:24 <- [u0:23]


===============================================================================
trait-declarations-with-optional-type-parameters
===============================================================================


--- file: src/main.rs ---
struct Foo;

trait Add<RHS=Foo> {
    type Output;
    fn add(self, rhs: RHS) -> Self::Output;
}

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32                     | [global]
u0:2  | Primitive     | i64    | i64                     | [global]
u0:3  | Primitive     | i16    | i16                     | [global]
u0:4  | Primitive     | i8     | i8                      | [global]
u0:5  | Primitive     | i128   | i128                    | [global]
u0:6  | Primitive     | isize  | isize                   | [global]
u0:7  | Primitive     | u32    | u32                     | [global]
u0:8  | Primitive     | u64    | u64                     | [global]
u0:9  | Primitive     | u16    | u16                     | [global]
u0:10 | Primitive     | u8     | u8                      | [global]
u0:11 | Primitive     | u128   | u128                    | [global]
u0:12 | Primitive     | usize  | usize                   | [global]
u0:13 | Primitive     | f32    | f32                     | [global]
u0:14 | Primitive     | f64    | f64                     | [global]
u0:15 | Primitive     | bool   | bool                    | [global]
u0:16 | Primitive     | char   | char                    | [global]
u0:17 | Primitive     | str    | str                     | [global]
u0:18 | Primitive     | String | String                  | [global]
u0:19 | Crate         | _c     | _c                      | [global]
u0:20 | Crate         | crate  | _c::crate               |
u0:21 | File          | main   | _c::main                |
u0:22 | Struct        | Foo    | _c::main::Foo           |
u0:23 | Trait         | Add    | _c::main::Add           |
u0:24 | TypeParameter | RHS    | _c::main::Add::RHS      |
u0:25 | TypeAlias     | Output | _c::main::Add::Output   |
u0:26 | Function      | add    | _c::main::Add::add      |
u0:27 | Variable      | rhs    | _c::main::Add::add::rhs |

--- expect:symbol-deps ---
u0:22 <- [u0:23, u0:24]
u0:23 -> [u0:22, u0:25, u0:26]
u0:24 -> [u0:22]
u0:25 <- [u0:23]
u0:26 <- [u0:23]


===============================================================================
unsized-types-in-trait-bounds
===============================================================================


--- file: src/main.rs ---
trait Foo<T: ?Sized> {
}

fn univariant(this: &impl ?Sized, that: &(impl LayoutCalculator + ?Sized)) {}

--- expect:symbols ---
u0:1  | Primitive     | i32        | i32                        | [global]
u0:2  | Primitive     | i64        | i64                        | [global]
u0:3  | Primitive     | i16        | i16                        | [global]
u0:4  | Primitive     | i8         | i8                         | [global]
u0:5  | Primitive     | i128       | i128                       | [global]
u0:6  | Primitive     | isize      | isize                      | [global]
u0:7  | Primitive     | u32        | u32                        | [global]
u0:8  | Primitive     | u64        | u64                        | [global]
u0:9  | Primitive     | u16        | u16                        | [global]
u0:10 | Primitive     | u8         | u8                         | [global]
u0:11 | Primitive     | u128       | u128                       | [global]
u0:12 | Primitive     | usize      | usize                      | [global]
u0:13 | Primitive     | f32        | f32                        | [global]
u0:14 | Primitive     | f64        | f64                        | [global]
u0:15 | Primitive     | bool       | bool                       | [global]
u0:16 | Primitive     | char       | char                       | [global]
u0:17 | Primitive     | str        | str                        | [global]
u0:18 | Primitive     | String     | String                     | [global]
u0:19 | Crate         | _c         | _c                         | [global]
u0:20 | Crate         | crate      | _c::crate                  |
u0:21 | File          | main       | _c::main                   |
u0:22 | Trait         | Foo        | _c::main::Foo              |
u0:23 | TypeParameter | T          | _c::main::Foo::T           |
u0:24 | Function      | univariant | _c::main::univariant       |
u0:25 | Variable      | this       | _c::main::univariant::this |
u0:26 | Variable      | that       | _c::main::univariant::that |

--- expect:symbol-deps ---


===============================================================================
trait-bounds-in-type-arguments-in-trait
===============================================================================


--- file: src/main.rs ---
impl<T: AstDeref<Target: HasNodeId>> HasNodeId for T {}

--- expect:symbols ---
u0:1  | Primitive      | i32       | i32                 | [global]
u0:2  | Primitive      | i64       | i64                 | [global]
u0:3  | Primitive      | i16       | i16                 | [global]
u0:4  | Primitive      | i8        | i8                  | [global]
u0:5  | Primitive      | i128      | i128                | [global]
u0:6  | Primitive      | isize     | isize               | [global]
u0:7  | Primitive      | u32       | u32                 | [global]
u0:8  | Primitive      | u64       | u64                 | [global]
u0:9  | Primitive      | u16       | u16                 | [global]
u0:10 | Primitive      | u8        | u8                  | [global]
u0:11 | Primitive      | u128      | u128                | [global]
u0:12 | Primitive      | usize     | usize               | [global]
u0:13 | Primitive      | f32       | f32                 | [global]
u0:14 | Primitive      | f64       | f64                 | [global]
u0:15 | Primitive      | bool      | bool                | [global]
u0:16 | Primitive      | char      | char                | [global]
u0:17 | Primitive      | str       | str                 | [global]
u0:18 | Primitive      | String    | String              | [global]
u0:19 | Crate          | _c        | _c                  | [global]
u0:20 | Crate          | crate     | _c::crate           |
u0:21 | File           | main      | _c::main            |
u0:22 | UnresolvedType | HasNodeId | _c::main::HasNodeId |
u0:23 | UnresolvedType | T         | _c::main::T         |
u0:24 | TypeParameter  | T         | _c::main::T::T      |

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22]


===============================================================================
macro-invocations-inside-trait-declarations
===============================================================================


--- file: src/main.rs ---
pub trait A: B + C + D {
    private_decl!{}
    fn f(&self);
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Trait     | A      | _c::main::A    | [global]
u0:23 | Function  | f      | _c::main::A::f |

--- expect:symbol-deps ---
u0:22 -> [u0:23]
u0:23 <- [u0:22]


===============================================================================
associated-types
===============================================================================


--- file: src/main.rs ---
pub trait Graph {
    type N: fmt::Display;
    type E;
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                | [global]
u0:2  | Primitive | i64    | i64                | [global]
u0:3  | Primitive | i16    | i16                | [global]
u0:4  | Primitive | i8     | i8                 | [global]
u0:5  | Primitive | i128   | i128               | [global]
u0:6  | Primitive | isize  | isize              | [global]
u0:7  | Primitive | u32    | u32                | [global]
u0:8  | Primitive | u64    | u64                | [global]
u0:9  | Primitive | u16    | u16                | [global]
u0:10 | Primitive | u8     | u8                 | [global]
u0:11 | Primitive | u128   | u128               | [global]
u0:12 | Primitive | usize  | usize              | [global]
u0:13 | Primitive | f32    | f32                | [global]
u0:14 | Primitive | f64    | f64                | [global]
u0:15 | Primitive | bool   | bool               | [global]
u0:16 | Primitive | char   | char               | [global]
u0:17 | Primitive | str    | str                | [global]
u0:18 | Primitive | String | String             | [global]
u0:19 | Crate     | _c     | _c                 | [global]
u0:20 | Crate     | crate  | _c::crate          |
u0:21 | File      | main   | _c::main           |
u0:22 | Trait     | Graph  | _c::main::Graph    | [global]
u0:23 | TypeAlias | N      | _c::main::Graph::N |
u0:24 | TypeAlias | E      | _c::main::Graph::E |

--- expect:symbol-deps ---
u0:22 -> [u0:23, u0:24]
u0:23 <- [u0:22]
u0:24 <- [u0:22]


===============================================================================
associated-type-definitions
===============================================================================


--- file: src/main.rs ---
impl Trait for Foo {
    type Associated = Foo where 'static: 'static;
}

--- expect:symbols ---
u0:1  | Primitive      | i32        | i32                       | [global]
u0:2  | Primitive      | i64        | i64                       | [global]
u0:3  | Primitive      | i16        | i16                       | [global]
u0:4  | Primitive      | i8         | i8                        | [global]
u0:5  | Primitive      | i128       | i128                      | [global]
u0:6  | Primitive      | isize      | isize                     | [global]
u0:7  | Primitive      | u32        | u32                       | [global]
u0:8  | Primitive      | u64        | u64                       | [global]
u0:9  | Primitive      | u16        | u16                       | [global]
u0:10 | Primitive      | u8         | u8                        | [global]
u0:11 | Primitive      | u128       | u128                      | [global]
u0:12 | Primitive      | usize      | usize                     | [global]
u0:13 | Primitive      | f32        | f32                       | [global]
u0:14 | Primitive      | f64        | f64                       | [global]
u0:15 | Primitive      | bool       | bool                      | [global]
u0:16 | Primitive      | char       | char                      | [global]
u0:17 | Primitive      | str        | str                       | [global]
u0:18 | Primitive      | String     | String                    | [global]
u0:19 | Crate          | _c         | _c                        | [global]
u0:20 | Crate          | crate      | _c::crate                 |
u0:21 | File           | main       | _c::main                  |
u0:22 | UnresolvedType | Trait      | _c::main::Trait           |
u0:23 | UnresolvedType | Foo        | _c::main::Foo             |
u0:24 | TypeAlias      | Associated | _c::main::Foo::Associated |

--- expect:symbol-deps ---
u0:23 -> [u0:24]
u0:24 <- [u0:23]


===============================================================================
generic-associated-types
===============================================================================


--- file: src/main.rs ---
pub trait Database {
    type F<'a, D>: Future<Output = D> + 'a;
}

impl Database for Foo {
    type F<'a, D> = DatabaseFuture<'a, D>;
}

fn use_database1<D: Database<F<'a, TD> = F>>() {}

fn use_database2<D>()
where
    D: Database<F<'a, TD> = F>,
{}

--- expect:symbols ---
u0:1  | Primitive      | i32           | i32                        | [global]
u0:2  | Primitive      | i64           | i64                        | [global]
u0:3  | Primitive      | i16           | i16                        | [global]
u0:4  | Primitive      | i8            | i8                         | [global]
u0:5  | Primitive      | i128          | i128                       | [global]
u0:6  | Primitive      | isize         | isize                      | [global]
u0:7  | Primitive      | u32           | u32                        | [global]
u0:8  | Primitive      | u64           | u64                        | [global]
u0:9  | Primitive      | u16           | u16                        | [global]
u0:10 | Primitive      | u8            | u8                         | [global]
u0:11 | Primitive      | u128          | u128                       | [global]
u0:12 | Primitive      | usize         | usize                      | [global]
u0:13 | Primitive      | f32           | f32                        | [global]
u0:14 | Primitive      | f64           | f64                        | [global]
u0:15 | Primitive      | bool          | bool                       | [global]
u0:16 | Primitive      | char          | char                       | [global]
u0:17 | Primitive      | str           | str                        | [global]
u0:18 | Primitive      | String        | String                     | [global]
u0:19 | Crate          | _c            | _c                         | [global]
u0:20 | Crate          | crate         | _c::crate                  |
u0:21 | File           | main          | _c::main                   |
u0:22 | Trait          | Database      | _c::main::Database         | [global]
u0:23 | TypeAlias      | F             | _c::main::Database::F      |
u0:24 | TypeParameter  | D             | _c::main::Database::D      |
u0:25 | UnresolvedType | Foo           | _c::main::Foo              |
u0:26 | TypeAlias      | F             | _c::main::Foo::F           |
u0:27 | TypeParameter  | D             | _c::main::Foo::D           |
u0:28 | Function       | use_database1 | _c::main::use_database1    |
u0:29 | TypeParameter  | D             | _c::main::use_database1::D |
u0:30 | Function       | use_database2 | _c::main::use_database2    |
u0:31 | TypeParameter  | D             | _c::main::use_database2::D |

--- expect:symbol-deps ---
u0:22 -> [u0:23]
u0:22 <- [u0:25, u0:28, u0:30]
u0:23 <- [u0:22]
u0:25 -> [u0:22, u0:26]
u0:26 <- [u0:25]
u0:28 -> [u0:22]
u0:30 -> [u0:22]


===============================================================================
higher-ranked-types-basic
===============================================================================


--- file: src/main.rs ---
struct AddAssign<T>;

trait T: for<'a> AddAssign<&'a usize> {
}

type FnObject<'b> = dyn for<'a> FnLike<&'a isize, &'a isize> + 'b;

--- expect:symbols ---
u0:1  | Primitive     | i32       | i32                    | [global]
u0:2  | Primitive     | i64       | i64                    | [global]
u0:3  | Primitive     | i16       | i16                    | [global]
u0:4  | Primitive     | i8        | i8                     | [global]
u0:5  | Primitive     | i128      | i128                   | [global]
u0:6  | Primitive     | isize     | isize                  | [global]
u0:7  | Primitive     | u32       | u32                    | [global]
u0:8  | Primitive     | u64       | u64                    | [global]
u0:9  | Primitive     | u16       | u16                    | [global]
u0:10 | Primitive     | u8        | u8                     | [global]
u0:11 | Primitive     | u128      | u128                   | [global]
u0:12 | Primitive     | usize     | usize                  | [global]
u0:13 | Primitive     | f32       | f32                    | [global]
u0:14 | Primitive     | f64       | f64                    | [global]
u0:15 | Primitive     | bool      | bool                   | [global]
u0:16 | Primitive     | char      | char                   | [global]
u0:17 | Primitive     | str       | str                    | [global]
u0:18 | Primitive     | String    | String                 | [global]
u0:19 | Crate         | _c        | _c                     | [global]
u0:20 | Crate         | crate     | _c::crate              |
u0:21 | File          | main      | _c::main               |
u0:22 | Struct        | AddAssign | _c::main::AddAssign    |
u0:23 | TypeParameter | T         | _c::main::AddAssign::T |
u0:24 | Trait         | T         | _c::main::T            |
u0:25 | TypeAlias     | FnObject  | _c::main::FnObject     |

--- expect:symbol-deps ---
u0:12 <- [u0:24]
u0:22 <- [u0:24]
u0:24 -> [u0:12, u0:22]


===============================================================================
higher-ranked-types-with-trait-bounds
===============================================================================


--- file: src/main.rs ---
trait Foo {};
trait Bar {};
trait Baz<T> {};

struct AddAssign<T: Foo, U: Baz<u32>>;

trait T: for<'a> AddAssign<&'a usize> {
}

type FnObject<'b> = dyn for<'a> FnLike<&'a isize, &'a isize> + 'b;

--- expect:symbols ---
u0:1  | Primitive     | i32       | i32                    | [global]
u0:2  | Primitive     | i64       | i64                    | [global]
u0:3  | Primitive     | i16       | i16                    | [global]
u0:4  | Primitive     | i8        | i8                     | [global]
u0:5  | Primitive     | i128      | i128                   | [global]
u0:6  | Primitive     | isize     | isize                  | [global]
u0:7  | Primitive     | u32       | u32                    | [global]
u0:8  | Primitive     | u64       | u64                    | [global]
u0:9  | Primitive     | u16       | u16                    | [global]
u0:10 | Primitive     | u8        | u8                     | [global]
u0:11 | Primitive     | u128      | u128                   | [global]
u0:12 | Primitive     | usize     | usize                  | [global]
u0:13 | Primitive     | f32       | f32                    | [global]
u0:14 | Primitive     | f64       | f64                    | [global]
u0:15 | Primitive     | bool      | bool                   | [global]
u0:16 | Primitive     | char      | char                   | [global]
u0:17 | Primitive     | str       | str                    | [global]
u0:18 | Primitive     | String    | String                 | [global]
u0:19 | Crate         | _c        | _c                     | [global]
u0:20 | Crate         | crate     | _c::crate              |
u0:21 | File          | main      | _c::main               |
u0:22 | Trait         | Foo       | _c::main::Foo          |
u0:23 | Trait         | Bar       | _c::main::Bar          |
u0:24 | Trait         | Baz       | _c::main::Baz          |
u0:25 | TypeParameter | T         | _c::main::Baz::T       |
u0:26 | Struct        | AddAssign | _c::main::AddAssign    |
u0:27 | TypeParameter | T         | _c::main::AddAssign::T |
u0:28 | TypeParameter | U         | _c::main::AddAssign::U |
u0:29 | Trait         | T         | _c::main::T            |
u0:30 | TypeAlias     | FnObject  | _c::main::FnObject     |

--- expect:symbol-deps ---
u0:12 <- [u0:29]
u0:22 <- [u0:26]
u0:24 <- [u0:26]
u0:26 -> [u0:22, u0:24, u0:7]
u0:26 <- [u0:29]
u0:29 -> [u0:12, u0:26]
u0:7 <- [u0:26]


===============================================================================
visibility-modifiers
===============================================================================


--- file: src/main.rs ---
pub fn a() {}
pub(super) fn b() {}
pub(self) fn c() {}
pub(crate) fn c() {}
pub(in crate::d) fn e() {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32         | [global]
u0:2  | Primitive | i64    | i64         | [global]
u0:3  | Primitive | i16    | i16         | [global]
u0:4  | Primitive | i8     | i8          | [global]
u0:5  | Primitive | i128   | i128        | [global]
u0:6  | Primitive | isize  | isize       | [global]
u0:7  | Primitive | u32    | u32         | [global]
u0:8  | Primitive | u64    | u64         | [global]
u0:9  | Primitive | u16    | u16         | [global]
u0:10 | Primitive | u8     | u8          | [global]
u0:11 | Primitive | u128   | u128        | [global]
u0:12 | Primitive | usize  | usize       | [global]
u0:13 | Primitive | f32    | f32         | [global]
u0:14 | Primitive | f64    | f64         | [global]
u0:15 | Primitive | bool   | bool        | [global]
u0:16 | Primitive | char   | char        | [global]
u0:17 | Primitive | str    | str         | [global]
u0:18 | Primitive | String | String      | [global]
u0:19 | Crate     | _c     | _c          | [global]
u0:20 | Crate     | crate  | _c::crate   |
u0:21 | File      | main   | _c::main    |
u0:22 | Function  | a      | _c::main::a | [global]
u0:23 | Function  | b      | _c::main::b | [global]
u0:24 | Function  | c      | _c::main::c | [global]
u0:25 | Function  | e      | _c::main::e | [global]

--- expect:symbol-deps ---


===============================================================================
function-parameter-names-that-match-built-in-type-names
===============================================================================


--- file: src/main.rs ---
fn foo(str: *const c_char) {}
fn bar(bool: bool) {}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                 | [global]
u0:2  | Primitive | i64    | i64                 | [global]
u0:3  | Primitive | i16    | i16                 | [global]
u0:4  | Primitive | i8     | i8                  | [global]
u0:5  | Primitive | i128   | i128                | [global]
u0:6  | Primitive | isize  | isize               | [global]
u0:7  | Primitive | u32    | u32                 | [global]
u0:8  | Primitive | u64    | u64                 | [global]
u0:9  | Primitive | u16    | u16                 | [global]
u0:10 | Primitive | u8     | u8                  | [global]
u0:11 | Primitive | u128   | u128                | [global]
u0:12 | Primitive | usize  | usize               | [global]
u0:13 | Primitive | f32    | f32                 | [global]
u0:14 | Primitive | f64    | f64                 | [global]
u0:15 | Primitive | bool   | bool                | [global]
u0:16 | Primitive | char   | char                | [global]
u0:17 | Primitive | str    | str                 | [global]
u0:18 | Primitive | String | String              | [global]
u0:19 | Crate     | _c     | _c                  | [global]
u0:20 | Crate     | crate  | _c::crate           |
u0:21 | File      | main   | _c::main            |
u0:22 | Function  | foo    | _c::main::foo       |
u0:23 | Variable  | str    | _c::main::foo::str  |
u0:24 | Function  | bar    | _c::main::bar       |
u0:25 | Variable  | bool   | _c::main::bar::bool |

--- expect:symbol-deps ---
u0:15 <- [u0:24, u0:25]
u0:24 -> [u0:15]
u0:25 -> [u0:15]


===============================================================================
where-clauses
===============================================================================


--- file: src/main.rs ---
fn walk<F>(&self, it: &mut F) -> bool
    where F: FnMut(&Pat) -> bool
{
  return false
}

impl<'a, T: 'a + Item> Iterator for Iter<'a, T> where Self: 'a {
}

impl<T> A for B<T>
    where C<T>: D,
          T: 'c,
          'c: 'b,
{
}

impl<'a, E> Read
where &'a E: Read,
{
}

impl<T> A for B<T> where (T, T, T): C, {}

impl<T> A for B<T>
    where for<'a> D<T>: E<'a>,
{
}

pub trait A<B> where B: C,
{
}

struct Foo;

fn foo<A>() where A: Foo + As<f64>, f64: As<A> {}

impl<A> Default for B<A> where *mut A: C + D {}

--- expect:symbols ---
u0:1  | Primitive      | i32      | i32                | [global]
u0:2  | Primitive      | i64      | i64                | [global]
u0:3  | Primitive      | i16      | i16                | [global]
u0:4  | Primitive      | i8       | i8                 | [global]
u0:5  | Primitive      | i128     | i128               | [global]
u0:6  | Primitive      | isize    | isize              | [global]
u0:7  | Primitive      | u32      | u32                | [global]
u0:8  | Primitive      | u64      | u64                | [global]
u0:9  | Primitive      | u16      | u16                | [global]
u0:10 | Primitive      | u8       | u8                 | [global]
u0:11 | Primitive      | u128     | u128               | [global]
u0:12 | Primitive      | usize    | usize              | [global]
u0:13 | Primitive      | f32      | f32                | [global]
u0:14 | Primitive      | f64      | f64                | [global]
u0:15 | Primitive      | bool     | bool               | [global]
u0:16 | Primitive      | char     | char               | [global]
u0:17 | Primitive      | str      | str                | [global]
u0:18 | Primitive      | String   | String             | [global]
u0:19 | Crate          | _c       | _c                 | [global]
u0:20 | Crate          | crate    | _c::crate          |
u0:21 | File           | main     | _c::main           |
u0:22 | Function       | walk     | _c::main::walk     |
u0:23 | TypeParameter  | F        | _c::main::walk::F  |
u0:24 | Variable       | it       | _c::main::walk::it |
u0:25 | UnresolvedType | Iterator | _c::main::Iterator |
u0:26 | UnresolvedType | Iter     | _c::main::Iter     |
u0:27 | TypeParameter  | T        | _c::main::Iter::T  |
u0:28 | Trait          | A        | _c::main::A        | [global]
u0:29 | UnresolvedType | B        | _c::main::B        |
u0:30 | TypeParameter  | T        | _c::main::B::T     |
u0:31 | UnresolvedType | Read     | _c::main::Read     |
u0:32 | TypeParameter  | E        | _c::main::Read::E  |
u0:33 | TypeParameter  | T        | _c::main::B::T     |
u0:34 | TypeParameter  | T        | _c::main::B::T     |
u0:35 | TypeParameter  | B        | _c::main::A::B     |
u0:36 | Struct         | Foo      | _c::main::Foo      |
u0:37 | Function       | foo      | _c::main::foo      |
u0:38 | TypeParameter  | A        | _c::main::foo::A   |
u0:39 | UnresolvedType | Default  | _c::main::Default  |
u0:40 | TypeParameter  | A        | _c::main::B::A     |

--- expect:symbol-deps ---
u0:14 <- [u0:37]
u0:15 <- [u0:22]
u0:22 -> [u0:15]
u0:28 <- [u0:29]
u0:29 -> [u0:28]
u0:36 <- [u0:37]
u0:37 -> [u0:14, u0:36]


===============================================================================
external-modules
===============================================================================


--- file: src/main.rs ---
extern {
  pub fn napi_module_register(mod_: *mut napi_module);
}

extern "C" {}

unsafe extern "C" {}

--- expect:symbols ---
u0:1  | Primitive | i32                  | i32                                  | [global]
u0:2  | Primitive | i64                  | i64                                  | [global]
u0:3  | Primitive | i16                  | i16                                  | [global]
u0:4  | Primitive | i8                   | i8                                   | [global]
u0:5  | Primitive | i128                 | i128                                 | [global]
u0:6  | Primitive | isize                | isize                                | [global]
u0:7  | Primitive | u32                  | u32                                  | [global]
u0:8  | Primitive | u64                  | u64                                  | [global]
u0:9  | Primitive | u16                  | u16                                  | [global]
u0:10 | Primitive | u8                   | u8                                   | [global]
u0:11 | Primitive | u128                 | u128                                 | [global]
u0:12 | Primitive | usize                | usize                                | [global]
u0:13 | Primitive | f32                  | f32                                  | [global]
u0:14 | Primitive | f64                  | f64                                  | [global]
u0:15 | Primitive | bool                 | bool                                 | [global]
u0:16 | Primitive | char                 | char                                 | [global]
u0:17 | Primitive | str                  | str                                  | [global]
u0:18 | Primitive | String               | String                               | [global]
u0:19 | Crate     | _c                   | _c                                   | [global]
u0:20 | Crate     | crate                | _c::crate                            |
u0:21 | File      | main                 | _c::main                             |
u0:22 | Function  | napi_module_register | _c::main::napi_module_register       | [global]
u0:23 | Variable  | mod_                 | _c::main::napi_module_register::mod_ |

--- expect:symbol-deps ---


===============================================================================
crate-visibility
===============================================================================


--- file: src/main.rs ---
crate mod foo;
crate struct Foo(crate crate::Bar);
crate fn foo() { }
crate const X: u32 = 0;

--- expect:symbols ---
u0:1  | Primitive | i32    | i32           | [global]
u0:2  | Primitive | i64    | i64           | [global]
u0:3  | Primitive | i16    | i16           | [global]
u0:4  | Primitive | i8     | i8            | [global]
u0:5  | Primitive | i128   | i128          | [global]
u0:6  | Primitive | isize  | isize         | [global]
u0:7  | Primitive | u32    | u32           | [global]
u0:8  | Primitive | u64    | u64           | [global]
u0:9  | Primitive | u16    | u16           | [global]
u0:10 | Primitive | u8     | u8            | [global]
u0:11 | Primitive | u128   | u128          | [global]
u0:12 | Primitive | usize  | usize         | [global]
u0:13 | Primitive | f32    | f32           | [global]
u0:14 | Primitive | f64    | f64           | [global]
u0:15 | Primitive | bool   | bool          | [global]
u0:16 | Primitive | char   | char          | [global]
u0:17 | Primitive | str    | str           | [global]
u0:18 | Primitive | String | String        | [global]
u0:19 | Crate     | _c     | _c            | [global]
u0:20 | Crate     | crate  | _c::crate     |
u0:21 | File      | main   | _c::main      |
u0:22 | Struct    | Foo    | _c::main::Foo |
u0:23 | Function  | foo    | _c::main::foo |
u0:24 | Const     | X      | _c::main::X   |

--- expect:symbol-deps ---
u0:24 -> [u0:7]
u0:7 <- [u0:24]


===============================================================================
reserved-keywords-in-path
===============================================================================


--- file: src/main.rs ---
struct B;
struct C;

struct A {
  a: default::B,
  b: union::C,
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32            | [global]
u0:2  | Primitive | i64    | i64            | [global]
u0:3  | Primitive | i16    | i16            | [global]
u0:4  | Primitive | i8     | i8             | [global]
u0:5  | Primitive | i128   | i128           | [global]
u0:6  | Primitive | isize  | isize          | [global]
u0:7  | Primitive | u32    | u32            | [global]
u0:8  | Primitive | u64    | u64            | [global]
u0:9  | Primitive | u16    | u16            | [global]
u0:10 | Primitive | u8     | u8             | [global]
u0:11 | Primitive | u128   | u128           | [global]
u0:12 | Primitive | usize  | usize          | [global]
u0:13 | Primitive | f32    | f32            | [global]
u0:14 | Primitive | f64    | f64            | [global]
u0:15 | Primitive | bool   | bool           | [global]
u0:16 | Primitive | char   | char           | [global]
u0:17 | Primitive | str    | str            | [global]
u0:18 | Primitive | String | String         | [global]
u0:19 | Crate     | _c     | _c             | [global]
u0:20 | Crate     | crate  | _c::crate      |
u0:21 | File      | main   | _c::main       |
u0:22 | Struct    | B      | _c::main::B    |
u0:23 | Struct    | C      | _c::main::C    |
u0:24 | Struct    | A      | _c::main::A    |
u0:25 | Field     | a      | _c::main::A::a |
u0:26 | Field     | b      | _c::main::A::b |

--- expect:symbol-deps ---
u0:22 <- [u0:24, u0:25]
u0:23 <- [u0:24, u0:26]
u0:24 -> [u0:22, u0:23]
u0:25 -> [u0:22]
u0:26 -> [u0:23]


===============================================================================
array-constraint-in-where-clause
===============================================================================


--- file: src/main.rs ---
struct D;

fn foo<T>(val: D)
where
    [u8; 32]: From<T>,

{}

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32                | [global]
u0:2  | Primitive     | i64    | i64                | [global]
u0:3  | Primitive     | i16    | i16                | [global]
u0:4  | Primitive     | i8     | i8                 | [global]
u0:5  | Primitive     | i128   | i128               | [global]
u0:6  | Primitive     | isize  | isize              | [global]
u0:7  | Primitive     | u32    | u32                | [global]
u0:8  | Primitive     | u64    | u64                | [global]
u0:9  | Primitive     | u16    | u16                | [global]
u0:10 | Primitive     | u8     | u8                 | [global]
u0:11 | Primitive     | u128   | u128               | [global]
u0:12 | Primitive     | usize  | usize              | [global]
u0:13 | Primitive     | f32    | f32                | [global]
u0:14 | Primitive     | f64    | f64                | [global]
u0:15 | Primitive     | bool   | bool               | [global]
u0:16 | Primitive     | char   | char               | [global]
u0:17 | Primitive     | str    | str                | [global]
u0:18 | Primitive     | String | String             | [global]
u0:19 | Crate         | _c     | _c                 | [global]
u0:20 | Crate         | crate  | _c::crate          |
u0:21 | File          | main   | _c::main           |
u0:22 | Struct        | D      | _c::main::D        |
u0:23 | Function      | foo    | _c::main::foo      |
u0:24 | TypeParameter | T      | _c::main::foo::T   |
u0:25 | Variable      | val    | _c::main::foo::val |

--- expect:symbol-deps ---
u0:10 <- [u0:23]
u0:22 <- [u0:23, u0:25]
u0:23 -> [u0:10, u0:22]
u0:25 -> [u0:22]


===============================================================================
const-generics-with-default
===============================================================================


--- file: src/main.rs ---
pub struct Loaf<T: Sized, const N: usize = 1>([T; N]);

--- expect:symbols ---
u0:1  | Primitive     | i32    | i32               | [global]
u0:2  | Primitive     | i64    | i64               | [global]
u0:3  | Primitive     | i16    | i16               | [global]
u0:4  | Primitive     | i8     | i8                | [global]
u0:5  | Primitive     | i128   | i128              | [global]
u0:6  | Primitive     | isize  | isize             | [global]
u0:7  | Primitive     | u32    | u32               | [global]
u0:8  | Primitive     | u64    | u64               | [global]
u0:9  | Primitive     | u16    | u16               | [global]
u0:10 | Primitive     | u8     | u8                | [global]
u0:11 | Primitive     | u128   | u128              | [global]
u0:12 | Primitive     | usize  | usize             | [global]
u0:13 | Primitive     | f32    | f32               | [global]
u0:14 | Primitive     | f64    | f64               | [global]
u0:15 | Primitive     | bool   | bool              | [global]
u0:16 | Primitive     | char   | char              | [global]
u0:17 | Primitive     | str    | str               | [global]
u0:18 | Primitive     | String | String            | [global]
u0:19 | Crate         | _c     | _c                | [global]
u0:20 | Crate         | crate  | _c::crate         |
u0:21 | File          | main   | _c::main          |
u0:22 | Struct        | Loaf   | _c::main::Loaf    | [global]
u0:23 | TypeParameter | T      | _c::main::Loaf::T |
u0:24 | Const         | N      | _c::main::Loaf::N |

--- expect:symbol-deps ---
u0:12 <- [u0:22, u0:24]
u0:22 -> [u0:12, u0:24]
u0:24 -> [u0:12]
u0:24 <- [u0:22]


===============================================================================
impl-multiple-structs-with-new
===============================================================================
Tests that multiple impl blocks each get their own `new` function symbol.
Main should depend on all three structs and their respective `new` functions.

--- file: src/main.rs ---
pub struct CreateTaskUseCase {
    gateway: i32,
}

impl CreateTaskUseCase {
    pub fn new(gateway: i32) -> Self {
        CreateTaskUseCase { gateway }
    }
}

pub struct CompleteTaskUseCase {
    gateway: i32,
}

impl CompleteTaskUseCase {
    pub fn new(gateway: i32) -> Self {
        CompleteTaskUseCase { gateway }
    }
}

pub struct ListTasksUseCase {
    gateway: i32,
}

impl ListTasksUseCase {
    pub fn new(gateway: i32) -> Self {
        ListTasksUseCase { gateway }
    }
}

fn main() {
    let create = CreateTaskUseCase::new(1);
    let complete = CompleteTaskUseCase::new(2);
    let list = ListTasksUseCase::new(3);
}

--- expect:symbols ---
u0:1 | Primitive | i32 | i32 | [global]
u0:2 | Primitive | i64 | i64 | [global]
u0:3 | Primitive | i16 | i16 | [global]
u0:4 | Primitive | i8 | i8 | [global]
u0:5 | Primitive | i128 | i128 | [global]
u0:6 | Primitive | isize | isize | [global]
u0:7 | Primitive | u32 | u32 | [global]
u0:8 | Primitive | u64 | u64 | [global]
u0:9 | Primitive | u16 | u16 | [global]
u0:10 | Primitive | u8 | u8 | [global]
u0:11 | Primitive | u128 | u128 | [global]
u0:12 | Primitive | usize | usize | [global]
u0:13 | Primitive | f32 | f32 | [global]
u0:14 | Primitive | f64 | f64 | [global]
u0:15 | Primitive | bool | bool | [global]
u0:16 | Primitive | char | char | [global]
u0:17 | Primitive | str | str | [global]
u0:18 | Primitive | String | String | [global]
u0:19 | Crate | _c | _c | [global]
u0:20 | Crate | crate | _c::crate |
u0:21 | File | main | _c::main |
u0:22 | Struct | CreateTaskUseCase | _c::main::CreateTaskUseCase | [global]
u0:23 | Field | gateway | _c::main::CreateTaskUseCase::gateway |
u0:24 | Function | new | _c::main::CreateTaskUseCase::new | [global]
u0:25 | Variable | gateway | _c::main::CreateTaskUseCase::new::gateway |
u0:26 | Struct | CompleteTaskUseCase | _c::main::CompleteTaskUseCase | [global]
u0:27 | Field | gateway | _c::main::CompleteTaskUseCase::gateway |
u0:28 | Function | new | _c::main::CompleteTaskUseCase::new | [global]
u0:29 | Variable | gateway | _c::main::CompleteTaskUseCase::new::gateway |
u0:30 | Struct | ListTasksUseCase | _c::main::ListTasksUseCase | [global]
u0:31 | Field | gateway | _c::main::ListTasksUseCase::gateway |
u0:32 | Function | new | _c::main::ListTasksUseCase::new | [global]
u0:33 | Variable | gateway | _c::main::ListTasksUseCase::new::gateway |
u0:34 | Function | main | _c::main::main |
u0:35 | Variable | create | _c::main::main::create |
u0:36 | Variable | complete | _c::main::main::complete |
u0:37 | Variable | list | _c::main::main::list |
