===============================================================================
tuple-struct-patterns
===============================================================================


--- file: src/main.rs ---
enum E {
  V1(i32, String),
  V2,
}

fn foo() {
  let x = E::V1(10, "hello".to_string());
  match x {
    E::V1(a, b) => "v1",
    E::V2 => "v2",
  }
}

--- expect:symbols ---
u0:1  | Primitive   | i32   | i32                  | [global]
u0:2  | Primitive   | i64   | i64                  | [global]
u0:3  | Primitive   | i16   | i16                  | [global]
u0:4  | Primitive   | i8    | i8                   | [global]
u0:5  | Primitive   | i128  | i128                 | [global]
u0:6  | Primitive   | isize | isize                | [global]
u0:7  | Primitive   | u32   | u32                  | [global]
u0:8  | Primitive   | u64   | u64                  | [global]
u0:9  | Primitive   | u16   | u16                  | [global]
u0:10 | Primitive   | u8    | u8                   | [global]
u0:11 | Primitive   | u128  | u128                 | [global]
u0:12 | Primitive   | usize | usize                | [global]
u0:13 | Primitive   | f32   | f32                  | [global]
u0:14 | Primitive   | f64   | f64                  | [global]
u0:15 | Primitive   | bool  | bool                 | [global]
u0:16 | Primitive   | char  | char                 | [global]
u0:17 | Primitive   | str   | str                  | [global]
u0:18 | Crate       | _c    | _c                   | [global]
u0:19 | Crate       | crate | _c::crate            |         
u0:20 | Module      | _m    | _c::_m               |         
u0:21 | File        | main  | _c::_m::main         |         
u0:22 | Enum        | E     | _c::_m::main::E      |         
u0:23 | EnumVariant | V1    | _c::_m::main::E::V1  |         
u0:24 | EnumVariant | V2    | _c::_m::main::E::V2  |         
u0:25 | Function    | foo   | _c::_m::main::foo    |         
u0:26 | Variable    | x     | _c::_m::main::foo::x |         

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23]
u0:22 -> [u0:1]
u0:22 <- [u0:25]
u0:23 -> [u0:1]
u0:23 <- [u0:25, u0:26]
u0:25 -> [u0:22, u0:23]
u0:26 -> [u0:23]


===============================================================================
reference-patterns
===============================================================================


--- file: src/main.rs ---
match x {
  A(ref x) => x.0,
  ref mut y => y,
  & mut  z => z,
}

--- expect:symbols ---
u0:1  | Primitive | i32   | i32          | [global]
u0:2  | Primitive | i64   | i64          | [global]
u0:3  | Primitive | i16   | i16          | [global]
u0:4  | Primitive | i8    | i8           | [global]
u0:5  | Primitive | i128  | i128         | [global]
u0:6  | Primitive | isize | isize        | [global]
u0:7  | Primitive | u32   | u32          | [global]
u0:8  | Primitive | u64   | u64          | [global]
u0:9  | Primitive | u16   | u16          | [global]
u0:10 | Primitive | u8    | u8           | [global]
u0:11 | Primitive | u128  | u128         | [global]
u0:12 | Primitive | usize | usize        | [global]
u0:13 | Primitive | f32   | f32          | [global]
u0:14 | Primitive | f64   | f64          | [global]
u0:15 | Primitive | bool  | bool         | [global]
u0:16 | Primitive | char  | char         | [global]
u0:17 | Primitive | str   | str          | [global]
u0:18 | Crate     | _c    | _c           | [global]
u0:19 | Crate     | crate | _c::crate    |         
u0:20 | Module    | _m    | _c::_m       |         
u0:21 | File      | main  | _c::_m::main |         

--- expect:symbol-deps ---


===============================================================================
struct-patterns
===============================================================================


--- file: src/main.rs ---
match x {
  Person{name, age} if age < 5 => ("toddler", name),
  Person{name: adult_name, age: _} => ("adult", adult_name),
}

match y {
  Bar::T1(_, Some::<isize>(x)) => println!("{x}"),
}

--- expect:symbols ---
u0:1  | Primitive | i32   | i32          | [global]
u0:2  | Primitive | i64   | i64          | [global]
u0:3  | Primitive | i16   | i16          | [global]
u0:4  | Primitive | i8    | i8           | [global]
u0:5  | Primitive | i128  | i128         | [global]
u0:6  | Primitive | isize | isize        | [global]
u0:7  | Primitive | u32   | u32          | [global]
u0:8  | Primitive | u64   | u64          | [global]
u0:9  | Primitive | u16   | u16          | [global]
u0:10 | Primitive | u8    | u8           | [global]
u0:11 | Primitive | u128  | u128         | [global]
u0:12 | Primitive | usize | usize        | [global]
u0:13 | Primitive | f32   | f32          | [global]
u0:14 | Primitive | f64   | f64          | [global]
u0:15 | Primitive | bool  | bool         | [global]
u0:16 | Primitive | char  | char         | [global]
u0:17 | Primitive | str   | str          | [global]
u0:18 | Crate     | _c    | _c           | [global]
u0:19 | Crate     | crate | _c::crate    |         
u0:20 | Module    | _m    | _c::_m       |         
u0:21 | File      | main  | _c::_m::main |         

--- expect:symbol-deps ---


===============================================================================
ignored-patterns
===============================================================================


--- file: src/main.rs ---
match x {
  (a, ..) => a,
  B(..) => c,
  D::E{f: g, ..} => g
}

--- expect:symbols ---
u0:1  | Primitive | i32   | i32          | [global]
u0:2  | Primitive | i64   | i64          | [global]
u0:3  | Primitive | i16   | i16          | [global]
u0:4  | Primitive | i8    | i8           | [global]
u0:5  | Primitive | i128  | i128         | [global]
u0:6  | Primitive | isize | isize        | [global]
u0:7  | Primitive | u32   | u32          | [global]
u0:8  | Primitive | u64   | u64          | [global]
u0:9  | Primitive | u16   | u16          | [global]
u0:10 | Primitive | u8    | u8           | [global]
u0:11 | Primitive | u128  | u128         | [global]
u0:12 | Primitive | usize | usize        | [global]
u0:13 | Primitive | f32   | f32          | [global]
u0:14 | Primitive | f64   | f64          | [global]
u0:15 | Primitive | bool  | bool         | [global]
u0:16 | Primitive | char  | char         | [global]
u0:17 | Primitive | str   | str          | [global]
u0:18 | Crate     | _c    | _c           | [global]
u0:19 | Crate     | crate | _c::crate    |         
u0:20 | Module    | _m    | _c::_m       |         
u0:21 | File      | main  | _c::_m::main |         

--- expect:symbol-deps ---


===============================================================================
captured-patterns
===============================================================================


--- file: src/main.rs ---
match x {
  a @ A(_) | b @ B(..) => a,
  a @ 1 ... 5 => a,
  Some(1 ... 5) => a,
  a @ b...c => a,
  a @ b..=c => a,
  d.. => a,
  ..d => d,
  a @ ..=5 => a
}

match name {
  | "IPV6_FLOWINFO"
  | "IPV6_FLOWLABEL_MGR"
  | "IPV6_FLOWINFO_SEND" => true,
  _ => false,
}

--- expect:symbol-deps ---


===============================================================================
or-patterns
===============================================================================


--- file: src/main.rs ---
struct Bar;
struct Foo;
struct Slice;
impl Slice {
    fn binary_search(&self, x: &i32) -> Option<Foo> {
      Some(Foo)
    }
}

fn func_1() {
  if let A(x) | B(x) = Bar::new() {
      do_stuff_with(x);
  }

  while let A(x) | B(x) = expr {
      do_stuff_with(x);
  }
  
  let slice = Slice::new();
  let f = slice.binary_search(&x);

  for ref a | b in c {}

  let Ok(x) | Err(x) = binary_search(x);

  for A | B | C in c {}

  |(Ok(x) | Err(x))| expr();

  let ref mut x @ (A | B | C);
}

fn func_2((1 | 2 | 3): u8) {}

if let x!() | y!() = () {}

--- expect:symbols ---
u0:1  | Primitive | i32           | i32                                   | [global]
u0:2  | Primitive | i64           | i64                                   | [global]
u0:3  | Primitive | i16           | i16                                   | [global]
u0:4  | Primitive | i8            | i8                                    | [global]
u0:5  | Primitive | i128          | i128                                  | [global]
u0:6  | Primitive | isize         | isize                                 | [global]
u0:7  | Primitive | u32           | u32                                   | [global]
u0:8  | Primitive | u64           | u64                                   | [global]
u0:9  | Primitive | u16           | u16                                   | [global]
u0:10 | Primitive | u8            | u8                                    | [global]
u0:11 | Primitive | u128          | u128                                  | [global]
u0:12 | Primitive | usize         | usize                                 | [global]
u0:13 | Primitive | f32           | f32                                   | [global]
u0:14 | Primitive | f64           | f64                                   | [global]
u0:15 | Primitive | bool          | bool                                  | [global]
u0:16 | Primitive | char          | char                                  | [global]
u0:17 | Primitive | str           | str                                   | [global]
u0:18 | Crate     | _c            | _c                                    | [global]
u0:19 | Crate     | crate         | _c::crate                             |         
u0:20 | Module    | _m            | _c::_m                                |         
u0:21 | File      | main          | _c::_m::main                          |         
u0:22 | Struct    | Bar           | _c::_m::main::Bar                     |         
u0:23 | Struct    | Foo           | _c::_m::main::Foo                     |         
u0:24 | Struct    | Slice         | _c::_m::main::Slice                   |         
u0:25 | Function  | binary_search | _c::_m::main::Slice::binary_search    |         
u0:26 | Variable  | x             | _c::_m::main::Slice::binary_search::x |         
u0:27 | Function  | func_1        | _c::_m::main::func_1                  |         
u0:28 | Variable  | slice         | _c::_m::main::func_1::slice           |         
u0:29 | Variable  | f             | _c::_m::main::func_1::f               |         
u0:30 | Variable  | Ok            | _c::_m::main::func_1::Ok              |         
u0:31 | Variable  | x             | _c::_m::main::func_1::x               |         
u0:32 | Variable  | Err           | _c::_m::main::func_1::Err             |         
u0:33 | Variable  | x             | _c::_m::main::func_1::x               |         
u0:34 | Variable  | x             | _c::_m::main::func_1::x               |         
u0:35 | Variable  | A             | _c::_m::main::func_1::A               |         
u0:36 | Variable  | B             | _c::_m::main::func_1::B               |         
u0:37 | Variable  | C             | _c::_m::main::func_1::C               |         
u0:38 | Function  | func_2        | _c::_m::main::func_2                  |         

--- expect:symbol-deps ---
u0:1 <- [u0:25, u0:26]
u0:22 <- [u0:27]
u0:23 <- [u0:25]
u0:24 <- [u0:27]
u0:25 -> [u0:1, u0:23]
u0:26 -> [u0:1]
u0:27 -> [u0:22, u0:24, u0:28, u0:34]
u0:28 <- [u0:27, u0:29]
u0:29 -> [u0:28]
u0:30 -> [u0:34]
u0:32 -> [u0:34]
u0:34 <- [u0:27, u0:30, u0:32]


===============================================================================
inline-const-or-const-blocks-as-pattern
===============================================================================


--- file: src/main.rs ---
fn foo(x: i32) {
    const CUBE: i32 = 3.pow(3);
    match x {
        CUBE => println!("three cubed"),
        _ => {}
    }
}

fn foo(x: i32) {
    match x {
        const { 3.pow(3) } => println!("three cubed"),
        _ => {}
    }
}

--- expect:symbols ---
u0:1  | Primitive | i32   | i32                     | [global]
u0:2  | Primitive | i64   | i64                     | [global]
u0:3  | Primitive | i16   | i16                     | [global]
u0:4  | Primitive | i8    | i8                      | [global]
u0:5  | Primitive | i128  | i128                    | [global]
u0:6  | Primitive | isize | isize                   | [global]
u0:7  | Primitive | u32   | u32                     | [global]
u0:8  | Primitive | u64   | u64                     | [global]
u0:9  | Primitive | u16   | u16                     | [global]
u0:10 | Primitive | u8    | u8                      | [global]
u0:11 | Primitive | u128  | u128                    | [global]
u0:12 | Primitive | usize | usize                   | [global]
u0:13 | Primitive | f32   | f32                     | [global]
u0:14 | Primitive | f64   | f64                     | [global]
u0:15 | Primitive | bool  | bool                    | [global]
u0:16 | Primitive | char  | char                    | [global]
u0:17 | Primitive | str   | str                     | [global]
u0:18 | Crate     | _c    | _c                      | [global]
u0:19 | Crate     | crate | _c::crate               |         
u0:20 | Module    | _m    | _c::_m                  |         
u0:21 | File      | main  | _c::_m::main            |         
u0:22 | Function  | foo   | _c::_m::main::foo       |         
u0:23 | Variable  | x     | _c::_m::main::foo::x    |         
u0:24 | Const     | CUBE  | _c::_m::main::foo::CUBE |         
u0:25 | Variable  | x     | _c::_m::main::foo::x    |         

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:23, u0:24, u0:25]
u0:22 -> [u0:1]
u0:23 -> [u0:1]
u0:24 -> [u0:1]
u0:25 -> [u0:1]


===============================================================================
pattern-with-turbofish
===============================================================================


--- file: src/main.rs ---
match y {
    None::<T> => 17,
    _ => 42,
}

--- expect:symbols ---
u0:1  | Primitive | i32   | i32          | [global]
u0:2  | Primitive | i64   | i64          | [global]
u0:3  | Primitive | i16   | i16          | [global]
u0:4  | Primitive | i8    | i8           | [global]
u0:5  | Primitive | i128  | i128         | [global]
u0:6  | Primitive | isize | isize        | [global]
u0:7  | Primitive | u32   | u32          | [global]
u0:8  | Primitive | u64   | u64          | [global]
u0:9  | Primitive | u16   | u16          | [global]
u0:10 | Primitive | u8    | u8           | [global]
u0:11 | Primitive | u128  | u128         | [global]
u0:12 | Primitive | usize | usize        | [global]
u0:13 | Primitive | f32   | f32          | [global]
u0:14 | Primitive | f64   | f64          | [global]
u0:15 | Primitive | bool  | bool         | [global]
u0:16 | Primitive | char  | char         | [global]
u0:17 | Primitive | str   | str          | [global]
u0:18 | Crate     | _c    | _c           | [global]
u0:19 | Crate     | crate | _c::crate    |         
u0:20 | Module    | _m    | _c::_m       |         
u0:21 | File      | main  | _c::_m::main |         

--- expect:symbol-deps ---
