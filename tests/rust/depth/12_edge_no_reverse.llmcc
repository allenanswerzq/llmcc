===============================================================================
edge-no-reverse-dependency
===============================================================================
Test that there are NO reverse edges at crate level.
When app depends on types, there should NOT be types -> app edge.
This guards against false bidirectional edges in crate graphs.

--- file: types/Cargo.toml ---
[package]
name = "types"

--- file: types/src/lib.rs ---
/// Types crate has no dependency on app
pub struct Data {
    pub value: u32,
}

pub trait Handler {
    fn handle(&self, data: &Data);
}

--- file: app/Cargo.toml ---
[package]
name = "app"

[dependencies]
types = { path = "../types" }

--- file: app/src/lib.rs ---
use types::{Data, Handler};

/// App uses types from types crate
pub struct DataProcessor {
    pub data: Data,
}

/// App implements trait from types crate
pub struct MyHandler;

impl Handler for MyHandler {
    fn handle(&self, data: &Data) {
        let _ = data.value;
    }
}

/// App calls function that takes types parameter
pub fn process(data: &Data) -> u32 {
    data.value
}

--- expect:arch-graph-depth-3 ---
digraph architecture {
  rankdir=TB;
  ranksep=0.6;
  nodesep=0.3;
  splines=ortho;
  compound=true;

  node [shape=box, style=rounded];
  edge [arrowsize=0.7];

  subgraph cluster_app {
    label="app";
    bgcolor="#f8f8f8";

    subgraph cluster_lib_rs {
      label="lib.rs";
      bgcolor="#fafafa";

      n16[label="process", full_path="$TMP/app/src/lib.rs:18", sym_ty="Function", shape=ellipse];
      n9[label="DataProcessor", full_path="$TMP/app/src/lib.rs:4", sym_ty="Struct", shape=box];
      n11[label="MyHandler", full_path="$TMP/app/src/lib.rs:9", sym_ty="Struct", shape=box];
    }

  }

  subgraph cluster_types {
    label="types";
    bgcolor="#f8f8f8";

    subgraph cluster_lib_rs {
      label="lib.rs";
      bgcolor="#fafafa";

      n2[label="Data", full_path="$TMP/types/src/lib.rs:2", sym_ty="Struct", shape=box];
      n4[label="Handler", full_path="$TMP/types/src/lib.rs:6", sym_ty="Trait", shape=box];
    }

  }


  n2 -> n9 [from="field_type", to="struct"];
  n2 -> n16 [from="input", to="func"];
  n4 -> n11 [from="trait", to="impl"];
}

--- expect:arch-graph-depth-2 ---
digraph architecture {
  rankdir=TB;
  ranksep=0.8;
  nodesep=0.4;
  splines=ortho;
  concentrate=true;

  node [shape=box, style="rounded,filled", fillcolor="#f0f0f0", fontname="Helvetica"];
  edge [color="#666666", arrowsize=0.7];

  labelloc=t;
  fontsize=16;

  mod_app_lib[label="app::lib", folder="$TMP/app/src"];
  mod_types_lib[label="types::lib", folder="$TMP/types/src"];

  mod_app_lib -> mod_types_lib;
}

--- expect:arch-graph-depth-1 ---
digraph architecture {
  rankdir=TB;
  ranksep=0.8;
  nodesep=0.4;
  splines=ortho;
  concentrate=true;

  node [shape=box, style="rounded,filled", fillcolor="#f0f0f0", fontname="Helvetica"];
  edge [color="#666666", arrowsize=0.7];

  labelloc=t;
  fontsize=16;

  crate_app[label="app", folder="$TMP/app"];
  crate_types[label="types", folder="$TMP/types"];

  crate_app -> crate_types;
}
