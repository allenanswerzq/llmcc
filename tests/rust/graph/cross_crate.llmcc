===============================================================================
workspace-crate-dependency
===============================================================================
Tests cross-crate dependencies: core defines types/traits, domain uses core, app orchestrates both.

--- file: crates/core/src/lib.rs ---
pub mod types;
pub mod traits;

pub use types::*;
pub use traits::*;

--- file: crates/core/src/types.rs ---
#[derive(Clone, Debug)]
pub struct Id(pub u64);

#[derive(Clone, Debug)]
pub struct Timestamp(pub u64);

#[derive(Clone, Debug)]
pub struct Money {
    pub cents: i64,
    pub currency: String,
}

impl Money {
    pub fn new(cents: i64, currency: &str) -> Self {
        Money { cents, currency: currency.to_string() }
    }

    pub fn usd(cents: i64) -> Self {
        Money::new(cents, "USD")
    }
}

--- file: crates/core/src/traits.rs ---
use super::types::Id;

pub trait Entity {
    fn id(&self) -> &Id;
}

pub trait Repository<T: Entity> {
    fn find(&self, id: &Id) -> Option<T>;
    fn save(&mut self, entity: T) -> Id;
}

--- file: crates/domain/src/lib.rs ---
// Depends on core crate
use core::{Id, Entity, Money};

pub mod user;
pub mod account;

pub use user::User;
pub use account::Account;

--- file: crates/domain/src/user.rs ---
use core::{Id, Entity};

pub struct User {
    id: Id,
    pub name: String,
    pub email: String,
}

impl User {
    pub fn new(id: u64, name: String, email: String) -> Self {
        User { id: Id(id), name, email }
    }
}

impl Entity for User {
    fn id(&self) -> &Id {
        &self.id
    }
}

--- file: crates/domain/src/account.rs ---
use core::{Id, Entity, Money};
use super::user::User;

pub struct Account {
    id: Id,
    pub user: User,
    pub balance: Money,
}

impl Account {
    pub fn new(id: u64, user: User) -> Self {
        Account {
            id: Id(id),
            user,
            balance: Money::usd(0),
        }
    }

    pub fn deposit(&mut self, amount: Money) {
        self.balance.cents += amount.cents;
    }

    pub fn withdraw(&mut self, amount: Money) -> bool {
        if self.balance.cents >= amount.cents {
            self.balance.cents -= amount.cents;
            true
        } else {
            false
        }
    }
}

impl Entity for Account {
    fn id(&self) -> &Id {
        &self.id
    }
}

--- file: crates/app/src/lib.rs ---
// Depends on both core and domain
use core::{Id, Repository};
use domain::{User, Account};

pub mod services;
pub mod repos;

--- file: crates/app/src/repos.rs ---
use core::{Id, Entity, Repository};
use domain::{User, Account};
use std::collections::HashMap;

pub struct UserRepo {
    users: HashMap<u64, User>,
    next_id: u64,
}

impl UserRepo {
    pub fn new() -> Self {
        UserRepo { users: HashMap::new(), next_id: 1 }
    }
}

impl Repository<User> for UserRepo {
    fn find(&self, id: &Id) -> Option<User> {
        self.users.get(&id.0).cloned()
    }

    fn save(&mut self, user: User) -> Id {
        let id = Id(self.next_id);
        self.next_id += 1;
        self.users.insert(id.0, user);
        id
    }
}

pub struct AccountRepo {
    accounts: HashMap<u64, Account>,
    next_id: u64,
}

impl AccountRepo {
    pub fn new() -> Self {
        AccountRepo { accounts: HashMap::new(), next_id: 1 }
    }
}

impl Repository<Account> for AccountRepo {
    fn find(&self, id: &Id) -> Option<Account> {
        self.accounts.get(&id.0).cloned()
    }

    fn save(&mut self, account: Account) -> Id {
        let id = Id(self.next_id);
        self.next_id += 1;
        self.accounts.insert(id.0, account);
        id
    }
}

--- file: crates/app/src/services.rs ---
use core::{Id, Money, Repository};
use domain::{User, Account};
use super::repos::{UserRepo, AccountRepo};

pub struct BankingService {
    users: UserRepo,
    accounts: AccountRepo,
}

impl BankingService {
    pub fn new() -> Self {
        BankingService {
            users: UserRepo::new(),
            accounts: AccountRepo::new(),
        }
    }

    pub fn create_user(&mut self, name: String, email: String) -> Id {
        let user = User::new(0, name, email);
        self.users.save(user)
    }

    pub fn open_account(&mut self, user_id: &Id) -> Option<Id> {
        let user = self.users.find(user_id)?;
        let account = Account::new(0, user);
        Some(self.accounts.save(account))
    }

    pub fn deposit(&mut self, account_id: &Id, amount: i64) -> bool {
        if let Some(mut account) = self.accounts.find(account_id) {
            account.deposit(Money::usd(amount));
            true
        } else {
            false
        }
    }
}

--- file: src/main.rs ---
// Binary crate depending on app
use app::services::BankingService;
use core::Money;

fn main() {
    let mut bank = BankingService::new();

    let user_id = bank.create_user("Alice".to_string(), "alice@bank.com".to_string());

    if let Some(account_id) = bank.open_account(&user_id) {
        bank.deposit(&account_id, 10000);  // $100.00
        println!("Account opened and funded!");
    }
}

--- expect:symbols ---
u0:1 | Primitive | i32 | i32 | [global]
u0:2 | Primitive | i64 | i64 | [global]
u0:3 | Primitive | i16 | i16 | [global]
u0:4 | Primitive | i8 | i8 | [global]
u0:5 | Primitive | i128 | i128 | [global]
u0:6 | Primitive | isize | isize | [global]
u0:7 | Primitive | u32 | u32 | [global]
u0:8 | Primitive | u64 | u64 | [global]
u0:9 | Primitive | u16 | u16 | [global]
u0:10 | Primitive | u8 | u8 | [global]
u0:11 | Primitive | u128 | u128 | [global]
u0:12 | Primitive | usize | usize | [global]
u0:13 | Primitive | f32 | f32 | [global]
u0:14 | Primitive | f64 | f64 | [global]
u0:15 | Primitive | bool | bool | [global]
u0:16 | Primitive | char | char | [global]
u0:17 | Primitive | str | str | [global]
u0:18 | Primitive | String | String | [global]
u0:19 | Crate | _c | _c | [global]
u0:20 | Crate | crate | _c::crate |
u0:21 | File | lib | _c::lib |
u1:22 | Crate | crate | _c::crate |
u1:23 | File | repos | _c::repos |
u1:24 | Struct | UserRepo | _c::repos::UserRepo | [global]
u1:25 | Field | users | _c::repos::UserRepo::users |
u1:26 | Field | next_id | _c::repos::UserRepo::next_id |
u1:27 | Function | new | _c::repos::UserRepo::new | [global]
u1:28 | UnresolvedType | Repository | _c::repos::Repository |
u1:29 | Function | find | _c::repos::UserRepo::find |
u1:30 | Variable | id | _c::repos::UserRepo::find::id |
u1:31 | Function | save | _c::repos::UserRepo::save |
u1:32 | Variable | user | _c::repos::UserRepo::save::user |
u1:33 | Variable | id | _c::repos::UserRepo::save::id |
u1:34 | Struct | AccountRepo | _c::repos::AccountRepo | [global]
u1:35 | Field | accounts | _c::repos::AccountRepo::accounts |
u1:36 | Field | next_id | _c::repos::AccountRepo::next_id |
u1:37 | Function | new | _c::repos::AccountRepo::new | [global]
u1:38 | Function | find | _c::repos::AccountRepo::find |
u1:39 | Variable | id | _c::repos::AccountRepo::find::id |
u1:40 | Function | save | _c::repos::AccountRepo::save |
u1:41 | Variable | account | _c::repos::AccountRepo::save::account |
u1:42 | Variable | id | _c::repos::AccountRepo::save::id |
u2:43 | Crate | crate | _c::crate |
u2:44 | File | services | _c::services |
u2:45 | Struct | BankingService | _c::services::BankingService | [global]
u2:46 | Field | users | _c::services::BankingService::users |
u2:47 | Field | accounts | _c::services::BankingService::accounts |
u2:48 | Function | new | _c::services::BankingService::new | [global]
u2:49 | Function | create_user | _c::services::BankingService::create_user | [global]
u2:50 | Variable | name | _c::services::BankingService::create_user::name |
u2:51 | Variable | email | _c::services::BankingService::create_user::email |
u2:52 | Variable | user | _c::services::BankingService::create_user::user |
u2:53 | Function | open_account | _c::services::BankingService::open_account | [global]
u2:54 | Variable | user_id | _c::services::BankingService::open_account::user_id |
u2:55 | Variable | user | _c::services::BankingService::open_account::user |
u2:56 | Variable | account | _c::services::BankingService::open_account::account |
u2:57 | Function | deposit | _c::services::BankingService::deposit | [global]
u2:58 | Variable | account_id | _c::services::BankingService::deposit::account_id |
u2:59 | Variable | amount | _c::services::BankingService::deposit::amount |
u3:60 | Crate | crate | _c::crate |
u3:61 | File | lib | _c::lib |
u4:62 | Crate | crate | _c::crate |
u4:63 | File | types | _c::types |
u4:64 | Struct | Id | _c::types::Id | [global]
u4:65 | Struct | Timestamp | _c::types::Timestamp | [global]
u4:66 | Struct | Money | _c::types::Money | [global]
u4:67 | Field | cents | _c::types::Money::cents |
u4:68 | Field | currency | _c::types::Money::currency |
u4:69 | Function | new | _c::types::Money::new | [global]
u4:70 | Variable | cents | _c::types::Money::new::cents |
u4:71 | Variable | currency | _c::types::Money::new::currency |
u4:72 | Function | usd | _c::types::Money::usd | [global]
u4:73 | Variable | cents | _c::types::Money::usd::cents |
u5:74 | Crate | crate | _c::crate |
u5:75 | File | traits | _c::traits |
u5:76 | Trait | Entity | _c::traits::Entity | [global]
u5:77 | Function | id | _c::traits::Entity::id |
u5:78 | Trait | Repository | _c::traits::Repository | [global]
u5:79 | TypeParameter | T | _c::traits::Repository::T |
u5:80 | Function | find | _c::traits::Repository::find |
u5:81 | Variable | id | _c::traits::Repository::find::id |
u5:82 | Function | save | _c::traits::Repository::save |
u5:83 | Variable | entity | _c::traits::Repository::save::entity |
u6:84 | Crate | crate | _c::crate |
u6:85 | File | lib | _c::lib |
u7:86 | Crate | crate | _c::crate |
u7:87 | File | user | _c::user |
u7:88 | Struct | User | _c::user::User | [global]
u7:89 | Field | id | _c::user::User::id |
u7:90 | Field | name | _c::user::User::name |
u7:91 | Field | email | _c::user::User::email |
u7:92 | Function | new | _c::user::User::new | [global]
u7:93 | Variable | id | _c::user::User::new::id |
u7:94 | Variable | name | _c::user::User::new::name |
u7:95 | Variable | email | _c::user::User::new::email |
u7:96 | UnresolvedType | Entity | _c::user::Entity |
u8:97 | Crate | crate | _c::crate |
u8:98 | File | account | _c::account |
u8:99 | Struct | Account | _c::account::Account | [global]
u8:100 | Field | id | _c::account::Account::id |
u8:101 | Field | user | _c::account::Account::user |
u8:102 | Field | balance | _c::account::Account::balance |
u8:103 | Function | new | _c::account::Account::new | [global]
u8:104 | Variable | id | _c::account::Account::new::id |
u8:105 | Variable | user | _c::account::Account::new::user |
u8:106 | Function | deposit | _c::account::Account::deposit | [global]
u8:107 | Variable | amount | _c::account::Account::deposit::amount |
u8:108 | Function | withdraw | _c::account::Account::withdraw | [global]
u8:109 | Variable | amount | _c::account::Account::withdraw::amount |
u8:110 | UnresolvedType | Entity | _c::account::Entity |
u9:111 | Crate | crate | _c::crate |
u9:112 | File | main | _c::main |
u9:113 | Function | main | _c::main::main |
u9:114 | Variable | bank | _c::main::main::bank |
u9:115 | Variable | user_id | _c::main::main::user_id |

--- expect:symbol-deps ---
u0:1 <- [u2:49, u2:52, u2:53, u2:56]
u0:15 <- [u2:57, u8:108]
u0:17 <- [u4:69, u4:69, u4:71]
u0:18 <- [u2:49, u2:50, u2:51, u4:66, u4:68, u7:88, u7:90, u7:91, u7:92, u7:94, u7:95]
u0:2 <- [u2:57, u2:57, u2:59, u4:66, u4:66, u4:67, u4:69, u4:69, u4:70, u4:72, u4:72, u4:73]
u0:8 <- [u1:24, u1:24, u1:26, u1:34, u1:34, u1:36, u4:64, u4:65, u7:92, u7:92, u7:93, u8:103, u8:103, u8:104]
u1:24 -> [u0:8, u0:8, u1:29, u1:31, u5:78, u7:88]
u1:24 <- [u1:27, u2:45, u2:46, u2:48, u2:53, u2:55]
u1:25 -> [u7:88]
u1:26 -> [u0:8]
u1:27 -> [u1:24]
u1:27 <- [u2:48]
u1:29 -> [u4:64, u7:88]
u1:29 <- [u1:24]
u1:30 -> [u4:64]
u1:31 -> [u4:64, u4:64, u7:88]
u1:31 <- [u1:24]
u1:32 -> [u7:88]
u1:33 -> [u4:64]
u1:34 -> [u0:8, u0:8, u1:38, u1:40, u5:78, u8:99]
u1:34 <- [u1:37, u2:45, u2:47, u2:48]
u1:35 -> [u8:99]
u1:36 -> [u0:8]
u1:37 -> [u1:34]
u1:37 <- [u2:48]
u1:38 -> [u4:64, u8:99]
u1:38 <- [u1:34]
u1:39 -> [u4:64]
u1:40 -> [u4:64, u4:64, u8:99]
u1:40 <- [u1:34]
u1:41 -> [u8:99]
u1:42 -> [u4:64]
u2:45 -> [u1:24, u1:34, u2:49, u2:53, u2:57]
u2:45 <- [u2:48, u9:113, u9:114, u9:115]
u2:46 -> [u1:24]
u2:47 -> [u1:34]
u2:48 -> [u1:24, u1:27, u1:34, u1:37, u2:45]
u2:48 <- [u9:113]
u2:49 -> [u0:1, u0:18, u4:64, u5:82, u7:88, u7:92]
u2:49 <- [u2:45, u9:113]
u2:50 -> [u0:18]
u2:51 -> [u0:18]
u2:52 -> [u0:1]
u2:53 -> [u0:1, u1:24, u4:64, u4:64, u5:80, u5:82, u8:103, u8:99]
u2:53 <- [u2:45, u9:113]
u2:54 -> [u4:64]
u2:55 -> [u1:24]
u2:56 -> [u0:1]
u2:57 -> [u0:15, u0:2, u0:2, u4:64, u4:66, u4:72, u4:72, u5:80]
u2:57 <- [u2:45]
u2:58 -> [u4:64]
u2:59 -> [u0:2]
u4:64 -> [u0:8]
u4:64 <- [u1:29, u1:30, u1:31, u1:31, u1:33, u1:38, u1:39, u1:40, u1:40, u1:42, u2:49, u2:53, u2:53, u2:54, u2:57, u2:58, u5:77, u5:80, u5:81, u5:82, u7:88, u7:89, u7:89, u8:100, u8:100, u8:99]
u4:65 -> [u0:8]
u4:66 -> [u0:18, u0:2, u0:2]
u4:66 <- [u2:57, u4:69, u4:72, u8:102, u8:103, u8:106, u8:107, u8:108, u8:109, u8:99]
u4:67 -> [u0:2]
u4:68 -> [u0:18]
u4:69 -> [u0:17, u0:17, u0:2, u0:2, u4:66]
u4:69 <- [u4:72]
u4:70 -> [u0:2]
u4:71 -> [u0:17]
u4:72 -> [u0:2, u0:2, u4:66, u4:69]
u4:72 <- [u2:57, u2:57, u8:103]
u4:73 -> [u0:2]
u5:76 -> [u5:77]
u5:76 <- [u5:78, u7:88, u8:99]
u5:77 -> [u4:64]
u5:77 <- [u5:76]
u5:78 -> [u5:76, u5:80, u5:82]
u5:78 <- [u1:24, u1:34]
u5:79 <- [u5:80]
u5:80 -> [u4:64, u5:79]
u5:80 <- [u2:53, u2:57, u5:78]
u5:81 -> [u4:64]
u5:82 -> [u4:64]
u5:82 <- [u2:49, u2:53, u5:78]
u7:88 -> [u0:18, u4:64, u5:76, u7:89]
u7:88 <- [u1:24, u1:25, u1:29, u1:31, u1:32, u2:49, u7:92, u8:101, u8:103, u8:105, u8:99]
u7:89 -> [u4:64, u4:64]
u7:89 <- [u7:88]
u7:90 -> [u0:18]
u7:91 -> [u0:18]
u7:92 -> [u0:18, u0:8, u0:8, u7:88]
u7:92 <- [u2:49]
u7:93 -> [u0:8]
u7:94 -> [u0:18]
u7:95 -> [u0:18]
u8:100 -> [u4:64, u4:64]
u8:100 <- [u8:99]
u8:101 -> [u7:88]
u8:102 -> [u4:66]
u8:103 -> [u0:8, u0:8, u4:66, u4:72, u7:88, u8:99]
u8:103 <- [u2:53]
u8:104 -> [u0:8]
u8:105 -> [u7:88]
u8:106 -> [u4:66]
u8:106 <- [u8:99, u9:113]
u8:107 -> [u4:66]
u8:108 -> [u0:15, u4:66]
u8:108 <- [u8:99]
u8:109 -> [u4:66]
u8:99 -> [u4:64, u4:66, u5:76, u7:88, u8:100, u8:106, u8:108]
u8:99 <- [u1:34, u1:35, u1:38, u1:40, u1:41, u2:53, u8:103]
u9:113 -> [u2:45, u2:48, u2:49, u2:53, u8:106]
u9:114 -> [u2:45]
u9:115 -> [u2:45]

--- expect:dep-graph ---
digraph project {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="account";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n44[label="Account", full_path="$TMP/crates/domain/src/account.rs:4"];
    }
    subgraph cluster_2 {
      label="main";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n52[label="main", full_path="$TMP/src/main.rs:5"];
    }
    subgraph cluster_3 {
      label="repos";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n9[label="AccountRepo", full_path="$TMP/crates/app/src/repos.rs:29"];
      n3[label="UserRepo", full_path="$TMP/crates/app/src/repos.rs:5"];
    }
    subgraph cluster_4 {
      label="services";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n16[label="BankingService", full_path="$TMP/crates/app/src/services.rs:5"];
    }
    subgraph cluster_5 {
      label="traits";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n31[label="Entity", full_path="$TMP/crates/core/src/traits.rs:3"];
      n33[label="Repository", full_path="$TMP/crates/core/src/traits.rs:7"];
    }
    subgraph cluster_6 {
      label="types";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n24[label="Id", full_path="$TMP/crates/core/src/types.rs:2"];
      n25[label="Timestamp", full_path="$TMP/crates/core/src/types.rs:5"];
      n26[label="Money", full_path="$TMP/crates/core/src/types.rs:8"];
    }
    subgraph cluster_7 {
      label="user";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n38[label="User", full_path="$TMP/crates/domain/src/user.rs:3"];
    }
  }
  n44 -> n31;
  n44 -> n24;
  n44 -> n26;
  n44 -> n38;
  n9 -> n44;
  n9 -> n33;
  n16 -> n9;
  n16 -> n3;
  n33 -> n31;
  n38 -> n31;
  n38 -> n24;
  n3 -> n33;
  n3 -> n38;
  n52 -> n16;
}

--- expect:arch-graph ---
digraph architecture {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="account";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n44[label="Account", full_path="$TMP/crates/domain/src/account.rs:4", sym_ty="Struct", shape=box];
    }
    subgraph cluster_2 {
      label="repos";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n9[label="AccountRepo", full_path="$TMP/crates/app/src/repos.rs:29", sym_ty="Struct", shape=box];
      n3[label="UserRepo", full_path="$TMP/crates/app/src/repos.rs:5", sym_ty="Struct", shape=box];
    }
    subgraph cluster_3 {
      label="services";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n16[label="BankingService", full_path="$TMP/crates/app/src/services.rs:5", sym_ty="Struct", shape=box];
    }
    subgraph cluster_4 {
      label="traits";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n31[label="Entity", full_path="$TMP/crates/core/src/traits.rs:3", sym_ty="Trait", shape=box];
      n33[label="Repository", full_path="$TMP/crates/core/src/traits.rs:7", sym_ty="Trait", shape=box];
    }
    subgraph cluster_5 {
      label="types";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n24[label="Id", full_path="$TMP/crates/core/src/types.rs:2", sym_ty="Struct", shape=box];
      n25[label="Timestamp", full_path="$TMP/crates/core/src/types.rs:5", sym_ty="Struct", shape=box];
      n26[label="Money", full_path="$TMP/crates/core/src/types.rs:8", sym_ty="Struct", shape=box];
    }
    subgraph cluster_6 {
      label="user";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n38[label="User", full_path="$TMP/crates/domain/src/user.rs:3", sym_ty="Struct", shape=box];
    }
  }
  n44 -> n24 [from="struct", to="field"];
  n44 -> n26 [from="struct", to="field"];
  n44 -> n38 [from="struct", to="field"];
  n9 -> n44 [from="struct", to="field"];
  n16 -> n9 [from="struct", to="field"];
  n16 -> n3 [from="struct", to="field"];
  n31 -> n44 [from="trait", to="impl"];
  n31 -> n33 [from="bound", to="generic"];
  n31 -> n38 [from="trait", to="impl"];
  n33 -> n9 [from="trait", to="impl"];
  n33 -> n3 [from="trait", to="impl"];
  n38 -> n24 [from="struct", to="field"];
  n3 -> n38 [from="struct", to="field"];
}


===============================================================================
plugin-architecture
===============================================================================
Tests plugin architecture: Plugin trait API, core registry, multiple plugin implementations.

--- file: src/lib.rs ---
pub mod plugin_api;
pub mod core;
pub mod plugins;

--- file: src/plugin_api/mod.rs ---
pub trait Plugin: Send + Sync {
    fn name(&self) -> &str;
    fn version(&self) -> &str;
    fn initialize(&mut self);
    fn shutdown(&mut self);
}

pub trait TextProcessor: Plugin {
    fn process(&self, input: &str) -> String;
}

pub trait Analyzer: Plugin {
    fn analyze(&self, input: &str) -> AnalysisResult;
}

pub struct AnalysisResult {
    pub word_count: usize,
    pub char_count: usize,
    pub line_count: usize,
}

--- file: src/core/mod.rs ---
use crate::plugin_api::{Plugin, TextProcessor, Analyzer};

pub struct PluginManager {
    processors: Vec<Box<dyn TextProcessor>>,
    analyzers: Vec<Box<dyn Analyzer>>,
}

impl PluginManager {
    pub fn new() -> Self {
        PluginManager {
            processors: Vec::new(),
            analyzers: Vec::new(),
        }
    }

    pub fn register_processor(&mut self, mut plugin: Box<dyn TextProcessor>) {
        plugin.initialize();
        println!("Registered processor: {} v{}", plugin.name(), plugin.version());
        self.processors.push(plugin);
    }

    pub fn register_analyzer(&mut self, mut plugin: Box<dyn Analyzer>) {
        plugin.initialize();
        println!("Registered analyzer: {} v{}", plugin.name(), plugin.version());
        self.analyzers.push(plugin);
    }

    pub fn process_text(&self, input: &str) -> String {
        let mut result = input.to_string();
        for processor in &self.processors {
            result = processor.process(&result);
        }
        result
    }

    pub fn shutdown(&mut self) {
        for processor in &mut self.processors {
            processor.shutdown();
        }
        for analyzer in &mut self.analyzers {
            analyzer.shutdown();
        }
    }
}

--- file: src/plugins/mod.rs ---
mod uppercase;
mod trimmer;
mod counter;

pub use uppercase::UppercasePlugin;
pub use trimmer::TrimmerPlugin;
pub use counter::CounterPlugin;

--- file: src/plugins/uppercase.rs ---
use crate::plugin_api::{Plugin, TextProcessor};

pub struct UppercasePlugin {
    initialized: bool,
}

impl UppercasePlugin {
    pub fn new() -> Self {
        UppercasePlugin { initialized: false }
    }
}

impl Plugin for UppercasePlugin {
    fn name(&self) -> &str { "Uppercase" }
    fn version(&self) -> &str { "1.0.0" }
    fn initialize(&mut self) { self.initialized = true; }
    fn shutdown(&mut self) { self.initialized = false; }
}

impl TextProcessor for UppercasePlugin {
    fn process(&self, input: &str) -> String {
        input.to_uppercase()
    }
}

--- file: src/plugins/trimmer.rs ---
use crate::plugin_api::{Plugin, TextProcessor};

pub struct TrimmerPlugin;

impl TrimmerPlugin {
    pub fn new() -> Self { TrimmerPlugin }
}

impl Plugin for TrimmerPlugin {
    fn name(&self) -> &str { "Trimmer" }
    fn version(&self) -> &str { "1.0.0" }
    fn initialize(&mut self) {}
    fn shutdown(&mut self) {}
}

impl TextProcessor for TrimmerPlugin {
    fn process(&self, input: &str) -> String {
        input.trim().to_string()
    }
}

--- file: src/plugins/counter.rs ---
use crate::plugin_api::{Plugin, Analyzer, AnalysisResult};

pub struct CounterPlugin;

impl CounterPlugin {
    pub fn new() -> Self { CounterPlugin }
}

impl Plugin for CounterPlugin {
    fn name(&self) -> &str { "Counter" }
    fn version(&self) -> &str { "1.0.0" }
    fn initialize(&mut self) {}
    fn shutdown(&mut self) {}
}

impl Analyzer for CounterPlugin {
    fn analyze(&self, input: &str) -> AnalysisResult {
        AnalysisResult {
            word_count: input.split_whitespace().count(),
            char_count: input.chars().count(),
            line_count: input.lines().count(),
        }
    }
}

--- file: src/main.rs ---
mod plugin_api;
mod core;
mod plugins;

use core::PluginManager;
use plugins::{UppercasePlugin, TrimmerPlugin, CounterPlugin};

fn main() {
    let mut manager = PluginManager::new();

    manager.register_processor(Box::new(TrimmerPlugin::new()));
    manager.register_processor(Box::new(UppercasePlugin::new()));
    manager.register_analyzer(Box::new(CounterPlugin::new()));

    let input = "  hello world  ";
    let processed = manager.process_text(input);
    println!("Processed: '{}'", processed);

    manager.shutdown();
}

--- expect:symbols ---
u0:1 | Primitive | i32 | i32 | [global]
u0:2 | Primitive | i64 | i64 | [global]
u0:3 | Primitive | i16 | i16 | [global]
u0:4 | Primitive | i8 | i8 | [global]
u0:5 | Primitive | i128 | i128 | [global]
u0:6 | Primitive | isize | isize | [global]
u0:7 | Primitive | u32 | u32 | [global]
u0:8 | Primitive | u64 | u64 | [global]
u0:9 | Primitive | u16 | u16 | [global]
u0:10 | Primitive | u8 | u8 | [global]
u0:11 | Primitive | u128 | u128 | [global]
u0:12 | Primitive | usize | usize | [global]
u0:13 | Primitive | f32 | f32 | [global]
u0:14 | Primitive | f64 | f64 | [global]
u0:15 | Primitive | bool | bool | [global]
u0:16 | Primitive | char | char | [global]
u0:17 | Primitive | str | str | [global]
u0:18 | Primitive | String | String | [global]
u0:19 | Crate | _c | _c | [global]
u0:20 | Crate | crate | _c::crate |
u0:21 | File | lib | _c::lib |
u1:22 | Crate | crate | _c::crate |
u1:23 | File | main | _c::main |
u1:24 | Function | main | _c::main::main |
u1:25 | Variable | manager | _c::main::main::manager |
u1:26 | Variable | input | _c::main::main::input |
u1:27 | Variable | processed | _c::main::main::processed |
u2:28 | Crate | crate | _c::crate |
u2:29 | Module | core | _c::core |
u2:30 | File | mod | _c::core::mod |
u2:31 | Struct | PluginManager | _c::core::mod::PluginManager | [global]
u2:32 | Field | processors | _c::core::mod::PluginManager::processors |
u2:33 | Field | analyzers | _c::core::mod::PluginManager::analyzers |
u2:34 | Function | new | _c::core::mod::PluginManager::new | [global]
u2:35 | Function | register_processor | _c::core::mod::PluginManager::register_processor | [global]
u2:36 | Variable | plugin | _c::core::mod::PluginManager::register_processor::plugin |
u2:37 | Function | register_analyzer | _c::core::mod::PluginManager::register_analyzer | [global]
u2:38 | Variable | plugin | _c::core::mod::PluginManager::register_analyzer::plugin |
u2:39 | Function | process_text | _c::core::mod::PluginManager::process_text | [global]
u2:40 | Variable | input | _c::core::mod::PluginManager::process_text::input |
u2:41 | Variable | result | _c::core::mod::PluginManager::process_text::result |
u2:42 | Function | shutdown | _c::core::mod::PluginManager::shutdown | [global]
u3:43 | Crate | crate | _c::crate |
u3:44 | Module | plugin_api | _c::plugin_api |
u3:45 | File | mod | _c::plugin_api::mod |
u3:46 | Trait | Plugin | _c::plugin_api::mod::Plugin | [global]
u3:47 | Function | name | _c::plugin_api::mod::Plugin::name |
u3:48 | Function | version | _c::plugin_api::mod::Plugin::version |
u3:49 | Function | initialize | _c::plugin_api::mod::Plugin::initialize |
u3:50 | Function | shutdown | _c::plugin_api::mod::Plugin::shutdown |
u3:51 | Trait | TextProcessor | _c::plugin_api::mod::TextProcessor | [global]
u3:52 | Function | process | _c::plugin_api::mod::TextProcessor::process |
u3:53 | Variable | input | _c::plugin_api::mod::TextProcessor::process::input |
u3:54 | Trait | Analyzer | _c::plugin_api::mod::Analyzer | [global]
u3:55 | Function | analyze | _c::plugin_api::mod::Analyzer::analyze |
u3:56 | Variable | input | _c::plugin_api::mod::Analyzer::analyze::input |
u3:57 | Struct | AnalysisResult | _c::plugin_api::mod::AnalysisResult | [global]
u3:58 | Field | word_count | _c::plugin_api::mod::AnalysisResult::word_count |
u3:59 | Field | char_count | _c::plugin_api::mod::AnalysisResult::char_count |
u3:60 | Field | line_count | _c::plugin_api::mod::AnalysisResult::line_count |
u4:61 | Crate | crate | _c::crate |
u4:62 | Module | plugins | _c::plugins |
u4:63 | File | mod | _c::plugins::mod |
u5:64 | Crate | crate | _c::crate |
u5:65 | Module | plugins | _c::plugins |
u5:66 | File | uppercase | _c::plugins::uppercase |
u5:67 | Struct | UppercasePlugin | _c::plugins::uppercase::UppercasePlugin | [global]
u5:68 | Field | initialized | _c::plugins::uppercase::UppercasePlugin::initialized |
u5:69 | Function | new | _c::plugins::uppercase::UppercasePlugin::new | [global]
u5:70 | UnresolvedType | Plugin | _c::plugins::uppercase::Plugin |
u5:71 | Function | name | _c::plugins::uppercase::UppercasePlugin::name |
u5:72 | Function | version | _c::plugins::uppercase::UppercasePlugin::version |
u5:73 | Function | initialize | _c::plugins::uppercase::UppercasePlugin::initialize |
u5:74 | Function | shutdown | _c::plugins::uppercase::UppercasePlugin::shutdown |
u5:75 | UnresolvedType | TextProcessor | _c::plugins::uppercase::TextProcessor |
u5:76 | Function | process | _c::plugins::uppercase::UppercasePlugin::process |
u5:77 | Variable | input | _c::plugins::uppercase::UppercasePlugin::process::input |
u6:78 | Crate | crate | _c::crate |
u6:79 | Module | plugins | _c::plugins |
u6:80 | File | trimmer | _c::plugins::trimmer |
u6:81 | Struct | TrimmerPlugin | _c::plugins::trimmer::TrimmerPlugin | [global]
u6:82 | Function | new | _c::plugins::trimmer::TrimmerPlugin::new | [global]
u6:83 | UnresolvedType | Plugin | _c::plugins::trimmer::Plugin |
u6:84 | Function | name | _c::plugins::trimmer::TrimmerPlugin::name |
u6:85 | Function | version | _c::plugins::trimmer::TrimmerPlugin::version |
u6:86 | Function | initialize | _c::plugins::trimmer::TrimmerPlugin::initialize |
u6:87 | Function | shutdown | _c::plugins::trimmer::TrimmerPlugin::shutdown |
u6:88 | UnresolvedType | TextProcessor | _c::plugins::trimmer::TextProcessor |
u6:89 | Function | process | _c::plugins::trimmer::TrimmerPlugin::process |
u6:90 | Variable | input | _c::plugins::trimmer::TrimmerPlugin::process::input |
u7:91 | Crate | crate | _c::crate |
u7:92 | Module | plugins | _c::plugins |
u7:93 | File | counter | _c::plugins::counter |
u7:94 | Struct | CounterPlugin | _c::plugins::counter::CounterPlugin | [global]
u7:95 | Function | new | _c::plugins::counter::CounterPlugin::new | [global]
u7:96 | UnresolvedType | Plugin | _c::plugins::counter::Plugin |
u7:97 | Function | name | _c::plugins::counter::CounterPlugin::name |
u7:98 | Function | version | _c::plugins::counter::CounterPlugin::version |
u7:99 | Function | initialize | _c::plugins::counter::CounterPlugin::initialize |
u7:100 | Function | shutdown | _c::plugins::counter::CounterPlugin::shutdown |
u7:101 | UnresolvedType | Analyzer | _c::plugins::counter::Analyzer |
u7:102 | Function | analyze | _c::plugins::counter::CounterPlugin::analyze |
u7:103 | Variable | input | _c::plugins::counter::CounterPlugin::analyze::input |

--- expect:symbol-deps ---
u0:12 <- [u3:57, u3:57, u3:58, u3:59, u3:60]
u0:15 <- [u5:67, u5:67, u5:68]
u0:17 <- [u1:24, u1:26, u2:39, u2:39, u2:40, u2:41, u3:47, u3:48, u3:52, u3:52, u3:53, u3:55, u3:55, u3:56, u5:71, u5:72, u5:76, u5:76, u5:77, u6:84, u6:85, u6:89, u6:89, u6:90, u7:102, u7:102, u7:103, u7:97, u7:98]
u0:18 <- [u2:39, u3:52, u5:76, u6:89]
u1:24 -> [u0:17, u2:31, u2:34, u2:35, u2:37, u2:39, u5:67, u5:69, u6:81, u6:82, u7:100, u7:94, u7:95]
u1:26 -> [u0:17]
u2:31 -> [u2:35, u2:37, u2:39, u2:42, u3:51, u3:54]
u2:31 <- [u1:24, u2:34]
u2:32 -> [u3:51]
u2:33 -> [u3:54]
u2:34 -> [u2:31]
u2:34 <- [u1:24]
u2:35 -> [u3:51, u5:69, u6:82, u7:99]
u2:35 <- [u1:24, u2:31]
u2:36 -> [u3:51]
u2:37 -> [u3:54, u7:95, u7:99]
u2:37 <- [u1:24, u2:31]
u2:38 -> [u3:54]
u2:39 -> [u0:17, u0:17, u0:18, u6:89]
u2:39 <- [u1:24, u2:31]
u2:40 -> [u0:17]
u2:41 -> [u0:17]
u2:42 <- [u2:31]
u3:46 -> [u3:47, u3:48, u3:49, u3:50]
u3:46 <- [u3:51, u3:54, u5:67, u6:81]
u3:47 -> [u0:17]
u3:47 <- [u3:46]
u3:48 -> [u0:17]
u3:48 <- [u3:46]
u3:49 <- [u3:46]
u3:50 <- [u3:46]
u3:51 -> [u3:46, u3:52]
u3:51 <- [u2:31, u2:32, u2:35, u2:36, u5:67, u6:81]
u3:52 -> [u0:17, u0:17, u0:18]
u3:52 <- [u3:51]
u3:53 -> [u0:17]
u3:54 -> [u3:46, u3:55]
u3:54 <- [u2:31, u2:33, u2:37, u2:38]
u3:55 -> [u0:17, u0:17, u3:57]
u3:55 <- [u3:54]
u3:56 -> [u0:17]
u3:57 -> [u0:12, u0:12]
u3:57 <- [u3:55, u7:102, u7:102]
u3:58 -> [u0:12]
u3:59 -> [u0:12]
u3:60 -> [u0:12]
u5:67 -> [u0:15, u0:15, u3:46, u3:51, u5:71, u5:72, u5:73, u5:74, u5:76]
u5:67 <- [u1:24, u5:69]
u5:68 -> [u0:15]
u5:69 -> [u5:67]
u5:69 <- [u1:24, u2:35]
u5:71 -> [u0:17]
u5:71 <- [u5:67]
u5:72 -> [u0:17]
u5:72 <- [u5:67]
u5:73 <- [u5:67]
u5:74 <- [u5:67]
u5:76 -> [u0:17, u0:17, u0:18]
u5:76 <- [u5:67]
u5:77 -> [u0:17]
u6:81 -> [u3:46, u3:51, u6:82, u6:84, u6:85, u6:86, u6:87, u6:89]
u6:81 <- [u1:24]
u6:82 <- [u1:24, u2:35, u6:81]
u6:84 -> [u0:17]
u6:84 <- [u6:81]
u6:85 -> [u0:17]
u6:85 <- [u6:81]
u6:86 <- [u6:81]
u6:87 <- [u6:81]
u6:89 -> [u0:17, u0:17, u0:18]
u6:89 <- [u2:39, u6:81]
u6:90 -> [u0:17]
u7:100 <- [u1:24, u7:94]
u7:102 -> [u0:17, u0:17, u3:57, u3:57]
u7:102 <- [u7:94]
u7:103 -> [u0:17]
u7:94 -> [u7:100, u7:102, u7:95, u7:97, u7:98, u7:99]
u7:94 <- [u1:24]
u7:95 <- [u1:24, u2:37, u7:94]
u7:97 -> [u0:17]
u7:97 <- [u7:94]
u7:98 -> [u0:17]
u7:98 <- [u7:94]
u7:99 <- [u2:35, u2:37, u7:94]

--- expect:dep-graph ---
digraph project {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="core";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n5[label="PluginManager", full_path="$TMP/src/core/mod.rs:3"];
    }
    subgraph cluster_2 {
      label="main";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n3[label="main", full_path="$TMP/src/main.rs:8"];
    }
    subgraph cluster_3 {
      label="plugin_api";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n13[label="Plugin", full_path="$TMP/src/plugin_api/mod.rs:1"];
      n20[label="Analyzer", full_path="$TMP/src/plugin_api/mod.rs:12"];
      n22[label="AnalysisResult", full_path="$TMP/src/plugin_api/mod.rs:16"];
      n18[label="TextProcessor", full_path="$TMP/src/plugin_api/mod.rs:8"];
    }
    subgraph cluster_4 {
      label="plugins";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n47[label="CounterPlugin", full_path="$TMP/src/plugins/counter.rs:3"];
      n36[label="TrimmerPlugin", full_path="$TMP/src/plugins/trimmer.rs:3"];
      n25[label="UppercasePlugin", full_path="$TMP/src/plugins/uppercase.rs:3"];
    }
  }
  n20 -> n13;
  n5 -> n20;
  n5 -> n18;
  n18 -> n13;
  n36 -> n13;
  n36 -> n18;
  n25 -> n13;
  n25 -> n18;
  n3 -> n47;
  n3 -> n5;
  n3 -> n36;
  n3 -> n25;
}

--- expect:arch-graph ---
digraph architecture {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="core";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n5[label="PluginManager", full_path="$TMP/src/core/mod.rs:3", sym_ty="Struct", shape=box];
    }
    subgraph cluster_2 {
      label="plugin_api";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n13[label="Plugin", full_path="$TMP/src/plugin_api/mod.rs:1", sym_ty="Trait", shape=box];
      n20[label="Analyzer", full_path="$TMP/src/plugin_api/mod.rs:12", sym_ty="Trait", shape=box];
      n22[label="AnalysisResult", full_path="$TMP/src/plugin_api/mod.rs:16", sym_ty="Struct", shape=box];
      n18[label="TextProcessor", full_path="$TMP/src/plugin_api/mod.rs:8", sym_ty="Trait", shape=box];
    }
    subgraph cluster_3 {
      label="plugins";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n47[label="CounterPlugin", full_path="$TMP/src/plugins/counter.rs:3", sym_ty="Struct", shape=box];
      n36[label="TrimmerPlugin", full_path="$TMP/src/plugins/trimmer.rs:3", sym_ty="Struct", shape=box];
      n25[label="UppercasePlugin", full_path="$TMP/src/plugins/uppercase.rs:3", sym_ty="Struct", shape=box];
    }
  }
  n13 -> n36 [from="trait", to="impl"];
  n13 -> n25 [from="trait", to="impl"];
  n5 -> n20 [from="struct", to="field"];
  n5 -> n18 [from="struct", to="field"];
  n18 -> n36 [from="trait", to="impl"];
  n18 -> n25 [from="trait", to="impl"];
}


===============================================================================
feature-flag-architecture
===============================================================================
Tests conditional compilation: cfg(feature) modules for json/xml/yaml serialization.

--- file: src/lib.rs ---
pub mod core;

#[cfg(feature = "json")]
pub mod json;

#[cfg(feature = "xml")]
pub mod xml;

#[cfg(feature = "yaml")]
pub mod yaml;

pub mod format {
    use super::core::Data;

    pub trait Formatter {
        fn format(&self, data: &Data) -> String;
        fn parse(&self, input: &str) -> Option<Data>;
    }

    #[cfg(feature = "json")]
    pub use super::json::JsonFormatter;

    #[cfg(feature = "xml")]
    pub use super::xml::XmlFormatter;

    #[cfg(feature = "yaml")]
    pub use super::yaml::YamlFormatter;
}

--- file: src/core.rs ---
#[derive(Clone, Debug)]
pub struct Data {
    pub fields: Vec<(String, Value)>,
}

#[derive(Clone, Debug)]
pub enum Value {
    Null,
    Bool(bool),
    Number(f64),
    String(String),
    Array(Vec<Value>),
}

impl Data {
    pub fn new() -> Self {
        Data { fields: Vec::new() }
    }

    pub fn set(&mut self, key: &str, value: Value) {
        self.fields.push((key.to_string(), value));
    }

    pub fn get(&self, key: &str) -> Option<&Value> {
        self.fields.iter().find(|(k, _)| k == key).map(|(_, v)| v)
    }
}

--- file: src/json.rs ---
use crate::core::{Data, Value};
use crate::format::Formatter;

pub struct JsonFormatter;

impl Formatter for JsonFormatter {
    fn format(&self, data: &Data) -> String {
        let fields: Vec<String> = data.fields.iter()
            .map(|(k, v)| format!("\"{}\": {}", k, format_value(v)))
            .collect();
        format!("{{{}}}", fields.join(", "))
    }

    fn parse(&self, _input: &str) -> Option<Data> {
        // Simplified - real impl would parse JSON
        Some(Data::new())
    }
}

fn format_value(v: &Value) -> String {
    match v {
        Value::Null => "null".to_string(),
        Value::Bool(b) => b.to_string(),
        Value::Number(n) => n.to_string(),
        Value::String(s) => format!("\"{}\"", s),
        Value::Array(arr) => {
            let items: Vec<String> = arr.iter().map(format_value).collect();
            format!("[{}]", items.join(", "))
        }
    }
}

--- file: src/xml.rs ---
use crate::core::{Data, Value};
use crate::format::Formatter;

pub struct XmlFormatter;

impl Formatter for XmlFormatter {
    fn format(&self, data: &Data) -> String {
        let fields: Vec<String> = data.fields.iter()
            .map(|(k, v)| format!("<{}>{}</{}>", k, format_value(v), k))
            .collect();
        format!("<data>{}</data>", fields.join(""))
    }

    fn parse(&self, _input: &str) -> Option<Data> {
        Some(Data::new())
    }
}

fn format_value(v: &Value) -> String {
    match v {
        Value::Null => "".to_string(),
        Value::Bool(b) => b.to_string(),
        Value::Number(n) => n.to_string(),
        Value::String(s) => s.clone(),
        Value::Array(arr) => {
            arr.iter().map(|v| format!("<item>{}</item>", format_value(v))).collect()
        }
    }
}

--- file: src/yaml.rs ---
use crate::core::{Data, Value};
use crate::format::Formatter;

pub struct YamlFormatter;

impl Formatter for YamlFormatter {
    fn format(&self, data: &Data) -> String {
        data.fields.iter()
            .map(|(k, v)| format!("{}: {}", k, format_value(v, 0)))
            .collect::<Vec<_>>()
            .join("\n")
    }

    fn parse(&self, _input: &str) -> Option<Data> {
        Some(Data::new())
    }
}

fn format_value(v: &Value, indent: usize) -> String {
    let prefix = "  ".repeat(indent);
    match v {
        Value::Null => "~".to_string(),
        Value::Bool(b) => b.to_string(),
        Value::Number(n) => n.to_string(),
        Value::String(s) => format!("\"{}\"", s),
        Value::Array(arr) => {
            let items: Vec<String> = arr.iter()
                .map(|v| format!("\n{}- {}", prefix, format_value(v, indent + 1)))
                .collect();
            items.join("")
        }
    }
}

--- file: src/main.rs ---
mod core;

#[cfg(feature = "json")]
mod json;

#[cfg(feature = "xml")]
mod xml;

#[cfg(feature = "yaml")]
mod yaml;

mod format;

use core::{Data, Value};
use format::Formatter;

fn main() {
    let mut data = Data::new();
    data.set("name", Value::String("Alice".to_string()));
    data.set("age", Value::Number(30.0));
    data.set("active", Value::Bool(true));

    #[cfg(feature = "json")]
    {
        let formatter = json::JsonFormatter;
        println!("JSON: {}", formatter.format(&data));
    }

    #[cfg(feature = "xml")]
    {
        let formatter = xml::XmlFormatter;
        println!("XML: {}", formatter.format(&data));
    }

    #[cfg(feature = "yaml")]
    {
        let formatter = yaml::YamlFormatter;
        println!("YAML:\n{}", formatter.format(&data));
    }
}

--- expect:symbols ---
u0:1  | Primitive      | i32           | i32                                      | [global]
u0:2  | Primitive      | i64           | i64                                      | [global]
u0:3  | Primitive      | i16           | i16                                      | [global]
u0:4  | Primitive      | i8            | i8                                       | [global]
u0:5  | Primitive      | i128          | i128                                     | [global]
u0:6  | Primitive      | isize         | isize                                    | [global]
u0:7  | Primitive      | u32           | u32                                      | [global]
u0:8  | Primitive      | u64           | u64                                      | [global]
u0:9  | Primitive      | u16           | u16                                      | [global]
u0:10 | Primitive      | u8            | u8                                       | [global]
u0:11 | Primitive      | u128          | u128                                     | [global]
u0:12 | Primitive      | usize         | usize                                    | [global]
u0:13 | Primitive      | f32           | f32                                      | [global]
u0:14 | Primitive      | f64           | f64                                      | [global]
u0:15 | Primitive      | bool          | bool                                     | [global]
u0:16 | Primitive      | char          | char                                     | [global]
u0:17 | Primitive      | str           | str                                      | [global]
u0:18 | Primitive      | String        | String                                   | [global]
u0:19 | Crate          | _c            | _c                                       | [global]
u0:20 | Crate          | crate         | _c::crate                                |
u0:21 | File           | lib           | _c::lib                                  |
u0:22 | Namespace      | format        | _c::lib::format                          | [global]
u0:23 | Trait          | Formatter     | _c::lib::format::Formatter               | [global]
u0:24 | Function       | format        | _c::lib::format::Formatter::format       |
u0:25 | Variable       | data          | _c::lib::format::Formatter::format::data |
u0:26 | Function       | parse         | _c::lib::format::Formatter::parse        |
u0:27 | Variable       | input         | _c::lib::format::Formatter::parse::input |
u1:28 | Crate          | crate         | _c::crate                                |
u1:29 | File           | core          | _c::core                                 |
u1:30 | Struct         | Data          | _c::core::Data                           | [global]
u1:31 | Field          | fields        | _c::core::Data::fields                   |
u1:32 | Enum           | Value         | _c::core::Value                          | [global]
u1:33 | EnumVariant    | Null          | _c::core::Value::Null                    |
u1:34 | EnumVariant    | Bool          | _c::core::Value::Bool                    |
u1:35 | EnumVariant    | Number        | _c::core::Value::Number                  |
u1:36 | EnumVariant    | String        | _c::core::Value::String                  |
u1:37 | EnumVariant    | Array         | _c::core::Value::Array                   |
u1:38 | Function       | new           | _c::core::Data::new                      | [global]
u1:39 | Function       | set           | _c::core::Data::set                      | [global]
u1:40 | Variable       | key           | _c::core::Data::set::key                 |
u1:41 | Variable       | value         | _c::core::Data::set::value               |
u1:42 | Function       | get           | _c::core::Data::get                      | [global]
u1:43 | Variable       | key           | _c::core::Data::get::key                 |
u1:44 | Variable       | k             | _c::core::Data::get::k                   |
u1:45 | Variable       | v             | _c::core::Data::get::v                   |
u2:46 | Crate          | crate         | _c::crate                                |
u2:47 | File           | json          | _c::json                                 |
u2:48 | Struct         | JsonFormatter | _c::json::JsonFormatter                  | [global]
u2:49 | UnresolvedType | Formatter     | _c::json::Formatter                      |
u2:50 | Function       | format        | _c::json::JsonFormatter::format          |
u2:51 | Variable       | data          | _c::json::JsonFormatter::format::data    |
u2:52 | Variable       | fields        | _c::json::JsonFormatter::format::fields  |
u2:53 | Variable       | k             | _c::json::JsonFormatter::format::k       |
u2:54 | Variable       | v             | _c::json::JsonFormatter::format::v       |
u2:55 | Function       | parse         | _c::json::JsonFormatter::parse           |
u2:56 | Variable       | _input        | _c::json::JsonFormatter::parse::_input   |
u2:57 | Function       | format_value  | _c::json::format_value                   |
u2:58 | Variable       | v             | _c::json::format_value::v                |
u2:59 | Variable       | items         | _c::json::format_value::items            |
u3:60 | Crate          | crate         | _c::crate                                |
u3:61 | File           | xml           | _c::xml                                  |
u3:62 | Struct         | XmlFormatter  | _c::xml::XmlFormatter                    | [global]
u3:63 | UnresolvedType | Formatter     | _c::xml::Formatter                       |
u3:64 | Function       | format        | _c::xml::XmlFormatter::format            |
u3:65 | Variable       | data          | _c::xml::XmlFormatter::format::data      |
u3:66 | Variable       | fields        | _c::xml::XmlFormatter::format::fields    |
u3:67 | Variable       | k             | _c::xml::XmlFormatter::format::k         |
u3:68 | Variable       | v             | _c::xml::XmlFormatter::format::v         |
u3:69 | Function       | parse         | _c::xml::XmlFormatter::parse             |
u3:70 | Variable       | _input        | _c::xml::XmlFormatter::parse::_input     |
u3:71 | Function       | format_value  | _c::xml::format_value                    |
u3:72 | Variable       | v             | _c::xml::format_value::v                 |
u3:73 | Variable       | v             | _c::xml::format_value::v                 |
u4:74 | Crate          | crate         | _c::crate                                |
u4:75 | File           | yaml          | _c::yaml                                 |
u4:76 | Struct         | YamlFormatter | _c::yaml::YamlFormatter                  | [global]
u4:77 | UnresolvedType | Formatter     | _c::yaml::Formatter                      |
u4:78 | Function       | format        | _c::yaml::YamlFormatter::format          |
u4:79 | Variable       | data          | _c::yaml::YamlFormatter::format::data    |
u4:80 | Variable       | k             | _c::yaml::YamlFormatter::format::k       |
u4:81 | Variable       | v             | _c::yaml::YamlFormatter::format::v       |
u4:82 | Function       | parse         | _c::yaml::YamlFormatter::parse           |
u4:83 | Variable       | _input        | _c::yaml::YamlFormatter::parse::_input   |
u4:84 | Function       | format_value  | _c::yaml::format_value                   |
u4:85 | Variable       | v             | _c::yaml::format_value::v                |
u4:86 | Variable       | indent        | _c::yaml::format_value::indent           |
u4:87 | Variable       | prefix        | _c::yaml::format_value::prefix           |
u4:88 | Variable       | items         | _c::yaml::format_value::items            |
u4:89 | Variable       | v             | _c::yaml::format_value::v                |
u5:90 | Crate          | crate         | _c::crate                                |
u5:91 | File           | main          | _c::main                                 |
u5:92 | Function       | main          | _c::main::main                           |
u5:93 | Variable       | data          | _c::main::main::data                     |
u5:94 | Variable       | formatter     | _c::main::main::formatter                |
u5:95 | Variable       | formatter     | _c::main::main::formatter                |
u5:96 | Variable       | formatter     | _c::main::main::formatter                |

--- expect:symbol-deps ---
u0:12 <- [u4:84, u4:84, u4:86]
u0:14 <- [u1:32]
u0:15 <- [u1:32]
u0:17 <- [u0:26, u0:26, u0:27, u1:39, u1:39, u1:40, u1:42, u1:42, u1:43, u2:55, u2:55, u2:56, u3:69, u3:69, u3:70, u4:82, u4:82, u4:83, u4:84, u4:87]
u0:18 <- [u0:24, u1:30, u1:30, u1:31, u1:32, u2:50, u2:50, u2:52, u2:57, u2:57, u2:59, u3:64, u3:64, u3:66, u3:71, u4:78, u4:84, u4:84, u4:88]
u0:22 -> [u0:23]
u0:23 -> [u0:24, u0:26]
u0:23 <- [u0:22, u2:48, u3:62, u4:76]
u0:24 -> [u0:18, u1:30]
u0:24 <- [u0:23]
u0:25 -> [u1:30]
u0:26 -> [u0:17, u0:17, u1:30]
u0:26 <- [u0:23]
u0:27 -> [u0:17]
u1:30 -> [u0:18, u0:18, u1:32, u1:32, u1:39, u1:42]
u1:30 <- [u0:24, u0:25, u0:26, u1:38, u2:50, u2:51, u2:55, u2:55, u3:64, u3:65, u3:69, u3:69, u4:78, u4:79, u4:82, u4:82, u5:92, u5:93]
u1:31 -> [u0:18, u1:32]
u1:32 -> [u0:14, u0:15, u0:18, u1:33, u1:34, u1:35, u1:36, u1:37]
u1:32 <- [u1:30, u1:30, u1:31, u1:39, u1:41, u1:42, u2:57, u2:57, u2:58, u3:71, u3:71, u3:72, u4:84, u4:84, u4:85, u5:92, u5:92]
u1:33 <- [u1:32, u2:57, u3:71, u4:84]
u1:34 <- [u1:32, u1:39, u2:57, u3:71, u4:84, u5:92]
u1:35 <- [u1:32, u1:39, u2:57, u3:71, u4:84, u5:92]
u1:36 <- [u1:32, u1:39, u2:57, u3:71, u4:84, u5:92]
u1:37 <- [u1:32, u2:57, u3:71, u4:84]
u1:38 -> [u1:30]
u1:38 <- [u2:55, u3:69, u4:82, u5:92]
u1:39 -> [u0:17, u0:17, u1:32, u1:34, u1:35, u1:36]
u1:39 <- [u1:30, u5:92]
u1:40 -> [u0:17]
u1:41 -> [u1:32]
u1:42 -> [u0:17, u0:17, u1:32]
u1:42 <- [u1:30]
u1:43 -> [u0:17]
u2:48 -> [u0:23, u2:50, u2:55]
u2:50 -> [u0:18, u0:18, u1:30]
u2:50 <- [u2:48]
u2:51 -> [u1:30]
u2:52 -> [u0:18]
u2:55 -> [u0:17, u0:17, u1:30, u1:30, u1:38]
u2:55 <- [u2:48]
u2:56 -> [u0:17]
u2:57 -> [u0:18, u0:18, u1:32, u1:32, u1:33, u1:34, u1:35, u1:36, u1:37, u4:78]
u2:58 -> [u1:32]
u2:59 -> [u0:18]
u3:62 -> [u0:23, u3:64, u3:69]
u3:64 -> [u0:18, u0:18, u1:30]
u3:64 <- [u3:62]
u3:65 -> [u1:30]
u3:66 -> [u0:18]
u3:69 -> [u0:17, u0:17, u1:30, u1:30, u1:38]
u3:69 <- [u3:62]
u3:70 -> [u0:17]
u3:71 -> [u0:18, u1:32, u1:32, u1:33, u1:34, u1:35, u1:36, u1:37, u4:78]
u3:72 -> [u1:32]
u4:76 -> [u0:23, u4:78, u4:82]
u4:78 -> [u0:18, u1:30]
u4:78 <- [u2:57, u3:71, u4:76, u4:84]
u4:79 -> [u1:30]
u4:82 -> [u0:17, u0:17, u1:30, u1:30, u1:38]
u4:82 <- [u4:76]
u4:83 -> [u0:17]
u4:84 -> [u0:12, u0:12, u0:17, u0:18, u0:18, u1:32, u1:32, u1:33, u1:34, u1:35, u1:36, u1:37, u4:78]
u4:85 -> [u1:32]
u4:86 -> [u0:12]
u4:87 -> [u0:17]
u4:88 -> [u0:18]
u5:92 -> [u1:30, u1:32, u1:32, u1:34, u1:35, u1:36, u1:38, u1:39]
u5:93 -> [u1:30]

--- expect:dep-graph ---
digraph project {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="core";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n6[label="Data", full_path="$TMP/src/core.rs:2"];
      n7[label="Value", full_path="$TMP/src/core.rs:7"];
    }
    subgraph cluster_2 {
      label="json";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n17[label="format_value", full_path="$TMP/src/json.rs:20"];
      n13[label="JsonFormatter", full_path="$TMP/src/json.rs:4"];
    }
    subgraph cluster_3 {
      label="lib";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n2[label="Formatter", full_path="$TMP/src/lib.rs:15"];
    }
    subgraph cluster_4 {
      label="main";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n31[label="main", full_path="$TMP/src/main.rs:17"];
    }
    subgraph cluster_5 {
      label="xml";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n23[label="format_value", full_path="$TMP/src/xml.rs:19"];
      n19[label="XmlFormatter", full_path="$TMP/src/xml.rs:4"];
    }
    subgraph cluster_6 {
      label="yaml";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n29[label="format_value", full_path="$TMP/src/yaml.rs:19"];
      n25[label="YamlFormatter", full_path="$TMP/src/yaml.rs:4"];
    }
  }
  n6 -> n7;
  n13 -> n2;
  n19 -> n2;
  n25 -> n2;
  n23 -> n7;
  n17 -> n7;
  n29 -> n7;
  n31 -> n6;
  n31 -> n7;
}

--- expect:arch-graph ---
digraph architecture {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="core";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n6[label="Data", full_path="$TMP/src/core.rs:2", sym_ty="Struct", shape=box];
      n7[label="Value", full_path="$TMP/src/core.rs:7", sym_ty="Enum", shape=box];
    }
    subgraph cluster_2 {
      label="json";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n13[label="JsonFormatter", full_path="$TMP/src/json.rs:4", sym_ty="Struct", shape=box];
    }
    subgraph cluster_3 {
      label="lib";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n2[label="Formatter", full_path="$TMP/src/lib.rs:15", sym_ty="Trait", shape=box];
    }
    subgraph cluster_4 {
      label="xml";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n19[label="XmlFormatter", full_path="$TMP/src/xml.rs:4", sym_ty="Struct", shape=box];
    }
    subgraph cluster_5 {
      label="yaml";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n25[label="YamlFormatter", full_path="$TMP/src/yaml.rs:4", sym_ty="Struct", shape=box];
    }
  }
  n6 -> n7 [from="struct", to="field"];
  n2 -> n13 [from="trait", to="impl"];
  n2 -> n19 [from="trait", to="impl"];
  n2 -> n25 [from="trait", to="impl"];
}


===============================================================================
shared-state-across-files
===============================================================================
Tests global shared state: OnceLock config accessed from cache and service modules.

--- file: src/lib.rs ---
pub mod config;
pub mod cache;
pub mod service;

--- file: src/config.rs ---
use std::sync::OnceLock;

static CONFIG: OnceLock<AppConfig> = OnceLock::new();

pub struct AppConfig {
    pub database_url: String,
    pub max_connections: u32,
    pub log_level: String,
}

impl AppConfig {
    pub fn init(database_url: String, max_connections: u32, log_level: String) {
        CONFIG.get_or_init(|| AppConfig {
            database_url,
            max_connections,
            log_level,
        });
    }

    pub fn get() -> &'static AppConfig {
        CONFIG.get().expect("Config not initialized")
    }
}

--- file: src/cache.rs ---
use std::collections::HashMap;
use std::sync::RwLock;

static CACHE: RwLock<Option<Cache>> = RwLock::new(None);

pub struct Cache {
    data: HashMap<String, String>,
}

impl Cache {
    pub fn init() {
        let mut lock = CACHE.write().unwrap();
        *lock = Some(Cache { data: HashMap::new() });
    }

    pub fn get(key: &str) -> Option<String> {
        let lock = CACHE.read().unwrap();
        lock.as_ref()?.data.get(key).cloned()
    }

    pub fn set(key: String, value: String) {
        let mut lock = CACHE.write().unwrap();
        if let Some(cache) = lock.as_mut() {
            cache.data.insert(key, value);
        }
    }

    pub fn clear() {
        let mut lock = CACHE.write().unwrap();
        if let Some(cache) = lock.as_mut() {
            cache.data.clear();
        }
    }
}

--- file: src/service.rs ---
use crate::config::AppConfig;
use crate::cache::Cache;

pub struct DataService;

impl DataService {
    pub fn new() -> Self {
        DataService
    }

    pub fn fetch(&self, key: &str) -> String {
        // Check cache first
        if let Some(cached) = Cache::get(key) {
            println!("Cache hit for: {}", key);
            return cached;
        }

        // Fetch from "database"
        let config = AppConfig::get();
        println!("Fetching from database: {} (url: {})", key, config.database_url);

        let value = format!("value_for_{}", key);

        // Store in cache
        Cache::set(key.to_string(), value.clone());

        value
    }
}

--- file: src/main.rs ---
mod config;
mod cache;
mod service;

use config::AppConfig;
use cache::Cache;
use service::DataService;

fn main() {
    // Initialize global state
    AppConfig::init(
        "postgres://localhost/mydb".to_string(),
        10,
        "info".to_string(),
    );
    Cache::init();

    // Use service
    let svc = DataService::new();

    println!("First fetch:");
    println!("  Result: {}", svc.fetch("user_1"));

    println!("\nSecond fetch (should hit cache):");
    println!("  Result: {}", svc.fetch("user_1"));

    println!("\nConfig: log_level = {}", AppConfig::get().log_level);
}

--- expect:symbols ---
u0:1  | Primitive | i32             | i32                                          | [global]
u0:2  | Primitive | i64             | i64                                          | [global]
u0:3  | Primitive | i16             | i16                                          | [global]
u0:4  | Primitive | i8              | i8                                           | [global]
u0:5  | Primitive | i128            | i128                                         | [global]
u0:6  | Primitive | isize           | isize                                        | [global]
u0:7  | Primitive | u32             | u32                                          | [global]
u0:8  | Primitive | u64             | u64                                          | [global]
u0:9  | Primitive | u16             | u16                                          | [global]
u0:10 | Primitive | u8              | u8                                           | [global]
u0:11 | Primitive | u128            | u128                                         | [global]
u0:12 | Primitive | usize           | usize                                        | [global]
u0:13 | Primitive | f32             | f32                                          | [global]
u0:14 | Primitive | f64             | f64                                          | [global]
u0:15 | Primitive | bool            | bool                                         | [global]
u0:16 | Primitive | char            | char                                         | [global]
u0:17 | Primitive | str             | str                                          | [global]
u0:18 | Primitive | String          | String                                       | [global]
u0:19 | Crate     | _c              | _c                                           | [global]
u0:20 | Crate     | crate           | _c::crate                                    |
u0:21 | File      | lib             | _c::lib                                      |
u1:22 | Crate     | crate           | _c::crate                                    |
u1:23 | File      | config          | _c::config                                   |
u1:24 | Static    | CONFIG          | _c::config::CONFIG                           |
u1:25 | Struct    | AppConfig       | _c::config::AppConfig                        | [global]
u1:26 | Field     | database_url    | _c::config::AppConfig::database_url          |
u1:27 | Field     | max_connections | _c::config::AppConfig::max_connections       |
u1:28 | Field     | log_level       | _c::config::AppConfig::log_level             |
u1:29 | Function  | init            | _c::config::AppConfig::init                  | [global]
u1:30 | Variable  | database_url    | _c::config::AppConfig::init::database_url    |
u1:31 | Variable  | max_connections | _c::config::AppConfig::init::max_connections |
u1:32 | Variable  | log_level       | _c::config::AppConfig::init::log_level       |
u1:33 | Function  | get             | _c::config::AppConfig::get                   | [global]
u2:34 | Crate     | crate           | _c::crate                                    |
u2:35 | File      | cache           | _c::cache                                    |
u2:36 | Static    | CACHE           | _c::cache::CACHE                             |
u2:37 | Struct    | Cache           | _c::cache::Cache                             | [global]
u2:38 | Field     | data            | _c::cache::Cache::data                       |
u2:39 | Function  | init            | _c::cache::Cache::init                       | [global]
u2:40 | Variable  | lock            | _c::cache::Cache::init::lock                 |
u2:41 | Function  | get             | _c::cache::Cache::get                        | [global]
u2:42 | Variable  | key             | _c::cache::Cache::get::key                   |
u2:43 | Variable  | lock            | _c::cache::Cache::get::lock                  |
u2:44 | Function  | set             | _c::cache::Cache::set                        | [global]
u2:45 | Variable  | key             | _c::cache::Cache::set::key                   |
u2:46 | Variable  | value           | _c::cache::Cache::set::value                 |
u2:47 | Variable  | lock            | _c::cache::Cache::set::lock                  |
u2:48 | Function  | clear           | _c::cache::Cache::clear                      | [global]
u2:49 | Variable  | lock            | _c::cache::Cache::clear::lock                |
u3:50 | Crate     | crate           | _c::crate                                    |
u3:51 | File      | service         | _c::service                                  |
u3:52 | Struct    | DataService     | _c::service::DataService                     | [global]
u3:53 | Function  | new             | _c::service::DataService::new                | [global]
u3:54 | Function  | fetch           | _c::service::DataService::fetch              | [global]
u3:55 | Variable  | key             | _c::service::DataService::fetch::key         |
u3:56 | Variable  | config          | _c::service::DataService::fetch::config      |
u3:57 | Variable  | value           | _c::service::DataService::fetch::value       |
u4:58 | Crate     | crate           | _c::crate                                    |
u4:59 | File      | main            | _c::main                                     |
u4:60 | Function  | main            | _c::main::main                               |
u4:61 | Variable  | svc             | _c::main::main::svc                          |

--- expect:symbol-deps ---
u0:17 <- [u2:41, u2:41, u2:42, u3:54, u3:54, u3:55, u3:57]
u0:18 <- [u1:25, u1:26, u1:28, u1:29, u1:30, u1:32, u2:37, u2:38, u2:41, u2:44, u2:45, u2:46, u3:54]
u0:7 <- [u1:25, u1:25, u1:27, u1:29, u1:29, u1:31]
u1:25 -> [u0:18, u0:7, u0:7, u1:33]
u1:25 <- [u1:29, u1:33, u3:54, u4:60]
u1:26 -> [u0:18]
u1:27 -> [u0:7]
u1:28 -> [u0:18]
u1:29 -> [u0:18, u0:7, u0:7, u1:25]
u1:29 <- [u4:60]
u1:30 -> [u0:18]
u1:31 -> [u0:7]
u1:32 -> [u0:18]
u1:33 -> [u1:25]
u1:33 <- [u1:25, u3:54]
u2:37 -> [u0:18, u2:41, u2:44, u2:48]
u2:37 <- [u2:39, u3:54, u4:60]
u2:38 -> [u0:18]
u2:39 -> [u2:37]
u2:39 <- [u4:60]
u2:41 -> [u0:17, u0:17, u0:18]
u2:41 <- [u2:37, u3:54]
u2:42 -> [u0:17]
u2:44 -> [u0:18]
u2:44 <- [u2:37, u3:54]
u2:45 -> [u0:18]
u2:46 -> [u0:18]
u2:48 <- [u2:37]
u3:52 -> [u3:53, u3:54]
u3:52 <- [u4:60, u4:61]
u3:53 <- [u3:52, u4:60]
u3:54 -> [u0:17, u0:17, u0:18, u1:25, u1:33, u2:37, u2:41, u2:44]
u3:54 <- [u3:52]
u3:55 -> [u0:17]
u3:57 -> [u0:17]
u4:60 -> [u1:25, u1:29, u2:37, u2:39, u3:52, u3:53]
u4:61 -> [u3:52]

--- expect:dep-graph ---
digraph project {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="cache";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n10[label="Cache", full_path="$TMP/src/cache.rs:6"];
    }
    subgraph cluster_2 {
      label="config";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n4[label="AppConfig", full_path="$TMP/src/config.rs:5"];
    }
    subgraph cluster_3 {
      label="main";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n22[label="main", full_path="$TMP/src/main.rs:9"];
    }
    subgraph cluster_4 {
      label="service";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n17[label="DataService", full_path="$TMP/src/service.rs:4"];
    }
  }
  n22 -> n4;
  n22 -> n10;
  n22 -> n17;
}

--- expect:arch-graph ---
digraph architecture {
  graph [fontname="Helvetica Bold", fontsize=12];

  subgraph cluster_0 {
    label="_c";
    subgraph cluster_1 {
      label="cache";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n10[label="Cache", full_path="$TMP/src/cache.rs:6", sym_ty="Struct", shape=box];
    }
    subgraph cluster_2 {
      label="config";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n4[label="AppConfig", full_path="$TMP/src/config.rs:5", sym_ty="Struct", shape=box];
    }
    subgraph cluster_3 {
      label="service";
      style="filled";
      fillcolor="#EEEEEE";
      color="#616161";
      n17[label="DataService", full_path="$TMP/src/service.rs:4", sym_ty="Struct", shape=box];
    }
  }
}
