===============================================================================
call-target-callkind-function-one
===============================================================================
Tests basic function call resolution where main() calls helper().

--- file: src/main.rs ---
fn helper() -> i32 {
    42
}

fn main() {
    let x = helper();
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32               | [global]
u0:2  | Primitive | i64    | i64               | [global]
u0:3  | Primitive | i16    | i16               | [global]
u0:4  | Primitive | i8     | i8                | [global]
u0:5  | Primitive | i128   | i128              | [global]
u0:6  | Primitive | isize  | isize             | [global]
u0:7  | Primitive | u32    | u32               | [global]
u0:8  | Primitive | u64    | u64               | [global]
u0:9  | Primitive | u16    | u16               | [global]
u0:10 | Primitive | u8     | u8                | [global]
u0:11 | Primitive | u128   | u128              | [global]
u0:12 | Primitive | usize  | usize             | [global]
u0:13 | Primitive | f32    | f32               | [global]
u0:14 | Primitive | f64    | f64               | [global]
u0:15 | Primitive | bool   | bool              | [global]
u0:16 | Primitive | char   | char              | [global]
u0:17 | Primitive | str    | str               | [global]
u0:18 | Primitive | String | String            | [global]
u0:19 | Crate     | _c     | _c                | [global]
u0:20 | Crate     | crate  | _c::crate         |         
u0:21 | File      | main   | _c::main          |         
u0:22 | Function  | helper | _c::main::helper  |         
u0:23 | Function  | main   | _c::main::main    |         
u0:24 | Variable  | x      | _c::main::main::x |         

--- expect:symbol-deps ---
u0:1 <- [u0:22]
u0:22 -> [u0:1]
u0:22 <- [u0:23, u0:23, u0:24]
u0:23 -> [u0:22, u0:22]
u0:24 -> [u0:22]


===============================================================================
call-target-callkind-function-two
===============================================================================
Tests function call with multiple arguments: main() calls add(a, b).

--- file: src/main.rs ---
fn add(a: i32, b: i32) -> i32 {
    a + b
}

fn main() {
    let result = add(1, 2);
}

--- expect:symbols ---
u0:1  | Primitive | i32    | i32                    | [global]
u0:2  | Primitive | i64    | i64                    | [global]
u0:3  | Primitive | i16    | i16                    | [global]
u0:4  | Primitive | i8     | i8                     | [global]
u0:5  | Primitive | i128   | i128                   | [global]
u0:6  | Primitive | isize  | isize                  | [global]
u0:7  | Primitive | u32    | u32                    | [global]
u0:8  | Primitive | u64    | u64                    | [global]
u0:9  | Primitive | u16    | u16                    | [global]
u0:10 | Primitive | u8     | u8                     | [global]
u0:11 | Primitive | u128   | u128                   | [global]
u0:12 | Primitive | usize  | usize                  | [global]
u0:13 | Primitive | f32    | f32                    | [global]
u0:14 | Primitive | f64    | f64                    | [global]
u0:15 | Primitive | bool   | bool                   | [global]
u0:16 | Primitive | char   | char                   | [global]
u0:17 | Primitive | str    | str                    | [global]
u0:18 | Primitive | String | String                 | [global]
u0:19 | Crate     | _c     | _c                     | [global]
u0:20 | Crate     | crate  | _c::crate              |         
u0:21 | File      | main   | _c::main               |         
u0:22 | Function  | add    | _c::main::add          |         
u0:23 | Variable  | a      | _c::main::add::a       |         
u0:24 | Variable  | b      | _c::main::add::b       |         
u0:25 | Function  | main   | _c::main::main         |         
u0:26 | Variable  | result | _c::main::main::result |         

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:22, u0:23, u0:24]
u0:22 -> [u0:1, u0:1]
u0:22 <- [u0:25, u0:25, u0:26]
u0:23 -> [u0:1]
u0:24 -> [u0:1]
u0:25 -> [u0:22, u0:22]
u0:26 -> [u0:22]


===============================================================================
call-target-callkind-macro
===============================================================================
Tests macro invocation call kind detection with say_hello!().

--- file: src/main.rs ---
macro_rules! say_hello {
    () => {
        println!("Hello!");
    };
}

fn main() {
    say_hello!();
}

--- expect:symbols ---
u0:1  | Primitive | i32       | i32                 | [global]
u0:2  | Primitive | i64       | i64                 | [global]
u0:3  | Primitive | i16       | i16                 | [global]
u0:4  | Primitive | i8        | i8                  | [global]
u0:5  | Primitive | i128      | i128                | [global]
u0:6  | Primitive | isize     | isize               | [global]
u0:7  | Primitive | u32       | u32                 | [global]
u0:8  | Primitive | u64       | u64                 | [global]
u0:9  | Primitive | u16       | u16                 | [global]
u0:10 | Primitive | u8        | u8                  | [global]
u0:11 | Primitive | u128      | u128                | [global]
u0:12 | Primitive | usize     | usize               | [global]
u0:13 | Primitive | f32       | f32                 | [global]
u0:14 | Primitive | f64       | f64                 | [global]
u0:15 | Primitive | bool      | bool                | [global]
u0:16 | Primitive | char      | char                | [global]
u0:17 | Primitive | str       | str                 | [global]
u0:18 | Primitive | String    | String              | [global]
u0:19 | Crate     | _c        | _c                  | [global]
u0:20 | Crate     | crate     | _c::crate           |         
u0:21 | File      | main      | _c::main            |         
u0:22 | Macro     | say_hello | _c::main::say_hello |         
u0:23 | Function  | main      | _c::main::main      |         

--- expect:symbol-deps ---
u0:22 <- [u0:23]
u0:23 -> [u0:22]


===============================================================================
call-target-callkind-chain-method-callchainroot-invocation
===============================================================================
Tests method chain where root is an invocation: Builder::new().add(1).add(2).build().

--- file: src/main.rs ---
struct Builder {
    value: i32,
}

impl Builder {
    fn new() -> Self {
        Builder { value: 0 }
    }

    fn add(mut self, n: i32) -> Self {
        self.value += n;
        self
    }

    fn build(self) -> i32 {
        self.value
    }
}

fn main() {
    let result = Builder::new().add(1).add(2).build();
}

--- expect:symbols ---
u0:1  | Primitive | i32     | i32                       | [global]
u0:2  | Primitive | i64     | i64                       | [global]
u0:3  | Primitive | i16     | i16                       | [global]
u0:4  | Primitive | i8      | i8                        | [global]
u0:5  | Primitive | i128    | i128                      | [global]
u0:6  | Primitive | isize   | isize                     | [global]
u0:7  | Primitive | u32     | u32                       | [global]
u0:8  | Primitive | u64     | u64                       | [global]
u0:9  | Primitive | u16     | u16                       | [global]
u0:10 | Primitive | u8      | u8                        | [global]
u0:11 | Primitive | u128    | u128                      | [global]
u0:12 | Primitive | usize   | usize                     | [global]
u0:13 | Primitive | f32     | f32                       | [global]
u0:14 | Primitive | f64     | f64                       | [global]
u0:15 | Primitive | bool    | bool                      | [global]
u0:16 | Primitive | char    | char                      | [global]
u0:17 | Primitive | str     | str                       | [global]
u0:18 | Primitive | String  | String                    | [global]
u0:19 | Crate     | _c      | _c                        | [global]
u0:20 | Crate     | crate   | _c::crate                 |         
u0:21 | File      | main    | _c::main                  |         
u0:22 | Struct    | Builder | _c::main::Builder         |         
u0:23 | Field     | value   | _c::main::Builder::value  |         
u0:24 | Function  | new     | _c::main::Builder::new    |         
u0:25 | Function  | add     | _c::main::Builder::add    |         
u0:26 | Variable  | n       | _c::main::Builder::add::n |         
u0:27 | Function  | build   | _c::main::Builder::build  |         
u0:28 | Function  | main    | _c::main::main            |         
u0:29 | Variable  | result  | _c::main::main::result    |         

--- expect:symbol-deps ---
u0:1 <- [u0:22, u0:22, u0:23, u0:25, u0:25, u0:26, u0:27]
u0:22 -> [u0:1, u0:1, u0:25, u0:27]
u0:22 <- [u0:24, u0:28, u0:29]
u0:23 -> [u0:1]
u0:24 -> [u0:22]
u0:24 <- [u0:28]
u0:25 -> [u0:1, u0:1]
u0:25 <- [u0:22, u0:28]
u0:26 -> [u0:1]
u0:27 -> [u0:1]
u0:27 <- [u0:22, u0:28]
u0:28 -> [u0:22, u0:24, u0:25, u0:27]
u0:29 -> [u0:22]


===============================================================================
call-target-callkind-chain-method-callchainroot-expr
===============================================================================
Tests method chain where root is a variable expression: data.iter().map().count().

--- file: src/main.rs ---
struct Data;

struct Iter;

impl Data {
    fn new() -> Self { Data }

    fn iter(&self) -> Iter { Iter }
}

impl Iter {
    fn map(&self) -> Iter { Iter }

    fn count(&self) -> usize { 0 }
}

fn expr_chain() {
    let data = Data::new();
    data.iter().map().count();
}

--- expect:symbols ---
u0:1  | Primitive | i32        | i32                        | [global]
u0:2  | Primitive | i64        | i64                        | [global]
u0:3  | Primitive | i16        | i16                        | [global]
u0:4  | Primitive | i8         | i8                         | [global]
u0:5  | Primitive | i128       | i128                       | [global]
u0:6  | Primitive | isize      | isize                      | [global]
u0:7  | Primitive | u32        | u32                        | [global]
u0:8  | Primitive | u64        | u64                        | [global]
u0:9  | Primitive | u16        | u16                        | [global]
u0:10 | Primitive | u8         | u8                         | [global]
u0:11 | Primitive | u128       | u128                       | [global]
u0:12 | Primitive | usize      | usize                      | [global]
u0:13 | Primitive | f32        | f32                        | [global]
u0:14 | Primitive | f64        | f64                        | [global]
u0:15 | Primitive | bool       | bool                       | [global]
u0:16 | Primitive | char       | char                       | [global]
u0:17 | Primitive | str        | str                        | [global]
u0:18 | Primitive | String     | String                     | [global]
u0:19 | Crate     | _c         | _c                         | [global]
u0:20 | Crate     | crate      | _c::crate                  |         
u0:21 | File      | main       | _c::main                   |         
u0:22 | Struct    | Data       | _c::main::Data             |         
u0:23 | Struct    | Iter       | _c::main::Iter             |         
u0:24 | Function  | new        | _c::main::Data::new        |         
u0:25 | Function  | iter       | _c::main::Data::iter       |         
u0:26 | Function  | map        | _c::main::Iter::map        |         
u0:27 | Function  | count      | _c::main::Iter::count      |         
u0:28 | Function  | expr_chain | _c::main::expr_chain       |         
u0:29 | Variable  | data       | _c::main::expr_chain::data |         

--- expect:symbol-deps ---
u0:12 <- [u0:27]
u0:22 -> [u0:23, u0:24, u0:25]
u0:22 <- [u0:28, u0:29]
u0:23 -> [u0:26, u0:27]
u0:23 <- [u0:22, u0:25, u0:26]
u0:24 <- [u0:22, u0:28]
u0:25 -> [u0:23]
u0:25 <- [u0:22, u0:28]
u0:26 -> [u0:23]
u0:26 <- [u0:23, u0:28]
u0:27 -> [u0:12]
u0:27 <- [u0:23, u0:28]
u0:28 -> [u0:22, u0:24, u0:25, u0:26, u0:27]
u0:29 -> [u0:22]


===============================================================================
call-target-callkind-chain-variable
===============================================================================
Tests method call on intermediate variable: cursor = stream.advance(); cursor.flush().

--- file: src/main.rs ---
struct Stream;

impl Stream {
    fn advance(&mut self) -> &mut Self { self }
    fn flush(&self) {}
}

fn chain_variable_demo(mut stream: Stream) {
    let cursor = stream.advance();
    cursor.flush();
}

--- expect:symbols ---
u0:1  | Primitive | i32                 | i32                                   | [global]
u0:2  | Primitive | i64                 | i64                                   | [global]
u0:3  | Primitive | i16                 | i16                                   | [global]
u0:4  | Primitive | i8                  | i8                                    | [global]
u0:5  | Primitive | i128                | i128                                  | [global]
u0:6  | Primitive | isize               | isize                                 | [global]
u0:7  | Primitive | u32                 | u32                                   | [global]
u0:8  | Primitive | u64                 | u64                                   | [global]
u0:9  | Primitive | u16                 | u16                                   | [global]
u0:10 | Primitive | u8                  | u8                                    | [global]
u0:11 | Primitive | u128                | u128                                  | [global]
u0:12 | Primitive | usize               | usize                                 | [global]
u0:13 | Primitive | f32                 | f32                                   | [global]
u0:14 | Primitive | f64                 | f64                                   | [global]
u0:15 | Primitive | bool                | bool                                  | [global]
u0:16 | Primitive | char                | char                                  | [global]
u0:17 | Primitive | str                 | str                                   | [global]
u0:18 | Primitive | String              | String                                | [global]
u0:19 | Crate     | _c                  | _c                                    | [global]
u0:20 | Crate     | crate               | _c::crate                             |         
u0:21 | File      | main                | _c::main                              |         
u0:22 | Struct    | Stream              | _c::main::Stream                      |         
u0:23 | Function  | advance             | _c::main::Stream::advance             |         
u0:24 | Function  | flush               | _c::main::Stream::flush               |         
u0:25 | Function  | chain_variable_demo | _c::main::chain_variable_demo         |         
u0:26 | Variable  | stream              | _c::main::chain_variable_demo::stream |         
u0:27 | Variable  | cursor              | _c::main::chain_variable_demo::cursor |         

--- expect:symbol-deps ---
u0:22 -> [u0:23, u0:24]
u0:22 <- [u0:25, u0:25, u0:26, u0:27]
u0:23 <- [u0:22, u0:25]
u0:24 <- [u0:22, u0:25]
u0:25 -> [u0:22, u0:22, u0:23, u0:24]
u0:26 -> [u0:22]
u0:27 -> [u0:22]
