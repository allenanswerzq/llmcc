===============================================================================
layered-architecture-basic
===============================================================================
Tests 3-layer architecture: data layer (entities/repository), service layer (business logic), api layer (handlers).

--- file: src/lib.rs ---
pub mod data;
pub mod service;
pub mod api;

--- file: src/data/mod.rs ---
mod entity;
mod repository;

pub use entity::User;
pub use repository::UserRepository;

--- file: src/data/entity.rs ---
#[derive(Clone, Debug)]
pub struct User {
    pub id: u64,
    pub email: String,
    pub password_hash: String,
}

--- file: src/data/repository.rs ---
use super::entity::User;
use std::collections::HashMap;

pub struct UserRepository {
    storage: HashMap<u64, User>,
    next_id: u64,
}

impl UserRepository {
    pub fn new() -> Self {
        UserRepository { storage: HashMap::new(), next_id: 1 }
    }

    pub fn find_by_id(&self, id: u64) -> Option<User> {
        self.storage.get(&id).cloned()
    }

    pub fn find_by_email(&self, email: &str) -> Option<User> {
        self.storage.values().find(|u| u.email == email).cloned()
    }

    pub fn insert(&mut self, email: String, password_hash: String) -> User {
        let user = User { id: self.next_id, email, password_hash };
        self.next_id += 1;
        self.storage.insert(user.id, user.clone());
        user
    }
}

--- file: src/service/mod.rs ---
mod user_service;
mod auth_service;

pub use user_service::UserService;
pub use auth_service::AuthService;

--- file: src/service/user_service.rs ---
use crate::data::{User, UserRepository};

pub struct UserService {
    repo: UserRepository,
}

impl UserService {
    pub fn new(repo: UserRepository) -> Self {
        UserService { repo }
    }

    pub fn get_user(&self, id: u64) -> Option<User> {
        self.repo.find_by_id(id)
    }

    pub fn create_user(&mut self, email: String, password: String) -> User {
        let hash = format!("hashed:{}", password);  // Simplified
        self.repo.insert(email, hash)
    }
}

--- file: src/service/auth_service.rs ---
use crate::data::{User, UserRepository};

pub struct AuthService {
    repo: UserRepository,
}

impl AuthService {
    pub fn new(repo: UserRepository) -> Self {
        AuthService { repo }
    }

    pub fn authenticate(&self, email: &str, password: &str) -> Option<User> {
        let user = self.repo.find_by_email(email)?;
        let expected_hash = format!("hashed:{}", password);
        if user.password_hash == expected_hash {
            Some(user)
        } else {
            None
        }
    }
}

--- file: src/api/mod.rs ---
mod handlers;
mod dto;

pub use handlers::*;
pub use dto::*;

--- file: src/api/dto.rs ---
use crate::data::User;

pub struct UserDto {
    pub id: u64,
    pub email: String,
}

impl From<User> for UserDto {
    fn from(user: User) -> Self {
        UserDto { id: user.id, email: user.email }
    }
}

pub struct CreateUserRequest {
    pub email: String,
    pub password: String,
}

pub struct LoginRequest {
    pub email: String,
    pub password: String,
}

--- file: src/api/handlers.rs ---
use crate::service::{UserService, AuthService};
use super::dto::{UserDto, CreateUserRequest, LoginRequest};

pub fn handle_get_user(service: &UserService, id: u64) -> Option<UserDto> {
    service.get_user(id).map(UserDto::from)
}

pub fn handle_create_user(service: &mut UserService, req: CreateUserRequest) -> UserDto {
    let user = service.create_user(req.email, req.password);
    UserDto::from(user)
}

pub fn handle_login(service: &AuthService, req: LoginRequest) -> Option<UserDto> {
    service.authenticate(&req.email, &req.password).map(UserDto::from)
}

--- file: src/main.rs ---
mod data;
mod service;
mod api;

use data::UserRepository;
use service::{UserService, AuthService};
use api::{handle_create_user, handle_get_user, CreateUserRequest};

fn main() {
    let repo = UserRepository::new();
    let mut user_service = UserService::new(repo);

    let req = CreateUserRequest {
        email: "alice@example.com".to_string(),
        password: "secret".to_string(),
    };

    let created = handle_create_user(&mut user_service, req);
    println!("Created user: {} (id={})", created.email, created.id);

    if let Some(found) = handle_get_user(&user_service, created.id) {
        println!("Found user: {}", found.email);
    }
}

--- expect:symbols ---
u0:1    | Primitive      | i32                | i32                                                                 | [global]
u0:2    | Primitive      | i64                | i64                                                                 | [global]
u0:3    | Primitive      | i16                | i16                                                                 | [global]
u0:4    | Primitive      | i8                 | i8                                                                  | [global]
u0:5    | Primitive      | i128               | i128                                                                | [global]
u0:6    | Primitive      | isize              | isize                                                               | [global]
u0:7    | Primitive      | u32                | u32                                                                 | [global]
u0:8    | Primitive      | u64                | u64                                                                 | [global]
u0:9    | Primitive      | u16                | u16                                                                 | [global]
u0:10   | Primitive      | u8                 | u8                                                                  | [global]
u0:11   | Primitive      | u128               | u128                                                                | [global]
u0:12   | Primitive      | usize              | usize                                                               | [global]
u0:13   | Primitive      | f32                | f32                                                                 | [global]
u0:14   | Primitive      | f64                | f64                                                                 | [global]
u0:15   | Primitive      | bool               | bool                                                                | [global]
u0:16   | Primitive      | char               | char                                                                | [global]
u0:17   | Primitive      | str                | str                                                                 | [global]
u0:18   | Primitive      | String             | String                                                              | [global]
u0:19   | Crate          | _c                 | _c                                                                  | [global]
u0:20   | Crate          | crate              | _c::crate                                                           |
u0:21   | File           | lib                | _c::lib                                                             |
u1:22   | Crate          | crate              | _c::crate                                                           |
u1:23   | Module         | data               | _c::data                                                            |
u1:24   | File           | mod                | _c::data::mod                                                       |
u2:25   | Crate          | crate              | _c::crate                                                           |
u2:26   | Module         | data               | _c::data                                                            |
u2:27   | File           | entity             | _c::data::entity                                                    |
u2:28   | Struct         | User               | _c::data::entity::User                                              | [global]
u2:29   | Field          | id                 | _c::data::entity::User::id                                          |
u2:30   | Field          | email              | _c::data::entity::User::email                                       |
u2:31   | Field          | password_hash      | _c::data::entity::User::password_hash                               |
u3:32   | Crate          | crate              | _c::crate                                                           |
u3:33   | Module         | data               | _c::data                                                            |
u3:34   | File           | repository         | _c::data::repository                                                |
u3:35   | Struct         | UserRepository     | _c::data::repository::UserRepository                                | [global]
u3:36   | Field          | storage            | _c::data::repository::UserRepository::storage                       |
u3:37   | Field          | next_id            | _c::data::repository::UserRepository::next_id                       |
u3:38   | Function       | new                | _c::data::repository::UserRepository::new                           | [global]
u3:39   | Function       | find_by_id         | _c::data::repository::UserRepository::find_by_id                    | [global]
u3:40   | Variable       | id                 | _c::data::repository::UserRepository::find_by_id::id                |
u3:41   | Function       | find_by_email      | _c::data::repository::UserRepository::find_by_email                 | [global]
u3:42   | Variable       | email              | _c::data::repository::UserRepository::find_by_email::email          |
u3:43   | Variable       | u                  | _c::data::repository::UserRepository::find_by_email::u              |
u3:44   | Function       | insert             | _c::data::repository::UserRepository::insert                        | [global]
u3:45   | Variable       | email              | _c::data::repository::UserRepository::insert::email                 |
u3:46   | Variable       | password_hash      | _c::data::repository::UserRepository::insert::password_hash         |
u3:47   | Variable       | user               | _c::data::repository::UserRepository::insert::user                  |
u4:48   | Crate          | crate              | _c::crate                                                           |
u4:49   | Module         | service            | _c::service                                                         |
u4:50   | File           | mod                | _c::service::mod                                                    |
u5:51   | Crate          | crate              | _c::crate                                                           |
u5:52   | Module         | service            | _c::service                                                         |
u5:53   | File           | user_service       | _c::service::user_service                                           |
u5:54   | Struct         | UserService        | _c::service::user_service::UserService                              | [global]
u5:55   | Field          | repo               | _c::service::user_service::UserService::repo                        |
u5:56   | Function       | new                | _c::service::user_service::UserService::new                         | [global]
u5:57   | Variable       | repo               | _c::service::user_service::UserService::new::repo                   |
u5:58   | Function       | get_user           | _c::service::user_service::UserService::get_user                    | [global]
u5:59   | Variable       | id                 | _c::service::user_service::UserService::get_user::id                |
u5:60   | Function       | create_user        | _c::service::user_service::UserService::create_user                 | [global]
u5:61   | Variable       | email              | _c::service::user_service::UserService::create_user::email          |
u5:62   | Variable       | password           | _c::service::user_service::UserService::create_user::password       |
u5:63   | Variable       | hash               | _c::service::user_service::UserService::create_user::hash           |
u6:64   | Crate          | crate              | _c::crate                                                           |
u6:65   | Module         | service            | _c::service                                                         |
u6:66   | File           | auth_service       | _c::service::auth_service                                           |
u6:67   | Struct         | AuthService        | _c::service::auth_service::AuthService                              | [global]
u6:68   | Field          | repo               | _c::service::auth_service::AuthService::repo                        |
u6:69   | Function       | new                | _c::service::auth_service::AuthService::new                         | [global]
u6:70   | Variable       | repo               | _c::service::auth_service::AuthService::new::repo                   |
u6:71   | Function       | authenticate       | _c::service::auth_service::AuthService::authenticate                | [global]
u6:72   | Variable       | email              | _c::service::auth_service::AuthService::authenticate::email         |
u6:73   | Variable       | password           | _c::service::auth_service::AuthService::authenticate::password      |
u6:74   | Variable       | user               | _c::service::auth_service::AuthService::authenticate::user          |
u6:75   | Variable       | expected_hash      | _c::service::auth_service::AuthService::authenticate::expected_hash |
u7:76   | Crate          | crate              | _c::crate                                                           |
u7:77   | Module         | api                | _c::api                                                             |
u7:78   | File           | mod                | _c::api::mod                                                        |
u8:79   | Crate          | crate              | _c::crate                                                           |
u8:80   | Module         | api                | _c::api                                                             |
u8:81   | File           | dto                | _c::api::dto                                                        |
u8:82   | Struct         | UserDto            | _c::api::dto::UserDto                                               | [global]
u8:83   | Field          | id                 | _c::api::dto::UserDto::id                                           |
u8:84   | Field          | email              | _c::api::dto::UserDto::email                                        |
u8:85   | UnresolvedType | From               | _c::api::dto::From                                                  |
u8:86   | Function       | from               | _c::api::dto::UserDto::from                                         |
u8:87   | Variable       | user               | _c::api::dto::UserDto::from::user                                   |
u8:88   | Struct         | CreateUserRequest  | _c::api::dto::CreateUserRequest                                     | [global]
u8:89   | Field          | email              | _c::api::dto::CreateUserRequest::email                              |
u8:90   | Field          | password           | _c::api::dto::CreateUserRequest::password                           |
u8:91   | Struct         | LoginRequest       | _c::api::dto::LoginRequest                                          | [global]
u8:92   | Field          | email              | _c::api::dto::LoginRequest::email                                   |
u8:93   | Field          | password           | _c::api::dto::LoginRequest::password                                |
u9:94   | Crate          | crate              | _c::crate                                                           |
u9:95   | Module         | api                | _c::api                                                             |
u9:96   | File           | handlers           | _c::api::handlers                                                   |
u9:97   | Function       | handle_get_user    | _c::api::handlers::handle_get_user                                  | [global]
u9:98   | Variable       | service            | _c::api::handlers::handle_get_user::service                         |
u9:99   | Variable       | id                 | _c::api::handlers::handle_get_user::id                              |
u9:100  | Function       | handle_create_user | _c::api::handlers::handle_create_user                               | [global]
u9:101  | Variable       | service            | _c::api::handlers::handle_create_user::service                      |
u9:102  | Variable       | req                | _c::api::handlers::handle_create_user::req                          |
u9:103  | Variable       | user               | _c::api::handlers::handle_create_user::user                         |
u9:104  | Function       | handle_login       | _c::api::handlers::handle_login                                     | [global]
u9:105  | Variable       | service            | _c::api::handlers::handle_login::service                            |
u9:106  | Variable       | req                | _c::api::handlers::handle_login::req                                |
u10:107 | Crate          | crate              | _c::crate                                                           |
u10:108 | File           | main               | _c::main                                                            |
u10:109 | Function       | main               | _c::main::main                                                      |
u10:110 | Variable       | repo               | _c::main::main::repo                                                |
u10:111 | Variable       | user_service       | _c::main::main::user_service                                        |
u10:112 | Variable       | req                | _c::main::main::req                                                 |
u10:113 | Variable       | created            | _c::main::main::created                                             |

--- expect:symbol-deps ---
u0:17 <- [u3:41, u3:42, u5:60, u5:63, u6:71, u6:72, u6:73, u6:75]
u0:18 <- [u2:28, u2:30, u2:31, u3:44, u3:45, u3:46, u5:60, u5:61, u5:62, u8:82, u8:84, u8:88, u8:89, u8:90, u8:91, u8:92, u8:93]
u0:8 <- [u2:28, u2:29, u3:35, u3:37, u3:39, u3:40, u5:58, u5:59, u8:82, u8:83, u9:97, u9:99]
u10:109 -> [u3:35, u3:38, u5:54, u5:56, u8:88, u9:100, u9:97]
u10:110 -> [u3:35]
u10:111 -> [u5:54]
u10:112 -> [u8:88]
u10:113 -> [u9:100]
u2:28 -> [u0:18, u0:8]
u2:28 <- [u3:35, u3:36, u3:44, u3:47, u8:86, u8:87]
u2:29 -> [u0:8]
u2:30 -> [u0:18]
u2:31 -> [u0:18]
u3:35 -> [u0:8, u2:28, u3:39, u3:41, u3:44]
u3:35 <- [u10:109, u10:110, u3:38, u5:54, u5:55, u5:56, u5:57, u6:67, u6:68, u6:69, u6:70, u6:71, u6:74]
u3:36 -> [u2:28]
u3:37 -> [u0:8]
u3:38 -> [u3:35]
u3:38 <- [u10:109]
u3:39 -> [u0:8]
u3:39 <- [u3:35, u5:58]
u3:40 -> [u0:8]
u3:41 -> [u0:17]
u3:41 <- [u3:35, u6:71]
u3:42 -> [u0:17]
u3:44 -> [u0:18, u2:28]
u3:44 <- [u3:35, u5:60]
u3:45 -> [u0:18]
u3:46 -> [u0:18]
u3:47 -> [u2:28]
u5:54 -> [u3:35, u5:58, u5:60]
u5:54 <- [u10:109, u10:111, u5:56, u9:100, u9:101, u9:103, u9:97, u9:98]
u5:55 -> [u3:35]
u5:56 -> [u3:35, u5:54]
u5:56 <- [u10:109]
u5:57 -> [u3:35]
u5:58 -> [u0:8, u3:39]
u5:58 <- [u5:54, u9:97]
u5:59 -> [u0:8]
u5:60 -> [u0:17, u0:18, u3:44]
u5:60 <- [u5:54, u9:100]
u5:61 -> [u0:18]
u5:62 -> [u0:18]
u5:63 -> [u0:17]
u6:67 -> [u3:35, u6:71]
u6:67 <- [u6:69, u9:104, u9:105]
u6:68 -> [u3:35]
u6:69 -> [u3:35, u6:67]
u6:70 -> [u3:35]
u6:71 -> [u0:17, u3:35, u3:41]
u6:71 <- [u6:67, u9:104]
u6:72 -> [u0:17]
u6:73 -> [u0:17]
u6:74 -> [u3:35]
u6:75 -> [u0:17]
u8:82 -> [u0:18, u0:8]
u8:82 <- [u8:86]
u8:83 -> [u0:8]
u8:84 -> [u0:18]
u8:86 -> [u2:28, u8:82]
u8:86 <- [u9:100]
u8:87 -> [u2:28]
u8:88 -> [u0:18]
u8:88 <- [u10:109, u10:112, u9:100, u9:102]
u8:89 -> [u0:18]
u8:90 -> [u0:18]
u8:91 -> [u0:18]
u8:91 <- [u9:104, u9:106]
u8:92 -> [u0:18]
u8:93 -> [u0:18]
u9:100 -> [u5:54, u5:60, u8:86, u8:88]
u9:100 <- [u10:109, u10:113]
u9:101 -> [u5:54]
u9:102 -> [u8:88]
u9:103 -> [u5:54]
u9:104 -> [u6:67, u6:71, u8:91]
u9:105 -> [u6:67]
u9:106 -> [u8:91]
u9:97 -> [u0:8, u5:54, u5:58]
u9:97 <- [u10:109]
u9:98 -> [u5:54]
u9:99 -> [u0:8]

--- expect:graph ---
digraph project {
  subgraph cluster_0 {
    label="_c";
    style=filled;
    color=lightgrey;
    subgraph cluster_1 {
      label="api";
      style=filled;
      color=lightgrey;
      n29[label="CreateUserRequest", full_path="$TMP/src/api/dto.rs:14"];
      n30[label="LoginRequest", full_path="$TMP/src/api/dto.rs:19"];
      n34[label="handle_login", full_path="$TMP/src/api/handlers.rs:13"];
      n32[label="handle_get_user", full_path="$TMP/src/api/handlers.rs:4"];
      n33[label="handle_create_user", full_path="$TMP/src/api/handlers.rs:8"];
    }
    subgraph cluster_2 {
      label="data";
      style=filled;
      color=lightgrey;
      n4[label="User", full_path="$TMP/src/data/entity.rs:2"];
      n6[label="UserRepository", full_path="$TMP/src/data/repository.rs:4"];
    }
    subgraph cluster_3 {
      label="main";
      style=filled;
      color=lightgrey;
      n36[label="main", full_path="$TMP/src/main.rs:9"];
    }
    subgraph cluster_4 {
      label="service";
      style=filled;
      color=lightgrey;
      n20[label="AuthService", full_path="$TMP/src/service/auth_service.rs:3"];
      n14[label="UserService", full_path="$TMP/src/service/user_service.rs:3"];
    }
  }
  n6 -> n4;
  n14 -> n6;
  n20 -> n6;
  n34 -> n20;
  n34 -> n30;
  n32 -> n14;
  n33 -> n14;
  n33 -> n29;
  n36 -> n32;
  n36 -> n33;
}


===============================================================================
hexagonal-architecture
===============================================================================
Tests hexagonal (ports & adapters) architecture: domain core, ports (traits), adapters (implementations).

--- file: src/lib.rs ---
pub mod domain;
pub mod ports;
pub mod adapters;
pub mod application;

--- file: src/domain/mod.rs ---
mod order;
mod product;

pub use order::{Order, OrderStatus};
pub use product::Product;

--- file: src/domain/product.rs ---
#[derive(Clone)]
pub struct Product {
    pub id: u64,
    pub name: String,
    pub price: f64,
    pub stock: u32,
}

--- file: src/domain/order.rs ---
use super::product::Product;

#[derive(Clone, PartialEq)]
pub enum OrderStatus {
    Pending,
    Confirmed,
    Shipped,
    Delivered,
}

#[derive(Clone)]
pub struct Order {
    pub id: u64,
    pub products: Vec<(Product, u32)>,  // (product, quantity)
    pub status: OrderStatus,
}

impl Order {
    pub fn new(id: u64) -> Self {
        Order { id, products: Vec::new(), status: OrderStatus::Pending }
    }

    pub fn add_product(&mut self, product: Product, quantity: u32) {
        self.products.push((product, quantity));
    }

    pub fn total(&self) -> f64 {
        self.products.iter().map(|(p, q)| p.price * *q as f64).sum()
    }

    pub fn confirm(&mut self) {
        self.status = OrderStatus::Confirmed;
    }
}

--- file: src/ports/mod.rs ---
mod inbound;
mod outbound;

pub use inbound::*;
pub use outbound::*;

--- file: src/ports/inbound.rs ---
use crate::domain::{Order, Product};

// Inbound port - what the application offers
pub trait OrderUseCase {
    fn create_order(&mut self) -> Order;
    fn add_to_order(&mut self, order_id: u64, product_id: u64, quantity: u32) -> bool;
    fn confirm_order(&mut self, order_id: u64) -> bool;
    fn get_order(&self, order_id: u64) -> Option<Order>;
}

pub trait ProductUseCase {
    fn get_product(&self, id: u64) -> Option<Product>;
    fn list_products(&self) -> Vec<Product>;
}

--- file: src/ports/outbound.rs ---
use crate::domain::{Order, Product};

// Outbound port - what the application needs
pub trait OrderRepository {
    fn save(&mut self, order: Order) -> u64;
    fn find_by_id(&self, id: u64) -> Option<Order>;
    fn update(&mut self, order: Order) -> bool;
}

pub trait ProductRepository {
    fn find_by_id(&self, id: u64) -> Option<Product>;
    fn find_all(&self) -> Vec<Product>;
}

pub trait NotificationService {
    fn notify_order_confirmed(&self, order: &Order);
}

--- file: src/adapters/mod.rs ---
mod memory_order_repo;
mod memory_product_repo;
mod email_notification;

pub use memory_order_repo::InMemoryOrderRepo;
pub use memory_product_repo::InMemoryProductRepo;
pub use email_notification::EmailNotification;

--- file: src/adapters/memory_order_repo.rs ---
use crate::domain::Order;
use crate::ports::OrderRepository;
use std::collections::HashMap;

pub struct InMemoryOrderRepo {
    orders: HashMap<u64, Order>,
    next_id: u64,
}

impl InMemoryOrderRepo {
    pub fn new() -> Self {
        InMemoryOrderRepo { orders: HashMap::new(), next_id: 1 }
    }
}

impl OrderRepository for InMemoryOrderRepo {
    fn save(&mut self, mut order: Order) -> u64 {
        order.id = self.next_id;
        self.next_id += 1;
        let id = order.id;
        self.orders.insert(id, order);
        id
    }

    fn find_by_id(&self, id: u64) -> Option<Order> {
        self.orders.get(&id).cloned()
    }

    fn update(&mut self, order: Order) -> bool {
        if self.orders.contains_key(&order.id) {
            self.orders.insert(order.id, order);
            true
        } else {
            false
        }
    }
}

--- file: src/adapters/memory_product_repo.rs ---
use crate::domain::Product;
use crate::ports::ProductRepository;
use std::collections::HashMap;

pub struct InMemoryProductRepo {
    products: HashMap<u64, Product>,
}

impl InMemoryProductRepo {
    pub fn new() -> Self {
        let mut products = HashMap::new();
        products.insert(1, Product { id: 1, name: "Widget".to_string(), price: 9.99, stock: 100 });
        products.insert(2, Product { id: 2, name: "Gadget".to_string(), price: 19.99, stock: 50 });
        InMemoryProductRepo { products }
    }
}

impl ProductRepository for InMemoryProductRepo {
    fn find_by_id(&self, id: u64) -> Option<Product> {
        self.products.get(&id).cloned()
    }

    fn find_all(&self) -> Vec<Product> {
        self.products.values().cloned().collect()
    }
}

--- file: src/adapters/email_notification.rs ---
use crate::domain::Order;
use crate::ports::NotificationService;

pub struct EmailNotification;

impl NotificationService for EmailNotification {
    fn notify_order_confirmed(&self, order: &Order) {
        println!("Email: Order {} confirmed, total: ${:.2}", order.id, order.total());
    }
}

--- file: src/application/mod.rs ---
mod order_service;

pub use order_service::OrderService;

--- file: src/application/order_service.rs ---
use crate::domain::Order;
use crate::ports::{OrderUseCase, OrderRepository, ProductRepository, NotificationService};

pub struct OrderService<O: OrderRepository, P: ProductRepository, N: NotificationService> {
    order_repo: O,
    product_repo: P,
    notification: N,
}

impl<O: OrderRepository, P: ProductRepository, N: NotificationService> OrderService<O, P, N> {
    pub fn new(order_repo: O, product_repo: P, notification: N) -> Self {
        OrderService { order_repo, product_repo, notification }
    }
}

impl<O: OrderRepository, P: ProductRepository, N: NotificationService> OrderUseCase for OrderService<O, P, N> {
    fn create_order(&mut self) -> Order {
        let order = Order::new(0);
        let id = self.order_repo.save(order);
        self.order_repo.find_by_id(id).unwrap()
    }

    fn add_to_order(&mut self, order_id: u64, product_id: u64, quantity: u32) -> bool {
        let product = match self.product_repo.find_by_id(product_id) {
            Some(p) => p,
            None => return false,
        };

        let mut order = match self.order_repo.find_by_id(order_id) {
            Some(o) => o,
            None => return false,
        };

        order.add_product(product, quantity);
        self.order_repo.update(order)
    }

    fn confirm_order(&mut self, order_id: u64) -> bool {
        let mut order = match self.order_repo.find_by_id(order_id) {
            Some(o) => o,
            None => return false,
        };

        order.confirm();
        self.notification.notify_order_confirmed(&order);
        self.order_repo.update(order)
    }

    fn get_order(&self, order_id: u64) -> Option<Order> {
        self.order_repo.find_by_id(order_id)
    }
}

--- file: src/main.rs ---
mod domain;
mod ports;
mod adapters;
mod application;

use adapters::{InMemoryOrderRepo, InMemoryProductRepo, EmailNotification};
use application::OrderService;
use ports::OrderUseCase;

fn main() {
    let order_repo = InMemoryOrderRepo::new();
    let product_repo = InMemoryProductRepo::new();
    let notification = EmailNotification;

    let mut service = OrderService::new(order_repo, product_repo, notification);

    let order = service.create_order();
    service.add_to_order(order.id, 1, 2);  // 2 Widgets
    service.add_to_order(order.id, 2, 1);  // 1 Gadget
    service.confirm_order(order.id);

    if let Some(confirmed) = service.get_order(order.id) {
        println!("Order {} confirmed, total: ${:.2}", confirmed.id, confirmed.total());
    }
}

--- expect:symbols ---
u0:1    | Primitive      | i32                    | i32                                                                                | [global]
u0:2    | Primitive      | i64                    | i64                                                                                | [global]
u0:3    | Primitive      | i16                    | i16                                                                                | [global]
u0:4    | Primitive      | i8                     | i8                                                                                 | [global]
u0:5    | Primitive      | i128                   | i128                                                                               | [global]
u0:6    | Primitive      | isize                  | isize                                                                              | [global]
u0:7    | Primitive      | u32                    | u32                                                                                | [global]
u0:8    | Primitive      | u64                    | u64                                                                                | [global]
u0:9    | Primitive      | u16                    | u16                                                                                | [global]
u0:10   | Primitive      | u8                     | u8                                                                                 | [global]
u0:11   | Primitive      | u128                   | u128                                                                               | [global]
u0:12   | Primitive      | usize                  | usize                                                                              | [global]
u0:13   | Primitive      | f32                    | f32                                                                                | [global]
u0:14   | Primitive      | f64                    | f64                                                                                | [global]
u0:15   | Primitive      | bool                   | bool                                                                               | [global]
u0:16   | Primitive      | char                   | char                                                                               | [global]
u0:17   | Primitive      | str                    | str                                                                                | [global]
u0:18   | Primitive      | String                 | String                                                                             | [global]
u0:19   | Crate          | _c                     | _c                                                                                 | [global]
u0:20   | Crate          | crate                  | _c::crate                                                                          |
u0:21   | File           | lib                    | _c::lib                                                                            |
u1:22   | Crate          | crate                  | _c::crate                                                                          |
u1:23   | Module         | domain                 | _c::domain                                                                         |
u1:24   | File           | mod                    | _c::domain::mod                                                                    |
u2:25   | Crate          | crate                  | _c::crate                                                                          |
u2:26   | Module         | domain                 | _c::domain                                                                         |
u2:27   | File           | product                | _c::domain::product                                                                |
u2:28   | Struct         | Product                | _c::domain::product::Product                                                       | [global]
u2:29   | Field          | id                     | _c::domain::product::Product::id                                                   |
u2:30   | Field          | name                   | _c::domain::product::Product::name                                                 |
u2:31   | Field          | price                  | _c::domain::product::Product::price                                                |
u2:32   | Field          | stock                  | _c::domain::product::Product::stock                                                |
u3:33   | Crate          | crate                  | _c::crate                                                                          |
u3:34   | Module         | domain                 | _c::domain                                                                         |
u3:35   | File           | order                  | _c::domain::order                                                                  |
u3:36   | Enum           | OrderStatus            | _c::domain::order::OrderStatus                                                     | [global]
u3:37   | EnumVariant    | Pending                | _c::domain::order::OrderStatus::Pending                                            |
u3:38   | EnumVariant    | Confirmed              | _c::domain::order::OrderStatus::Confirmed                                          |
u3:39   | EnumVariant    | Shipped                | _c::domain::order::OrderStatus::Shipped                                            |
u3:40   | EnumVariant    | Delivered              | _c::domain::order::OrderStatus::Delivered                                          |
u3:41   | Struct         | Order                  | _c::domain::order::Order                                                           | [global]
u3:42   | Field          | id                     | _c::domain::order::Order::id                                                       |
u3:43   | Field          | products               | _c::domain::order::Order::products                                                 |
u3:44   | Field          | status                 | _c::domain::order::Order::status                                                   |
u3:45   | Function       | new                    | _c::domain::order::Order::new                                                      | [global]
u3:46   | Variable       | id                     | _c::domain::order::Order::new::id                                                  |
u3:47   | Function       | add_product            | _c::domain::order::Order::add_product                                              | [global]
u3:48   | Variable       | product                | _c::domain::order::Order::add_product::product                                     |
u3:49   | Variable       | quantity               | _c::domain::order::Order::add_product::quantity                                    |
u3:50   | Function       | total                  | _c::domain::order::Order::total                                                    | [global]
u3:51   | Variable       | p                      | _c::domain::order::Order::total::p                                                 |
u3:52   | Variable       | q                      | _c::domain::order::Order::total::q                                                 |
u3:53   | Function       | confirm                | _c::domain::order::Order::confirm                                                  | [global]
u4:54   | Crate          | crate                  | _c::crate                                                                          |
u4:55   | Module         | ports                  | _c::ports                                                                          |
u4:56   | File           | mod                    | _c::ports::mod                                                                     |
u5:57   | Crate          | crate                  | _c::crate                                                                          |
u5:58   | Module         | ports                  | _c::ports                                                                          |
u5:59   | File           | inbound                | _c::ports::inbound                                                                 |
u5:60   | Trait          | OrderUseCase           | _c::ports::inbound::OrderUseCase                                                   | [global]
u5:61   | Function       | create_order           | _c::ports::inbound::OrderUseCase::create_order                                     |
u5:62   | Function       | add_to_order           | _c::ports::inbound::OrderUseCase::add_to_order                                     |
u5:63   | Variable       | order_id               | _c::ports::inbound::OrderUseCase::add_to_order::order_id                           |
u5:64   | Variable       | product_id             | _c::ports::inbound::OrderUseCase::add_to_order::product_id                         |
u5:65   | Variable       | quantity               | _c::ports::inbound::OrderUseCase::add_to_order::quantity                           |
u5:66   | Function       | confirm_order          | _c::ports::inbound::OrderUseCase::confirm_order                                    |
u5:67   | Variable       | order_id               | _c::ports::inbound::OrderUseCase::confirm_order::order_id                          |
u5:68   | Function       | get_order              | _c::ports::inbound::OrderUseCase::get_order                                        |
u5:69   | Variable       | order_id               | _c::ports::inbound::OrderUseCase::get_order::order_id                              |
u5:70   | Trait          | ProductUseCase         | _c::ports::inbound::ProductUseCase                                                 | [global]
u5:71   | Function       | get_product            | _c::ports::inbound::ProductUseCase::get_product                                    |
u5:72   | Variable       | id                     | _c::ports::inbound::ProductUseCase::get_product::id                                |
u5:73   | Function       | list_products          | _c::ports::inbound::ProductUseCase::list_products                                  |
u6:74   | Crate          | crate                  | _c::crate                                                                          |
u6:75   | Module         | ports                  | _c::ports                                                                          |
u6:76   | File           | outbound               | _c::ports::outbound                                                                |
u6:77   | Trait          | OrderRepository        | _c::ports::outbound::OrderRepository                                               | [global]
u6:78   | Function       | save                   | _c::ports::outbound::OrderRepository::save                                         |
u6:79   | Variable       | order                  | _c::ports::outbound::OrderRepository::save::order                                  |
u6:80   | Function       | find_by_id             | _c::ports::outbound::OrderRepository::find_by_id                                   |
u6:81   | Variable       | id                     | _c::ports::outbound::OrderRepository::find_by_id::id                               |
u6:82   | Function       | update                 | _c::ports::outbound::OrderRepository::update                                       |
u6:83   | Variable       | order                  | _c::ports::outbound::OrderRepository::update::order                                |
u6:84   | Trait          | ProductRepository      | _c::ports::outbound::ProductRepository                                             | [global]
u6:85   | Function       | find_all               | _c::ports::outbound::ProductRepository::find_all                                   |
u6:86   | Trait          | NotificationService    | _c::ports::outbound::NotificationService                                           | [global]
u6:87   | Function       | notify_order_confirmed | _c::ports::outbound::NotificationService::notify_order_confirmed                   |
u6:88   | Variable       | order                  | _c::ports::outbound::NotificationService::notify_order_confirmed::order            |
u7:89   | Crate          | crate                  | _c::crate                                                                          |
u7:90   | Module         | adapters               | _c::adapters                                                                       |
u7:91   | File           | mod                    | _c::adapters::mod                                                                  |
u8:92   | Crate          | crate                  | _c::crate                                                                          |
u8:93   | Module         | adapters               | _c::adapters                                                                       |
u8:94   | File           | memory_order_repo      | _c::adapters::memory_order_repo                                                    |
u8:95   | Struct         | InMemoryOrderRepo      | _c::adapters::memory_order_repo::InMemoryOrderRepo                                 | [global]
u8:96   | Field          | orders                 | _c::adapters::memory_order_repo::InMemoryOrderRepo::orders                         |
u8:97   | Field          | next_id                | _c::adapters::memory_order_repo::InMemoryOrderRepo::next_id                        |
u8:98   | Function       | new                    | _c::adapters::memory_order_repo::InMemoryOrderRepo::new                            | [global]
u8:99   | UnresolvedType | OrderRepository        | _c::adapters::memory_order_repo::OrderRepository                                   |
u8:100  | Function       | save                   | _c::adapters::memory_order_repo::InMemoryOrderRepo::save                           |
u8:101  | Variable       | order                  | _c::adapters::memory_order_repo::InMemoryOrderRepo::save::order                    |
u8:102  | Variable       | id                     | _c::adapters::memory_order_repo::InMemoryOrderRepo::save::id                       |
u8:103  | Function       | find_by_id             | _c::adapters::memory_order_repo::InMemoryOrderRepo::find_by_id                     |
u8:104  | Variable       | id                     | _c::adapters::memory_order_repo::InMemoryOrderRepo::find_by_id::id                 |
u8:105  | Function       | update                 | _c::adapters::memory_order_repo::InMemoryOrderRepo::update                         |
u8:106  | Variable       | order                  | _c::adapters::memory_order_repo::InMemoryOrderRepo::update::order                  |
u9:107  | Crate          | crate                  | _c::crate                                                                          |
u9:108  | Module         | adapters               | _c::adapters                                                                       |
u9:109  | File           | memory_product_repo    | _c::adapters::memory_product_repo                                                  |
u9:110  | Struct         | InMemoryProductRepo    | _c::adapters::memory_product_repo::InMemoryProductRepo                             | [global]
u9:111  | Field          | products               | _c::adapters::memory_product_repo::InMemoryProductRepo::products                   |
u9:112  | Function       | new                    | _c::adapters::memory_product_repo::InMemoryProductRepo::new                        | [global]
u9:113  | Variable       | products               | _c::adapters::memory_product_repo::InMemoryProductRepo::new::products              |
u9:114  | UnresolvedType | ProductRepository      | _c::adapters::memory_product_repo::ProductRepository                               |
u9:115  | Function       | find_by_id             | _c::adapters::memory_product_repo::InMemoryProductRepo::find_by_id                 |
u9:116  | Variable       | id                     | _c::adapters::memory_product_repo::InMemoryProductRepo::find_by_id::id             |
u9:117  | Function       | find_all               | _c::adapters::memory_product_repo::InMemoryProductRepo::find_all                   |
u10:118 | Crate          | crate                  | _c::crate                                                                          |
u10:119 | Module         | adapters               | _c::adapters                                                                       |
u10:120 | File           | email_notification     | _c::adapters::email_notification                                                   |
u10:121 | Struct         | EmailNotification      | _c::adapters::email_notification::EmailNotification                                | [global]
u10:122 | UnresolvedType | NotificationService    | _c::adapters::email_notification::NotificationService                              |
u10:123 | Function       | notify_order_confirmed | _c::adapters::email_notification::EmailNotification::notify_order_confirmed        |
u10:124 | Variable       | order                  | _c::adapters::email_notification::EmailNotification::notify_order_confirmed::order |
u11:125 | Crate          | crate                  | _c::crate                                                                          |
u11:126 | Module         | application            | _c::application                                                                    |
u11:127 | File           | mod                    | _c::application::mod                                                               |
u12:128 | Crate          | crate                  | _c::crate                                                                          |
u12:129 | Module         | application            | _c::application                                                                    |
u12:130 | File           | order_service          | _c::application::order_service                                                     |
u12:131 | Struct         | OrderService           | _c::application::order_service::OrderService                                       | [global]
u12:132 | TypeParameter  | O                      | _c::application::order_service::OrderService::O                                    |
u12:133 | TypeParameter  | P                      | _c::application::order_service::OrderService::P                                    |
u12:134 | TypeParameter  | N                      | _c::application::order_service::OrderService::N                                    |
u12:135 | Field          | order_repo             | _c::application::order_service::OrderService::order_repo                           |
u12:136 | Field          | product_repo           | _c::application::order_service::OrderService::product_repo                         |
u12:137 | Field          | notification           | _c::application::order_service::OrderService::notification                         |
u12:138 | Function       | new                    | _c::application::order_service::OrderService::new                                  | [global]
u12:139 | Variable       | order_repo             | _c::application::order_service::OrderService::new::order_repo                      |
u12:140 | Variable       | product_repo           | _c::application::order_service::OrderService::new::product_repo                    |
u12:141 | Variable       | notification           | _c::application::order_service::OrderService::new::notification                    |
u12:142 | UnresolvedType | OrderUseCase           | _c::application::order_service::OrderUseCase                                       |
u12:143 | Function       | create_order           | _c::application::order_service::OrderService::create_order                         |
u12:144 | Variable       | order                  | _c::application::order_service::OrderService::create_order::order                  |
u12:145 | Variable       | id                     | _c::application::order_service::OrderService::create_order::id                     |
u12:146 | Function       | add_to_order           | _c::application::order_service::OrderService::add_to_order                         |
u12:147 | Variable       | order_id               | _c::application::order_service::OrderService::add_to_order::order_id               |
u12:148 | Variable       | product_id             | _c::application::order_service::OrderService::add_to_order::product_id             |
u12:149 | Variable       | quantity               | _c::application::order_service::OrderService::add_to_order::quantity               |
u12:150 | Variable       | product                | _c::application::order_service::OrderService::add_to_order::product                |
u12:151 | Variable       | order                  | _c::application::order_service::OrderService::add_to_order::order                  |
u12:152 | Function       | confirm_order          | _c::application::order_service::OrderService::confirm_order                        |
u12:153 | Variable       | order_id               | _c::application::order_service::OrderService::confirm_order::order_id              |
u12:154 | Variable       | order                  | _c::application::order_service::OrderService::confirm_order::order                 |
u12:155 | Function       | get_order              | _c::application::order_service::OrderService::get_order                            |
u12:156 | Variable       | order_id               | _c::application::order_service::OrderService::get_order::order_id                  |
u13:157 | Crate          | crate                  | _c::crate                                                                          |
u13:158 | File           | main                   | _c::main                                                                           |
u13:159 | Function       | main                   | _c::main::main                                                                     |
u13:160 | Variable       | order_repo             | _c::main::main::order_repo                                                         |
u13:161 | Variable       | product_repo           | _c::main::main::product_repo                                                       |
u13:162 | Variable       | notification           | _c::main::main::notification                                                       |
u13:163 | Variable       | service                | _c::main::main::service                                                            |
u13:164 | Variable       | order                  | _c::main::main::order                                                              |

--- expect:symbol-deps ---
u0:14 <- [u2:28, u2:31, u3:50]
u0:15 <- [u12:146, u12:152, u5:62, u5:66, u6:82, u8:105]
u0:18 <- [u2:28, u2:30]
u0:7 <- [u12:146, u12:149, u2:28, u2:32, u3:41, u3:47, u3:49, u5:62, u5:65]
u0:8 <- [u12:146, u12:147, u12:148, u12:152, u12:153, u12:155, u12:156, u2:28, u2:29, u3:41, u3:42, u3:45, u3:46, u5:62, u5:63, u5:64, u5:66, u5:67, u5:68, u5:69, u5:71, u5:72, u6:78, u6:80, u6:81, u8:100, u8:102, u8:103, u8:104, u8:95, u8:97, u9:110, u9:115, u9:116]
u10:121 -> [u10:123]
u10:121 <- [u13:159, u13:162]
u10:123 -> [u3:41]
u10:123 <- [u10:121, u12:152]
u10:124 -> [u3:41]
u12:131 -> [u12:143, u12:146, u12:152, u12:155, u6:77, u6:84, u6:86]
u12:131 <- [u12:138, u13:159, u13:163, u13:164]
u12:138 -> [u12:131]
u12:138 <- [u13:159]
u12:143 -> [u3:41, u3:45, u8:100, u9:115]
u12:143 <- [u12:131, u13:159]
u12:144 -> [u3:41]
u12:146 -> [u0:15, u0:7, u0:8, u3:47, u8:105, u9:115]
u12:146 <- [u12:131, u13:159]
u12:147 -> [u0:8]
u12:148 -> [u0:8]
u12:149 -> [u0:7]
u12:152 -> [u0:15, u0:8, u10:123, u3:53, u8:105, u9:115]
u12:152 <- [u12:131, u13:159]
u12:153 -> [u0:8]
u12:155 -> [u0:8, u9:115]
u12:155 <- [u12:131, u13:159]
u12:156 -> [u0:8]
u13:159 -> [u10:121, u12:131, u12:138, u12:143, u12:146, u12:152, u12:155, u8:95, u8:98, u9:110, u9:112]
u13:160 -> [u8:95]
u13:161 -> [u9:110]
u13:162 -> [u10:121]
u13:163 -> [u12:131]
u13:164 -> [u12:131]
u2:28 -> [u0:14, u0:18, u0:7, u0:8]
u2:28 <- [u3:41, u3:43, u3:47, u3:48, u9:110, u9:111, u9:112]
u2:29 -> [u0:8]
u2:30 -> [u0:18]
u2:31 -> [u0:14]
u2:32 -> [u0:7]
u3:36 -> [u3:37, u3:38, u3:39, u3:40]
u3:36 <- [u3:41, u3:44, u3:45, u3:53]
u3:37 <- [u3:36, u3:45]
u3:38 <- [u3:36, u3:53]
u3:39 <- [u3:36]
u3:40 <- [u3:36]
u3:41 -> [u0:7, u0:8, u2:28, u3:36, u3:47, u3:50, u3:53]
u3:41 <- [u10:123, u10:124, u12:143, u12:144, u3:45, u6:78, u6:79, u6:82, u6:83, u6:87, u6:88, u8:100, u8:101, u8:105, u8:106, u8:95, u8:96]
u3:42 -> [u0:8]
u3:43 -> [u2:28]
u3:44 -> [u3:36]
u3:45 -> [u0:8, u3:36, u3:37, u3:41]
u3:45 <- [u12:143]
u3:46 -> [u0:8]
u3:47 -> [u0:7, u2:28]
u3:47 <- [u12:146, u3:41]
u3:48 -> [u2:28]
u3:49 -> [u0:7]
u3:50 -> [u0:14]
u3:50 <- [u3:41]
u3:53 -> [u3:36, u3:38]
u3:53 <- [u12:152, u3:41]
u5:60 -> [u5:61, u5:62, u5:66, u5:68]
u5:61 <- [u5:60]
u5:62 -> [u0:15, u0:7, u0:8]
u5:62 <- [u5:60]
u5:63 -> [u0:8]
u5:64 -> [u0:8]
u5:65 -> [u0:7]
u5:66 -> [u0:15, u0:8]
u5:66 <- [u5:60]
u5:67 -> [u0:8]
u5:68 -> [u0:8]
u5:68 <- [u5:60]
u5:69 -> [u0:8]
u5:70 -> [u5:71, u5:73]
u5:71 -> [u0:8]
u5:71 <- [u5:70]
u5:72 -> [u0:8]
u5:73 <- [u5:70]
u6:77 -> [u6:78, u6:80, u6:82]
u6:77 <- [u12:131]
u6:78 -> [u0:8, u3:41]
u6:78 <- [u6:77]
u6:79 -> [u3:41]
u6:80 -> [u0:8]
u6:80 <- [u6:77, u6:84]
u6:81 -> [u0:8]
u6:82 -> [u0:15, u3:41]
u6:82 <- [u6:77]
u6:83 -> [u3:41]
u6:84 -> [u6:80, u6:85]
u6:84 <- [u12:131]
u6:85 <- [u6:84]
u6:86 -> [u6:87]
u6:86 <- [u12:131]
u6:87 -> [u3:41]
u6:87 <- [u6:86]
u6:88 -> [u3:41]
u8:100 -> [u0:8, u3:41]
u8:100 <- [u12:143, u8:95]
u8:101 -> [u3:41]
u8:102 -> [u0:8]
u8:103 -> [u0:8]
u8:103 <- [u8:95]
u8:104 -> [u0:8]
u8:105 -> [u0:15, u3:41]
u8:105 <- [u12:146, u12:152, u8:95]
u8:106 -> [u3:41]
u8:95 -> [u0:8, u3:41, u8:100, u8:103, u8:105]
u8:95 <- [u13:159, u13:160, u8:98]
u8:96 -> [u3:41]
u8:97 -> [u0:8]
u8:98 -> [u8:95]
u8:98 <- [u13:159]
u9:110 -> [u0:8, u2:28, u9:115, u9:117]
u9:110 <- [u13:159, u13:161, u9:112]
u9:111 -> [u2:28]
u9:112 -> [u2:28, u9:110]
u9:112 <- [u13:159]
u9:115 -> [u0:8]
u9:115 <- [u12:143, u12:146, u12:152, u12:155, u9:110]
u9:116 -> [u0:8]
u9:117 <- [u9:110]


===============================================================================
clean-architecture
===============================================================================
Tests clean architecture: entities (core), use_cases (app logic), interface_adapters, frameworks (external).

--- file: src/lib.rs ---
pub mod entities;
pub mod use_cases;
pub mod interface_adapters;
pub mod frameworks;

--- file: src/entities/mod.rs ---
mod task;

pub use task::{Task, TaskStatus, Priority};

--- file: src/entities/task.rs ---
#[derive(Clone, PartialEq)]
pub enum TaskStatus {
    Todo,
    InProgress,
    Done,
}

#[derive(Clone, PartialEq, PartialOrd)]
pub enum Priority {
    Low,
    Medium,
    High,
}

#[derive(Clone)]
pub struct Task {
    pub id: u64,
    pub title: String,
    pub description: Option<String>,
    pub status: TaskStatus,
    pub priority: Priority,
}

impl Task {
    pub fn new(id: u64, title: String, priority: Priority) -> Self {
        Task {
            id,
            title,
            description: None,
            status: TaskStatus::Todo,
            priority,
        }
    }

    pub fn start(&mut self) {
        self.status = TaskStatus::InProgress;
    }

    pub fn complete(&mut self) {
        self.status = TaskStatus::Done;
    }

    pub fn is_done(&self) -> bool {
        self.status == TaskStatus::Done
    }
}

--- file: src/use_cases/mod.rs ---
mod task_use_cases;
mod ports;

pub use task_use_cases::*;
pub use ports::*;

--- file: src/use_cases/ports.rs ---
use crate::entities::Task;

// Output port - use case boundary
pub trait TaskGateway {
    fn save(&mut self, task: Task) -> u64;
    fn find_by_id(&self, id: u64) -> Option<Task>;
    fn find_all(&self) -> Vec<Task>;
    fn update(&mut self, task: Task) -> bool;
    fn delete(&mut self, id: u64) -> bool;
}

pub trait TaskPresenter {
    fn present_task(&self, task: &Task);
    fn present_task_list(&self, tasks: &[Task]);
    fn present_error(&self, message: &str);
}

--- file: src/use_cases/task_use_cases.rs ---
use crate::entities::{Task, Priority};
use super::ports::{TaskGateway, TaskPresenter};

pub struct CreateTaskUseCase<'a, G: TaskGateway, P: TaskPresenter> {
    gateway: &'a mut G,
    presenter: &'a P,
}

impl<'a, G: TaskGateway, P: TaskPresenter> CreateTaskUseCase<'a, G, P> {
    pub fn new(gateway: &'a mut G, presenter: &'a P) -> Self {
        CreateTaskUseCase { gateway, presenter }
    }

    pub fn execute(&mut self, title: String, priority: Priority) {
        let task = Task::new(0, title, priority);
        let id = self.gateway.save(task);
        if let Some(created) = self.gateway.find_by_id(id) {
            self.presenter.present_task(&created);
        }
    }
}

pub struct CompleteTaskUseCase<'a, G: TaskGateway, P: TaskPresenter> {
    gateway: &'a mut G,
    presenter: &'a P,
}

impl<'a, G: TaskGateway, P: TaskPresenter> CompleteTaskUseCase<'a, G, P> {
    pub fn new(gateway: &'a mut G, presenter: &'a P) -> Self {
        CompleteTaskUseCase { gateway, presenter }
    }

    pub fn execute(&mut self, task_id: u64) {
        match self.gateway.find_by_id(task_id) {
            Some(mut task) => {
                task.complete();
                self.gateway.update(task.clone());
                self.presenter.present_task(&task);
            }
            None => {
                self.presenter.present_error("Task not found");
            }
        }
    }
}

pub struct ListTasksUseCase<'a, G: TaskGateway, P: TaskPresenter> {
    gateway: &'a G,
    presenter: &'a P,
}

impl<'a, G: TaskGateway, P: TaskPresenter> ListTasksUseCase<'a, G, P> {
    pub fn new(gateway: &'a G, presenter: &'a P) -> Self {
        ListTasksUseCase { gateway, presenter }
    }

    pub fn execute(&self) {
        let tasks = self.gateway.find_all();
        self.presenter.present_task_list(&tasks);
    }
}

--- file: src/interface_adapters/mod.rs ---
mod memory_gateway;
mod console_presenter;

pub use memory_gateway::InMemoryTaskGateway;
pub use console_presenter::ConsolePresenter;

--- file: src/interface_adapters/memory_gateway.rs ---
use crate::entities::Task;
use crate::use_cases::TaskGateway;
use std::collections::HashMap;

pub struct InMemoryTaskGateway {
    tasks: HashMap<u64, Task>,
    next_id: u64,
}

impl InMemoryTaskGateway {
    pub fn new() -> Self {
        InMemoryTaskGateway { tasks: HashMap::new(), next_id: 1 }
    }
}

impl TaskGateway for InMemoryTaskGateway {
    fn save(&mut self, mut task: Task) -> u64 {
        task.id = self.next_id;
        self.next_id += 1;
        let id = task.id;
        self.tasks.insert(id, task);
        id
    }

    fn find_by_id(&self, id: u64) -> Option<Task> {
        self.tasks.get(&id).cloned()
    }

    fn find_all(&self) -> Vec<Task> {
        self.tasks.values().cloned().collect()
    }

    fn update(&mut self, task: Task) -> bool {
        if self.tasks.contains_key(&task.id) {
            self.tasks.insert(task.id, task);
            true
        } else {
            false
        }
    }

    fn delete(&mut self, id: u64) -> bool {
        self.tasks.remove(&id).is_some()
    }
}

--- file: src/interface_adapters/console_presenter.rs ---
use crate::entities::Task;
use crate::use_cases::TaskPresenter;

pub struct ConsolePresenter;

impl TaskPresenter for ConsolePresenter {
    fn present_task(&self, task: &Task) {
        println!("Task #{}: {} [{:?}]", task.id, task.title, task.status);
    }

    fn present_task_list(&self, tasks: &[Task]) {
        println!("=== Tasks ({}) ===", tasks.len());
        for task in tasks {
            self.present_task(task);
        }
    }

    fn present_error(&self, message: &str) {
        eprintln!("Error: {}", message);
    }
}

--- file: src/main.rs ---
mod entities;
mod use_cases;
mod interface_adapters;

use entities::Priority;
use use_cases::{CreateTaskUseCase, CompleteTaskUseCase, ListTasksUseCase};
use interface_adapters::{InMemoryTaskGateway, ConsolePresenter};

fn main() {
    let mut gateway = InMemoryTaskGateway::new();
    let presenter = ConsolePresenter;

    // Create tasks
    {
        let mut create = CreateTaskUseCase::new(&mut gateway, &presenter);
        create.execute("Learn Rust".to_string(), Priority::High);
        create.execute("Write tests".to_string(), Priority::Medium);
        create.execute("Deploy app".to_string(), Priority::Low);
    }

    // Complete first task
    {
        let mut complete = CompleteTaskUseCase::new(&mut gateway, &presenter);
        complete.execute(1);
    }

    // List all tasks
    {
        let list = ListTasksUseCase::new(&gateway, &presenter);
        list.execute();
    }
}

--- expect:symbols ---
u0:1   | Primitive      | i32                 | i32                                                                                   | [global]
u0:2   | Primitive      | i64                 | i64                                                                                   | [global]
u0:3   | Primitive      | i16                 | i16                                                                                   | [global]
u0:4   | Primitive      | i8                  | i8                                                                                    | [global]
u0:5   | Primitive      | i128                | i128                                                                                  | [global]
u0:6   | Primitive      | isize               | isize                                                                                 | [global]
u0:7   | Primitive      | u32                 | u32                                                                                   | [global]
u0:8   | Primitive      | u64                 | u64                                                                                   | [global]
u0:9   | Primitive      | u16                 | u16                                                                                   | [global]
u0:10  | Primitive      | u8                  | u8                                                                                    | [global]
u0:11  | Primitive      | u128                | u128                                                                                  | [global]
u0:12  | Primitive      | usize               | usize                                                                                 | [global]
u0:13  | Primitive      | f32                 | f32                                                                                   | [global]
u0:14  | Primitive      | f64                 | f64                                                                                   | [global]
u0:15  | Primitive      | bool                | bool                                                                                  | [global]
u0:16  | Primitive      | char                | char                                                                                  | [global]
u0:17  | Primitive      | str                 | str                                                                                   | [global]
u0:18  | Primitive      | String              | String                                                                                | [global]
u0:19  | Crate          | _c                  | _c                                                                                    | [global]
u0:20  | Crate          | crate               | _c::crate                                                                             |
u0:21  | File           | lib                 | _c::lib                                                                               |
u1:22  | Crate          | crate               | _c::crate                                                                             |
u1:23  | Module         | entities            | _c::entities                                                                          |
u1:24  | File           | mod                 | _c::entities::mod                                                                     |
u2:25  | Crate          | crate               | _c::crate                                                                             |
u2:26  | Module         | entities            | _c::entities                                                                          |
u2:27  | File           | task                | _c::entities::task                                                                    |
u2:28  | Enum           | TaskStatus          | _c::entities::task::TaskStatus                                                        | [global]
u2:29  | EnumVariant    | Todo                | _c::entities::task::TaskStatus::Todo                                                  |
u2:30  | EnumVariant    | InProgress          | _c::entities::task::TaskStatus::InProgress                                            |
u2:31  | EnumVariant    | Done                | _c::entities::task::TaskStatus::Done                                                  |
u2:32  | Enum           | Priority            | _c::entities::task::Priority                                                          | [global]
u2:33  | EnumVariant    | Low                 | _c::entities::task::Priority::Low                                                     |
u2:34  | EnumVariant    | Medium              | _c::entities::task::Priority::Medium                                                  |
u2:35  | EnumVariant    | High                | _c::entities::task::Priority::High                                                    |
u2:36  | Struct         | Task                | _c::entities::task::Task                                                              | [global]
u2:37  | Field          | id                  | _c::entities::task::Task::id                                                          |
u2:38  | Field          | title               | _c::entities::task::Task::title                                                       |
u2:39  | Field          | description         | _c::entities::task::Task::description                                                 |
u2:40  | Field          | status              | _c::entities::task::Task::status                                                      |
u2:41  | Field          | priority            | _c::entities::task::Task::priority                                                    |
u2:42  | Function       | new                 | _c::entities::task::Task::new                                                         | [global]
u2:43  | Variable       | id                  | _c::entities::task::Task::new::id                                                     |
u2:44  | Variable       | title               | _c::entities::task::Task::new::title                                                  |
u2:45  | Variable       | priority            | _c::entities::task::Task::new::priority                                               |
u2:46  | Function       | start               | _c::entities::task::Task::start                                                       | [global]
u2:47  | Function       | complete            | _c::entities::task::Task::complete                                                    | [global]
u2:48  | Function       | is_done             | _c::entities::task::Task::is_done                                                     | [global]
u3:49  | Crate          | crate               | _c::crate                                                                             |
u3:50  | Module         | use_cases           | _c::use_cases                                                                         |
u3:51  | File           | mod                 | _c::use_cases::mod                                                                    |
u4:52  | Crate          | crate               | _c::crate                                                                             |
u4:53  | Module         | use_cases           | _c::use_cases                                                                         |
u4:54  | File           | ports               | _c::use_cases::ports                                                                  |
u4:55  | Trait          | TaskGateway         | _c::use_cases::ports::TaskGateway                                                     | [global]
u4:56  | Function       | save                | _c::use_cases::ports::TaskGateway::save                                               |
u4:57  | Variable       | task                | _c::use_cases::ports::TaskGateway::save::task                                         |
u4:58  | Function       | find_by_id          | _c::use_cases::ports::TaskGateway::find_by_id                                         |
u4:59  | Variable       | id                  | _c::use_cases::ports::TaskGateway::find_by_id::id                                     |
u4:60  | Function       | find_all            | _c::use_cases::ports::TaskGateway::find_all                                           |
u4:61  | Function       | update              | _c::use_cases::ports::TaskGateway::update                                             |
u4:62  | Variable       | task                | _c::use_cases::ports::TaskGateway::update::task                                       |
u4:63  | Function       | delete              | _c::use_cases::ports::TaskGateway::delete                                             |
u4:64  | Variable       | id                  | _c::use_cases::ports::TaskGateway::delete::id                                         |
u4:65  | Trait          | TaskPresenter       | _c::use_cases::ports::TaskPresenter                                                   | [global]
u4:66  | Function       | present_task        | _c::use_cases::ports::TaskPresenter::present_task                                     |
u4:67  | Variable       | task                | _c::use_cases::ports::TaskPresenter::present_task::task                               |
u4:68  | Function       | present_task_list   | _c::use_cases::ports::TaskPresenter::present_task_list                                |
u4:69  | Variable       | tasks               | _c::use_cases::ports::TaskPresenter::present_task_list::tasks                         |
u4:70  | Function       | present_error       | _c::use_cases::ports::TaskPresenter::present_error                                    |
u4:71  | Variable       | message             | _c::use_cases::ports::TaskPresenter::present_error::message                           |
u5:72  | Crate          | crate               | _c::crate                                                                             |
u5:73  | Module         | use_cases           | _c::use_cases                                                                         |
u5:74  | File           | task_use_cases      | _c::use_cases::task_use_cases                                                         |
u5:75  | Struct         | CreateTaskUseCase   | _c::use_cases::task_use_cases::CreateTaskUseCase                                      | [global]
u5:76  | TypeParameter  | G                   | _c::use_cases::task_use_cases::CreateTaskUseCase::G                                   |
u5:77  | TypeParameter  | P                   | _c::use_cases::task_use_cases::CreateTaskUseCase::P                                   |
u5:78  | Field          | gateway             | _c::use_cases::task_use_cases::CreateTaskUseCase::gateway                             |
u5:79  | Field          | presenter           | _c::use_cases::task_use_cases::CreateTaskUseCase::presenter                           |
u5:80  | Function       | new                 | _c::use_cases::task_use_cases::CreateTaskUseCase::new                                 | [global]
u5:81  | Variable       | gateway             | _c::use_cases::task_use_cases::CreateTaskUseCase::new::gateway                        |
u5:82  | Variable       | presenter           | _c::use_cases::task_use_cases::CreateTaskUseCase::new::presenter                      |
u5:83  | Function       | execute             | _c::use_cases::task_use_cases::CreateTaskUseCase::execute                             | [global]
u5:84  | Variable       | title               | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::title                      |
u5:85  | Variable       | priority            | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::priority                   |
u5:86  | Variable       | task                | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::task                       |
u5:87  | Variable       | id                  | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::id                         |
u5:88  | Struct         | CompleteTaskUseCase | _c::use_cases::task_use_cases::CompleteTaskUseCase                                    | [global]
u5:89  | TypeParameter  | G                   | _c::use_cases::task_use_cases::CompleteTaskUseCase::G                                 |
u5:90  | TypeParameter  | P                   | _c::use_cases::task_use_cases::CompleteTaskUseCase::P                                 |
u5:91  | Field          | gateway             | _c::use_cases::task_use_cases::CompleteTaskUseCase::gateway                           |
u5:92  | Field          | presenter           | _c::use_cases::task_use_cases::CompleteTaskUseCase::presenter                         |
u5:93  | Variable       | task_id             | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::task_id                    |
u5:94  | Struct         | ListTasksUseCase    | _c::use_cases::task_use_cases::ListTasksUseCase                                       | [global]
u5:95  | TypeParameter  | G                   | _c::use_cases::task_use_cases::ListTasksUseCase::G                                    |
u5:96  | TypeParameter  | P                   | _c::use_cases::task_use_cases::ListTasksUseCase::P                                    |
u5:97  | Field          | gateway             | _c::use_cases::task_use_cases::ListTasksUseCase::gateway                              |
u5:98  | Field          | presenter           | _c::use_cases::task_use_cases::ListTasksUseCase::presenter                            |
u5:99  | Variable       | tasks               | _c::use_cases::task_use_cases::CreateTaskUseCase::execute::tasks                      |
u6:100 | Crate          | crate               | _c::crate                                                                             |
u6:101 | Module         | interface_adapters  | _c::interface_adapters                                                                |
u6:102 | File           | mod                 | _c::interface_adapters::mod                                                           |
u7:103 | Crate          | crate               | _c::crate                                                                             |
u7:104 | Module         | interface_adapters  | _c::interface_adapters                                                                |
u7:105 | File           | memory_gateway      | _c::interface_adapters::memory_gateway                                                |
u7:106 | Struct         | InMemoryTaskGateway | _c::interface_adapters::memory_gateway::InMemoryTaskGateway                           | [global]
u7:107 | Field          | tasks               | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::tasks                    |
u7:108 | Field          | next_id             | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::next_id                  |
u7:109 | Function       | new                 | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::new                      | [global]
u7:110 | UnresolvedType | TaskGateway         | _c::interface_adapters::memory_gateway::TaskGateway                                   |
u7:111 | Function       | save                | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::save                     |
u7:112 | Variable       | task                | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::save::task               |
u7:113 | Variable       | id                  | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::save::id                 |
u7:114 | Function       | find_by_id          | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::find_by_id               |
u7:115 | Variable       | id                  | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::find_by_id::id           |
u7:116 | Function       | find_all            | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::find_all                 |
u7:117 | Function       | update              | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::update                   |
u7:118 | Variable       | task                | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::update::task             |
u7:119 | Function       | delete              | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::delete                   |
u7:120 | Variable       | id                  | _c::interface_adapters::memory_gateway::InMemoryTaskGateway::delete::id               |
u8:121 | Crate          | crate               | _c::crate                                                                             |
u8:122 | Module         | interface_adapters  | _c::interface_adapters                                                                |
u8:123 | File           | console_presenter   | _c::interface_adapters::console_presenter                                             |
u8:124 | Struct         | ConsolePresenter    | _c::interface_adapters::console_presenter::ConsolePresenter                           | [global]
u8:125 | UnresolvedType | TaskPresenter       | _c::interface_adapters::console_presenter::TaskPresenter                              |
u8:126 | Function       | present_task        | _c::interface_adapters::console_presenter::ConsolePresenter::present_task             |
u8:127 | Variable       | task                | _c::interface_adapters::console_presenter::ConsolePresenter::present_task::task       |
u8:128 | Function       | present_task_list   | _c::interface_adapters::console_presenter::ConsolePresenter::present_task_list        |
u8:129 | Variable       | tasks               | _c::interface_adapters::console_presenter::ConsolePresenter::present_task_list::tasks |
u8:130 | Function       | present_error       | _c::interface_adapters::console_presenter::ConsolePresenter::present_error            |
u8:131 | Variable       | message             | _c::interface_adapters::console_presenter::ConsolePresenter::present_error::message   |
u9:132 | Crate          | crate               | _c::crate                                                                             |
u9:133 | File           | main                | _c::main                                                                              |
u9:134 | Function       | main                | _c::main::main                                                                        |
u9:135 | Variable       | gateway             | _c::main::main::gateway                                                               |
u9:136 | Variable       | presenter           | _c::main::main::presenter                                                             |
u9:137 | Variable       | create              | _c::main::main::create                                                                |
u9:138 | Variable       | complete            | _c::main::main::complete                                                              |
u9:139 | Variable       | list                | _c::main::main::list                                                                  |

--- expect:symbol-deps ---
u0:15 <- [u2:48, u4:61, u4:63, u7:117, u7:119]
u0:17 <- [u4:70, u4:71, u8:130, u8:131]
u0:18 <- [u2:36, u2:38, u2:39, u2:42, u2:44, u5:83, u5:84]
u0:8 <- [u2:36, u2:37, u2:42, u2:43, u4:56, u4:58, u4:59, u4:63, u4:64, u5:83, u5:93, u7:106, u7:108, u7:111, u7:113, u7:114, u7:115, u7:119, u7:120]
u2:28 -> [u2:29, u2:30, u2:31]
u2:28 <- [u2:36, u2:40, u2:42, u2:46, u2:47, u2:48]
u2:29 <- [u2:28, u2:42]
u2:30 <- [u2:28, u2:46]
u2:31 <- [u2:28, u2:47, u2:48]
u2:32 -> [u2:33, u2:34, u2:35]
u2:32 <- [u2:36, u2:41, u2:42, u2:45, u5:83, u5:85, u9:134]
u2:33 <- [u2:32, u9:134]
u2:34 <- [u2:32, u9:134]
u2:35 <- [u2:32, u9:134]
u2:36 -> [u0:18, u0:8, u2:28, u2:32, u2:46, u2:47, u2:48]
u2:36 <- [u2:42, u4:56, u4:57, u4:61, u4:62, u4:66, u4:67, u4:68, u4:69, u5:83, u5:86, u7:106, u7:107, u7:111, u7:112, u7:117, u7:118, u8:126, u8:127, u8:128, u8:129]
u2:37 -> [u0:8]
u2:38 -> [u0:18]
u2:39 -> [u0:18]
u2:40 -> [u2:28]
u2:41 -> [u2:32]
u2:42 -> [u0:18, u0:8, u2:28, u2:29, u2:32, u2:36]
u2:42 <- [u5:83]
u2:43 -> [u0:8]
u2:44 -> [u0:18]
u2:45 -> [u2:32]
u2:46 -> [u2:28, u2:30]
u2:46 <- [u2:36]
u2:47 -> [u2:28, u2:31]
u2:47 <- [u2:36, u5:83]
u2:48 -> [u0:15, u2:28, u2:31]
u2:48 <- [u2:36]
u4:55 -> [u4:56, u4:58, u4:60, u4:61, u4:63]
u4:55 <- [u5:75, u5:88, u5:94]
u4:56 -> [u0:8, u2:36]
u4:56 <- [u4:55]
u4:57 -> [u2:36]
u4:58 -> [u0:8]
u4:58 <- [u4:55]
u4:59 -> [u0:8]
u4:60 <- [u4:55]
u4:61 -> [u0:15, u2:36]
u4:61 <- [u4:55]
u4:62 -> [u2:36]
u4:63 -> [u0:15, u0:8]
u4:63 <- [u4:55]
u4:64 -> [u0:8]
u4:65 -> [u4:66, u4:68, u4:70]
u4:65 <- [u5:75, u5:88, u5:94]
u4:66 -> [u2:36]
u4:66 <- [u4:65]
u4:67 -> [u2:36]
u4:68 -> [u2:36]
u4:68 <- [u4:65]
u4:69 -> [u2:36]
u4:70 -> [u0:17]
u4:70 <- [u4:65]
u4:71 -> [u0:17]
u5:75 -> [u4:55, u4:65, u5:83]
u5:75 <- [u5:80]
u5:78 <- [u5:83, u5:87]
u5:80 -> [u5:75, u5:88, u5:94]
u5:80 <- [u9:134]
u5:83 -> [u0:18, u0:8, u2:32, u2:36, u2:42, u2:47, u5:78, u5:97, u7:111, u7:114, u7:116, u7:117, u8:126, u8:128, u8:130]
u5:83 <- [u5:75, u5:88, u5:94, u9:134]
u5:84 -> [u0:18]
u5:85 -> [u2:32]
u5:86 -> [u2:36]
u5:87 -> [u5:78]
u5:88 -> [u4:55, u4:65, u5:83]
u5:88 <- [u5:80]
u5:93 -> [u0:8]
u5:94 -> [u4:55, u4:65, u5:83]
u5:94 <- [u5:80, u9:134, u9:137]
u5:97 <- [u5:83, u5:99]
u5:99 -> [u5:97]
u7:106 -> [u0:8, u2:36, u7:111, u7:114, u7:116, u7:117, u7:119]
u7:106 <- [u7:109, u9:134, u9:135, u9:138, u9:139]
u7:107 -> [u2:36]
u7:108 -> [u0:8]
u7:109 -> [u7:106]
u7:109 <- [u9:134]
u7:111 -> [u0:8, u2:36]
u7:111 <- [u5:83, u7:106]
u7:112 -> [u2:36]
u7:113 -> [u0:8]
u7:114 -> [u0:8]
u7:114 <- [u5:83, u7:106]
u7:115 -> [u0:8]
u7:116 <- [u5:83, u7:106]
u7:117 -> [u0:15, u2:36]
u7:117 <- [u5:83, u7:106]
u7:118 -> [u2:36]
u7:119 -> [u0:15, u0:8]
u7:119 <- [u7:106]
u7:120 -> [u0:8]
u8:124 -> [u8:126, u8:128, u8:130]
u8:124 <- [u9:134, u9:136]
u8:126 -> [u2:36]
u8:126 <- [u5:83, u8:124, u8:128]
u8:127 -> [u2:36]
u8:128 -> [u2:36, u8:126]
u8:128 <- [u5:83, u8:124]
u8:129 -> [u2:36]
u8:130 -> [u0:17]
u8:130 <- [u5:83, u8:124]
u8:131 -> [u0:17]
u9:134 -> [u2:32, u2:33, u2:34, u2:35, u5:80, u5:83, u5:94, u7:106, u7:109, u8:124]
u9:135 -> [u7:106]
u9:136 -> [u8:124]
u9:137 -> [u5:94]
u9:138 -> [u7:106]
u9:139 -> [u7:106]

--- expect:graph ---
digraph project {
  subgraph cluster_0 {
    label="_c";
    style=filled;
    color=lightgrey;
    subgraph cluster_1 {
      label="entities";
      style=filled;
      color=lightgrey;
      n6[label="Task", full_path="$TMP/src/entities/task.rs:16"];
      n4[label="TaskStatus", full_path="$TMP/src/entities/task.rs:2"];
      n5[label="Priority", full_path="$TMP/src/entities/task.rs:9"];
    }
    subgraph cluster_2 {
      label="interface_adapters";
      style=filled;
      color=lightgrey;
      n47[label="ConsolePresenter", full_path="$TMP/src/interface_adapters/console_presenter.rs:4"];
      n37[label="InMemoryTaskGateway", full_path="$TMP/src/interface_adapters/memory_gateway.rs:5"];
    }
    subgraph cluster_3 {
      label="main";
      style=filled;
      color=lightgrey;
      n53[label="main", full_path="$TMP/src/main.rs:9"];
    }
    subgraph cluster_4 {
      label="use_cases";
      style=filled;
      color=lightgrey;
      n19[label="present_task", full_path="$TMP/src/use_cases/ports.rs:13"];
      n20[label="present_task_list", full_path="$TMP/src/use_cases/ports.rs:14"];
      n14[label="save", full_path="$TMP/src/use_cases/ports.rs:5"];
      n17[label="update", full_path="$TMP/src/use_cases/ports.rs:8"];
      n31[label="ListTasksUseCase", full_path="$TMP/src/use_cases/task_use_cases.rs:47"];
    }
  }
  n6 -> n4;
  n6 -> n5;
  n19 -> n6;
  n20 -> n6;
  n14 -> n6;
  n17 -> n6;
  n37 -> n6;
  n53 -> n31;
  n53 -> n37;
  n53 -> n47;
}
