===============================================================================
struct-binding
===============================================================================


--- file: app/src/main.rs ---
struct Foo;

struct Bar {
    a: i32,
    b: Vec<Foo>,
}

--- expect:symbols ---
u0:1 | Struct   | Foo | Foo
u0:2 | Struct   | Bar | Bar


--- expect:symbol-deps ---
u0:1 -> []
u0:1 <- [u0:2]
u0:2 -> [u0:1]
u0:2 <- []

--- expect:blocks ---
u0:2 | class | Foo
u0:3 | class | Bar

--- expect:block-deps ---
u0:2 <- [u0:3]
u0:3 -> [u0:2]

--- expect:graph ---
digraph project {
  subgraph cluster_0 {
    label="app";
    style=filled;
    color=lightgrey;
    n1 [label="Foo", full_path="$TMP/app/src/main.rs:1"];
    n2 [label="Bar", full_path="$TMP/app/src/main.rs:3"];
  }
  n2 -> n1;
}



===============================================================================
struct-binding-multiple-files
===============================================================================


--- file: app/src/foo.rs ---
pub struct Foo;

--- file: app/src/main.rs ---
struct Bar {
    a: i32,
    b: Vec<Foo>,
}

--- expect:symbols ---
u0:1 | Struct   | Foo | Foo  | [global]
u1:2 | Struct   | Bar | Bar


--- expect:symbol-deps ---
u0:1 -> []
u0:1 <- [u1:2]
u1:2 -> [u0:1]
u1:2 <- []

--- expect:blocks ---
u0:2 | class | Foo
u1:4 | class | Bar

--- expect:block-deps ---
u0:2 <- [u1:4]
u1:4 -> [u0:2]

--- expect:block-graph ---
(root:1
    (class:2 Foo)
)

(root:3
    (class:4 Bar)
)

--- expect:graph ---
digraph project {
  subgraph cluster_0 {
    label="app";
    style=filled;
    color=lightgrey;
    n1 [label="Foo", full_path="$TMP/app/src/foo.rs:1"];
    n2 [label="Bar", full_path="$TMP/app/src/main.rs:1"];
  }
  n2 -> n1;
}


===============================================================================
function-resolve
===============================================================================


--- file: src/main.rs ---
struct Bar;
struct Foo;

struct Slice;
impl Slice {
    fn binary_search(&self, x: &i32) -> Option<Foo> {
      Some(Foo)
    }

    fn fake_method() {}
}

fn func() {
  let slice = Slice::new();
  let f = slice.binary_search(&x);
}

--- expect:symbols ---
u0:1  | Struct   | Bar           | Bar                        |
u0:2  | Struct   | Foo           | Foo                        |
u0:3  | Struct   | Slice         | Slice                      |
u0:4  | Function | binary_search | Slice::binary_search       |
u0:5  | Variable | self          | Slice::binary_search::self |
u0:6  | Variable | x             | Slice::binary_search::x    |
u0:7  | Function | fake_method   | Slice::fake_method         |
u0:8  | Function | func          | func                       |
u0:9  | Variable | slice         | func::slice                |
u0:10 | Variable | f             | func::f

--- expect:symbol-deps ---