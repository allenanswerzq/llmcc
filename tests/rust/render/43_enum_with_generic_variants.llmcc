===============================================================================
enum-with-generic-variants
===============================================================================
Test enums with generic type parameters in variants.

--- file: sample/Cargo.toml ---
[package]
name = "sample"

--- file: sample/src/lib.rs ---
mod types;
mod containers;

--- file: sample/src/types.rs ---
pub struct User {
    pub id: u64,
}

pub struct Error {
    pub code: i32,
}

pub struct Config {
    pub key: String,
}

--- file: sample/src/containers.rs ---
use crate::types::{User, Error, Config};

pub enum Option<T> {
    Some(T),
    None,
}

pub enum Result<T, E> {
    Ok(T),
    Err(E),
}

// Concrete uses of generic enums
pub struct UserOption {
    pub user: Option<User>,
}

pub struct UserResult {
    pub result: Result<User, Error>,
}

pub struct ConfigResult {
    pub config: Result<Config, Error>,
}

--- expect:block-graph ---
(root:1 lib ($TMP/sample/src/lib.rs)
  (module:2 types)
  (module:3 containers)
)

(root:4 types ($TMP/sample/src/types.rs)
  (class:5 User
    (field:6 id @type u64)
  )
  (class:7 Error
    (field:8 code @type i32)
  )
  (class:9 Config
    (field:10 key @type String)
  )
)

(root:11 containers ($TMP/sample/src/containers.rs)
  (enum:12 Option
    (field:13 Some
      (field:14 0 @type T)
    )
    (field:15 None)
  )
  (enum:16 Result
    (field:17 Ok
      (field:18 0 @type T)
    )
    (field:19 Err
      (field:20 0 @type E)
    )
  )
  (class:21 UserOption
    (field:22 user @type:12 Option)
    (@tdep:12 Option)
  )
  (class:23 UserResult
    (field:24 result @type:16 Result)
    (@tdep:16 Result)
  )
  (class:25 ConfigResult
    (field:26 config @type:16 Result)
    (@tdep:16 Result)
  )
)

--- expect:arch-graph ---
digraph architecture {
  // Layout settings
  rankdir=TB;
  ranksep=0.6;
  nodesep=0.3;
  splines=ortho;
  compound=true;

  node [shape=box, style=rounded];
  edge [arrowsize=0.7];

  subgraph cluster_sample {
    label="sample";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";

    subgraph cluster_containers_rs {
      label="containers.rs";
      style=rounded;
      color="#aaaaaa";
      bgcolor="#fafafa";

      n21[label="UserOption", full_path="$TMP/sample/src/containers.rs:14", sym_ty="Struct", shape=box];
      n23[label="UserResult", full_path="$TMP/sample/src/containers.rs:18", sym_ty="Struct", shape=box];
      n25[label="ConfigResult", full_path="$TMP/sample/src/containers.rs:22", sym_ty="Struct", shape=box];
      n12[label="Option", full_path="$TMP/sample/src/containers.rs:3", sym_ty="Enum", shape=box];
      n16[label="Result", full_path="$TMP/sample/src/containers.rs:8", sym_ty="Enum", shape=box];
    }

    subgraph cluster_types_rs {
      label="types.rs";
      style=rounded;
      color="#aaaaaa";
      bgcolor="#fafafa";

      n5[label="User", full_path="$TMP/sample/src/types.rs:1", sym_ty="Struct", shape=box];
      n7[label="Error", full_path="$TMP/sample/src/types.rs:5", sym_ty="Struct", shape=box];
      n9[label="Config", full_path="$TMP/sample/src/types.rs:9", sym_ty="Struct", shape=box];
    }

  }


  n5 -> n12 [from="type_arg", to="generic"];
  n5 -> n16 [from="type_arg", to="generic"];
  n7 -> n16 [from="type_arg", to="generic"];
  n9 -> n16 [from="type_arg", to="generic"];
  n12 -> n21 [from="field_type", to="struct"];
  n16 -> n23 [from="field_type", to="struct"];
  n16 -> n25 [from="field_type", to="struct"];
}
