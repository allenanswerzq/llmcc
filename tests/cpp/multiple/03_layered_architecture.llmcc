===============================================================================
layered-architecture
===============================================================================
Test layered architecture with multiple components.
lang: cpp

--- file: sample/CMakeLists.txt ---
cmake_minimum_required(VERSION 3.10)
project(sample)

--- file: sample/src/model/user.h ---
namespace model {
    struct User {
        int id;
        std::string name;
    };
}

--- file: sample/src/repository/user_repo.h ---
#include "../model/user.h"

namespace repository {
    class UserRepository {
    public:
        model::User find_by_id(int id);
        void save(model::User user);
    };
}

--- file: sample/src/service/user_service.h ---
#include "../repository/user_repo.h"

namespace service {
    class UserService {
        repository::UserRepository repo;
    public:
        model::User get_user(int id);
        void create_user(model::User user);
    };
}

--- expect:block-graph ---
(root:1 user ($TMP/sample/src/model/user.h)
  (module:2 model (inline)
    (class:3 User
      (field:4 int @type int)
      (field:5 std @type name)
    )
  )
)

(root:6 user_repo ($TMP/sample/src/repository/user_repo.h)
  (module:7 repository (inline)
    (class:8 UserRepository
      (field:9 model @type model)
      (field:10 void @type void)
    )
  )
)

(root:11 user_service ($TMP/sample/src/service/user_service.h)
  (module:12 service (inline)
    (class:13 UserService
      (field:14 repository @type repository)
      (field:15 model @type model)
      (field:16 void @type void)
    )
  )
)
