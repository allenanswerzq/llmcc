===============================================================================
cross-file-reference
===============================================================================
Test that cross-file references are resolved correctly.
lang: cpp

--- file: sample/CMakeLists.txt ---
cmake_minimum_required(VERSION 3.10)
project(sample)

--- file: sample/src/types.h ---

struct User {
    int id;
    std::string name;
};

struct Config {
    std::string host;
    int port;
};

--- file: sample/src/service.cpp ---
#include "types.h"

class UserService {
    Config config;
public:
    User getUser(int id) {
        return User{id, "test"};
    }
};

--- expect:block-graph ---
(root:1 struct User {
    int id;
    std::string name;
};

struct Config {
    std::string host;
    int port;
};
 ($TMP/sample/src/types.h)
  (class:2 User
    (field:3 int @type int)
    (field:4 std @type name)
  )
  (class:5 Config
    (field:6 std @type host)
    (field:7 int @type int)
  )
)

(root:8 #include "types.h"

class UserService {
    Config config;
public:
    User getUser(int id) {
        return User{id, "test"};
    }
};
 ($TMP/sample/src/service.cpp)
  (class:9 UserService
    (field:10 Config @type:5 Config)
    (method:11 getUser
      (func:12 getUser
        (parameter:13 id @type int)
      )
    )
  )
)
