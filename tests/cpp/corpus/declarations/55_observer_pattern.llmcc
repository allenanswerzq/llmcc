===============================================================================
observer-pattern
===============================================================================
Observer pattern.
lang: cpp

--- file: src/lib.cpp ---
class Observer {
public:
    virtual ~Observer() = default;
    virtual void update(int value) = 0;
};

class Subject {
    Observer* observers[10];
    int count;
public:
    Subject() : count(0) {}

    void attach(Observer* o) { observers[count++] = o; }

    void notify(int value) {
        for (int i = 0; i < count; i++) {
            observers[i]->update(value);
        }
    }
};

class ConcreteObserver : public Observer {
public:
    void update(int value) override {}
};

--- expect:block-graph ---
(root:1 lib ($TMP/src/lib.cpp)
  (class:2 Observer
    (method:3 ~Observer)
    (field:4 void @type void)
  )
  (class:5 Subject
    (field:6 Observer @type:2 Observer)
    (field:7 int @type int)
    (method:8 Subject)
    (method:9 attach
      (parameter:10 o @type:2 Observer)
    )
    (method:11 notify
      (parameter:12 value @type int)
    )
  )
  (class:14 ConcreteObserver @extends:2 Observer
    (method:15 update
      (parameter:16 value @type int)
    )
  )
)
