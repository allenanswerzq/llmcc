===============================================================================
package-module-hierarchy
===============================================================================
Test that package.json is detected and creates proper crate/module hierarchy.
TypeScript projects use package.json to define packages (similar to Rust crates).
lang: typescript

--- file: package.json ---

{
  "name": "my-app",
  "version": "1.0.0"
}

--- file: src/index.ts ---

import { helper } from "./utils/helper";

export function main(): number {
    return helper();
}

--- file: src/utils/helper.ts ---

export function helper(): number {
    return 42;
}

--- expect:block-graph ---
(root:1 index ($TMP/src/index.ts)
  (func:2 main
    (return:3 @type number)
    (@fdep:6 helper)
  )
)

(root:5 helper ($TMP/src/utils/helper.ts)
  (func:6 helper
    (return:7 @type number)
  )
)

--- expect:arch-graph ---
digraph architecture {
  rankdir=TB;
  ranksep=0.6;
  nodesep=0.3;
  splines=ortho;
  compound=true;

  node [shape=box, style=rounded];
  edge [arrowsize=0.7];

  subgraph cluster_my_app {
    label="my-app";
    style=rounded;
        bgcolor="#f8f8f8";

    subgraph cluster_index_ts {
      label="index.ts";
      style=rounded;
            bgcolor="#fafafa";

      n2[label="main", path="$TMP/src/index.ts:4", sym_ty="Function", shape=ellipse];
    }

    subgraph cluster_utils {
      label="utils";
      style=rounded;
            bgcolor="#f5f5f5";

      subgraph cluster_helper_ts {
        label="helper.ts";
        style=rounded;
                bgcolor="#fafafa";

        n6[label="helper", path="$TMP/src/utils/helper.ts:2", sym_ty="Function", shape=ellipse];
      }

    }

  }


  n2 -> n6 [from="caller", to="callee"];
}
