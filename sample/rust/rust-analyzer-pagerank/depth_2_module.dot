digraph architecture {
  // Layout settings
  rankdir=TB;
  ranksep=0.8;
  nodesep=0.4;
  splines=ortho;
  concentrate=true;

  node [shape=box, style="rounded,filled", fillcolor="#f0f0f0", fontname="Helvetica"];
  edge [color="#666666", arrowsize=0.7];

  labelloc=t;
  fontsize=16;
  fontname="Helvetica Bold";

  subgraph cluster_hir {
    label="hir";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_hir_lib[label="lib"];
    mod_hir_semantics[label="semantics"];
  }

  subgraph cluster_hir_def {
    label="hir-def";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_hir_def_expr_store[label="expr_store"];
    mod_hir_def_hir[label="hir"];
    mod_hir_def_item_tree[label="item_tree"];
    mod_hir_def_lib[label="lib"];
    mod_hir_def_nameres[label="nameres"];
  }

  subgraph cluster_hir_expand {
    label="hir-expand";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_hir_expand_builtin[label="builtin"];
  }

  subgraph cluster_hir_ty {
    label="hir-ty";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_hir_ty_db[label="db"];
    mod_hir_ty_infer[label="infer"];
    mod_hir_ty_lower[label="lower"];
    mod_hir_ty_mir[label="mir"];
    mod_hir_ty_next_solver[label="next_solver"];
  }

  subgraph cluster_ide {
    label="ide";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_hover[label="hover"];
    mod_ide_inlay_hints[label="inlay_hints"];
    mod_ide_syntax_highlighting[label="syntax_highlighting"];
  }

  subgraph cluster_ide_assists {
    label="ide-assists";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_assists_handlers[label="handlers"];
    mod_ide_assists_utils[label="utils"];
  }

  subgraph cluster_ide_completion {
    label="ide-completion";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_completion_completions[label="completions"];
    mod_ide_completion_context[label="context"];
    mod_ide_completion_render[label="render"];
  }

  subgraph cluster_ide_db {
    label="ide-db";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_db_imports[label="imports"];
  }

  subgraph cluster_ide_diagnostics {
    label="ide-diagnostics";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_diagnostics_handlers[label="handlers"];
  }

  subgraph cluster_ide_ssr {
    label="ide-ssr";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ide_ssr_fragments[label="fragments"];
  }

  subgraph cluster_parser {
    label="parser";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_parser_err[label="err"];
    mod_parser_grammar[label="grammar"];
    mod_parser_ok[label="ok"];
    mod_parser_syntax_kind[label="syntax_kind"];
  }

  subgraph cluster_project_model {
    label="project-model";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_project_model_project_json[label="project_json"];
  }

  subgraph cluster_query_group_macro {
    label="query-group-macro";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_query_group_macro_lib[label="lib"];
  }

  subgraph cluster_rust_analyzer {
    label="rust-analyzer";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_rust_analyzer_config[label="config"];
    mod_rust_analyzer_handlers[label="handlers"];
    mod_rust_analyzer_lsp[label="lsp"];
  }

  subgraph cluster_syntax {
    label="syntax";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_syntax_ast[label="ast"];
    mod_syntax_fuzz_failures[label="fuzz-failures"];
    mod_syntax_generated[label="generated"];
    mod_syntax_validation[label="validation"];
  }

  subgraph cluster_test_utils {
    label="test-utils";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_test_utils_minicore[label="minicore"];
  }

  subgraph cluster_ungrammar {
    label="ungrammar";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_ungrammar_parser[label="parser"];
  }

  subgraph cluster_xtask {
    label="xtask";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_xtask_codegen[label="codegen"];
  }


  mod_hir_def_expr_store -> mod_hir_def_hir [dir=both]; // dir best-effort not accurate
  mod_hir_def_expr_store -> mod_hir_def_lib;
  mod_hir_def_expr_store -> mod_hir_ty_next_solver [dir=both]; // dir best-effort not accurate
  mod_hir_def_expr_store -> mod_ide_completion_render;
  mod_hir_def_expr_store -> mod_parser_ok;
  mod_hir_def_expr_store -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_def_expr_store -> mod_syntax_ast;
  mod_hir_def_expr_store -> mod_syntax_generated;
  mod_hir_def_expr_store -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_hir_def_hir -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_def_hir -> mod_syntax_ast;
  mod_hir_def_hir -> mod_syntax_generated;
  mod_hir_def_hir -> mod_test_utils_minicore;
  mod_hir_def_item_tree -> mod_parser_ok [dir=both]; // dir best-effort not accurate
  mod_hir_def_item_tree -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_def_item_tree -> mod_syntax_generated;
  mod_hir_def_item_tree -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_hir_def_lib -> mod_hir_lib [dir=both]; // dir best-effort not accurate
  mod_hir_def_lib -> mod_hir_semantics [dir=both]; // dir best-effort not accurate
  mod_hir_def_lib -> mod_hir_ty_next_solver [dir=both]; // dir best-effort not accurate
  mod_hir_def_lib -> mod_test_utils_minicore;
  mod_hir_def_nameres -> mod_hir_def_item_tree;
  mod_hir_def_nameres -> mod_hir_def_lib;
  mod_hir_def_nameres -> mod_hir_lib [dir=both]; // dir best-effort not accurate
  mod_hir_def_nameres -> mod_syntax_generated;
  mod_hir_def_nameres -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_hir_expand_builtin -> mod_hir_ty_next_solver;
  mod_hir_expand_builtin -> mod_parser_grammar;
  mod_hir_expand_builtin -> mod_query_group_macro_lib;
  mod_hir_expand_builtin -> mod_syntax_ast;
  mod_hir_expand_builtin -> mod_syntax_generated;
  mod_hir_expand_builtin -> mod_test_utils_minicore;
  mod_hir_lib -> mod_hir_def_expr_store;
  mod_hir_lib -> mod_hir_semantics [dir=both]; // dir best-effort not accurate
  mod_hir_lib -> mod_hir_ty_db;
  mod_hir_lib -> mod_hir_ty_next_solver;
  mod_hir_lib -> mod_test_utils_minicore;
  mod_hir_semantics -> mod_hir_ty_db;
  mod_hir_semantics -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_semantics -> mod_test_utils_minicore;
  mod_hir_ty_infer -> mod_hir_def_expr_store;
  mod_hir_ty_infer -> mod_hir_def_hir;
  mod_hir_ty_infer -> mod_hir_def_lib;
  mod_hir_ty_infer -> mod_hir_ty_db;
  mod_hir_ty_infer -> mod_hir_ty_lower [dir=both]; // dir best-effort not accurate
  mod_hir_ty_infer -> mod_hir_ty_mir [dir=both]; // dir best-effort not accurate
  mod_hir_ty_infer -> mod_hir_ty_next_solver [dir=both]; // dir best-effort not accurate
  mod_hir_ty_infer -> mod_query_group_macro_lib;
  mod_hir_ty_infer -> mod_syntax_ast;
  mod_hir_ty_infer -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_hir_ty_lower -> mod_hir_def_expr_store;
  mod_hir_ty_lower -> mod_hir_def_hir;
  mod_hir_ty_lower -> mod_hir_def_lib;
  mod_hir_ty_lower -> mod_hir_ty_db;
  mod_hir_ty_lower -> mod_hir_ty_next_solver [dir=both]; // dir best-effort not accurate
  mod_hir_ty_lower -> mod_ide_ssr_fragments;
  mod_hir_ty_lower -> mod_parser_grammar;
  mod_hir_ty_lower -> mod_query_group_macro_lib;
  mod_hir_ty_lower -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_hir_ty_mir -> mod_hir_def_expr_store;
  mod_hir_ty_mir -> mod_hir_def_lib;
  mod_hir_ty_mir -> mod_hir_ty_db;
  mod_hir_ty_mir -> mod_hir_ty_next_solver;
  mod_hir_ty_mir -> mod_parser_ok;
  mod_hir_ty_mir -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_ty_mir -> mod_syntax_generated;
  mod_hir_ty_mir -> mod_test_utils_minicore;
  mod_hir_ty_next_solver -> mod_hir_ty_db;
  mod_hir_ty_next_solver -> mod_parser_ok;
  mod_hir_ty_next_solver -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_hir_ty_next_solver -> mod_syntax_generated;
  mod_hir_ty_next_solver -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_ide_assists_handlers -> mod_hir_def_item_tree;
  mod_ide_assists_handlers -> mod_hir_lib;
  mod_ide_assists_handlers -> mod_hir_semantics;
  mod_ide_assists_handlers -> mod_hir_ty_db;
  mod_ide_assists_handlers -> mod_hir_ty_next_solver;
  mod_ide_assists_handlers -> mod_ide_assists_utils [dir=both]; // dir best-effort not accurate
  mod_ide_assists_handlers -> mod_ide_completion_render;
  mod_ide_assists_handlers -> mod_ide_db_imports;
  mod_ide_assists_handlers -> mod_ide_diagnostics_handlers;
  mod_ide_assists_handlers -> mod_ide_hover;
  mod_ide_assists_handlers -> mod_ide_ssr_fragments;
  mod_ide_assists_handlers -> mod_ide_syntax_highlighting;
  mod_ide_assists_handlers -> mod_parser_err;
  mod_ide_assists_handlers -> mod_parser_grammar;
  mod_ide_assists_handlers -> mod_parser_ok;
  mod_ide_assists_handlers -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_ide_assists_handlers -> mod_rust_analyzer_lsp;
  mod_ide_assists_handlers -> mod_syntax_ast [dir=both]; // dir best-effort not accurate
  mod_ide_assists_handlers -> mod_syntax_fuzz_failures;
  mod_ide_assists_handlers -> mod_syntax_generated;
  mod_ide_assists_handlers -> mod_syntax_validation;
  mod_ide_assists_handlers -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_ide_assists_handlers -> mod_ungrammar_parser;
  mod_ide_assists_utils -> mod_hir_semantics;
  mod_ide_assists_utils -> mod_hir_ty_db;
  mod_ide_assists_utils -> mod_ide_ssr_fragments;
  mod_ide_assists_utils -> mod_parser_grammar;
  mod_ide_assists_utils -> mod_query_group_macro_lib;
  mod_ide_assists_utils -> mod_syntax_ast;
  mod_ide_assists_utils -> mod_syntax_fuzz_failures;
  mod_ide_assists_utils -> mod_syntax_generated;
  mod_ide_assists_utils -> mod_syntax_validation;
  mod_ide_completion_completions -> mod_hir_semantics;
  mod_ide_completion_completions -> mod_ide_completion_context [dir=both]; // dir best-effort not accurate
  mod_ide_completion_completions -> mod_ide_db_imports;
  mod_ide_completion_completions -> mod_ide_ssr_fragments;
  mod_ide_completion_completions -> mod_parser_grammar;
  mod_ide_completion_completions -> mod_query_group_macro_lib;
  mod_ide_completion_completions -> mod_syntax_ast;
  mod_ide_completion_completions -> mod_syntax_generated;
  mod_ide_completion_completions -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_ide_completion_context -> mod_hir_semantics;
  mod_ide_completion_context -> mod_ide_diagnostics_handlers;
  mod_ide_completion_context -> mod_ide_ssr_fragments;
  mod_ide_completion_context -> mod_parser_ok;
  mod_ide_completion_context -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_ide_completion_context -> mod_syntax_ast [dir=both]; // dir best-effort not accurate
  mod_ide_completion_context -> mod_syntax_fuzz_failures;
  mod_ide_completion_context -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_ide_completion_context -> mod_ungrammar_parser;
  mod_ide_completion_render -> mod_ide_completion_context;
  mod_ide_completion_render -> mod_ide_db_imports;
  mod_ide_completion_render -> mod_ide_hover [dir=both]; // dir best-effort not accurate
  mod_ide_completion_render -> mod_ide_ssr_fragments;
  mod_ide_completion_render -> mod_parser_err;
  mod_ide_completion_render -> mod_parser_grammar [dir=both]; // dir best-effort not accurate
  mod_ide_completion_render -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_ide_completion_render -> mod_syntax_ast [dir=both]; // dir best-effort not accurate
  mod_ide_completion_render -> mod_syntax_generated;
  mod_ide_db_imports -> mod_hir_lib;
  mod_ide_db_imports -> mod_hir_semantics;
  mod_ide_db_imports -> mod_parser_grammar;
  mod_ide_db_imports -> mod_parser_ok;
  mod_ide_db_imports -> mod_query_group_macro_lib;
  mod_ide_db_imports -> mod_syntax_ast;
  mod_ide_db_imports -> mod_syntax_generated;
  mod_ide_db_imports -> mod_test_utils_minicore;
  mod_ide_diagnostics_handlers -> mod_hir_semantics;
  mod_ide_diagnostics_handlers -> mod_ide_ssr_fragments;
  mod_ide_diagnostics_handlers -> mod_parser_ok;
  mod_ide_diagnostics_handlers -> mod_query_group_macro_lib;
  mod_ide_diagnostics_handlers -> mod_syntax_ast;
  mod_ide_diagnostics_handlers -> mod_syntax_fuzz_failures;
  mod_ide_diagnostics_handlers -> mod_syntax_generated;
  mod_ide_diagnostics_handlers -> mod_syntax_validation;
  mod_ide_diagnostics_handlers -> mod_xtask_codegen;
  mod_ide_hover -> mod_hir_semantics;
  mod_ide_hover -> mod_ide_ssr_fragments;
  mod_ide_hover -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_ide_hover -> mod_syntax_ast;
  mod_ide_hover -> mod_syntax_generated;
  mod_ide_hover -> mod_test_utils_minicore;
  mod_ide_inlay_hints -> mod_hir_semantics;
  mod_ide_inlay_hints -> mod_ide_completion_render;
  mod_ide_inlay_hints -> mod_ide_hover;
  mod_ide_inlay_hints -> mod_ide_ssr_fragments;
  mod_ide_inlay_hints -> mod_parser_err;
  mod_ide_inlay_hints -> mod_parser_grammar;
  mod_ide_inlay_hints -> mod_parser_ok;
  mod_ide_inlay_hints -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_ide_inlay_hints -> mod_rust_analyzer_lsp [dir=both]; // dir best-effort not accurate
  mod_ide_inlay_hints -> mod_syntax_ast;
  mod_ide_inlay_hints -> mod_syntax_fuzz_failures;
  mod_ide_inlay_hints -> mod_syntax_generated;
  mod_ide_inlay_hints -> mod_test_utils_minicore;
  mod_ide_inlay_hints -> mod_ungrammar_parser;
  mod_ide_ssr_fragments -> mod_syntax_fuzz_failures;
  mod_ide_ssr_fragments -> mod_test_utils_minicore;
  mod_ide_syntax_highlighting -> mod_hir_semantics;
  mod_ide_syntax_highlighting -> mod_query_group_macro_lib;
  mod_ide_syntax_highlighting -> mod_syntax_ast;
  mod_ide_syntax_highlighting -> mod_syntax_fuzz_failures;
  mod_ide_syntax_highlighting -> mod_syntax_generated;
  mod_parser_err -> mod_parser_ok [dir=both]; // dir best-effort not accurate
  mod_parser_err -> mod_test_utils_minicore;
  mod_parser_grammar -> mod_parser_ok [dir=both]; // dir best-effort not accurate
  mod_parser_grammar -> mod_query_group_macro_lib;
  mod_parser_grammar -> mod_syntax_ast [dir=both]; // dir best-effort not accurate
  mod_parser_grammar -> mod_test_utils_minicore;
  mod_parser_grammar -> mod_ungrammar_parser;
  mod_parser_ok -> mod_hir_lib;
  mod_parser_ok -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_parser_syntax_kind -> mod_test_utils_minicore;
  mod_project_model_project_json -> mod_query_group_macro_lib [dir=both]; // dir best-effort not accurate
  mod_project_model_project_json -> mod_syntax_generated;
  mod_project_model_project_json -> mod_test_utils_minicore;
  mod_query_group_macro_lib -> mod_rust_analyzer_lsp [dir=both]; // dir best-effort not accurate
  mod_query_group_macro_lib -> mod_syntax_ast [dir=both]; // dir best-effort not accurate
  mod_query_group_macro_lib -> mod_syntax_generated;
  mod_query_group_macro_lib -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_rust_analyzer_config -> mod_rust_analyzer_lsp [dir=both]; // dir best-effort not accurate
  mod_rust_analyzer_config -> mod_syntax_generated;
  mod_rust_analyzer_config -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_rust_analyzer_handlers -> mod_ide_completion_render;
  mod_rust_analyzer_handlers -> mod_ide_hover;
  mod_rust_analyzer_handlers -> mod_ide_inlay_hints;
  mod_rust_analyzer_handlers -> mod_query_group_macro_lib;
  mod_rust_analyzer_handlers -> mod_rust_analyzer_config;
  mod_rust_analyzer_handlers -> mod_rust_analyzer_lsp;
  mod_rust_analyzer_handlers -> mod_syntax_generated;
  mod_rust_analyzer_handlers -> mod_test_utils_minicore;
  mod_rust_analyzer_lsp -> mod_syntax_generated;
  mod_rust_analyzer_lsp -> mod_test_utils_minicore;
  mod_syntax_ast -> mod_parser_syntax_kind;
  mod_syntax_ast -> mod_syntax_generated [dir=both]; // dir best-effort not accurate
  mod_syntax_ast -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_syntax_ast -> mod_ungrammar_parser;
  mod_syntax_fuzz_failures -> mod_query_group_macro_lib;
  mod_syntax_fuzz_failures -> mod_syntax_generated;
  mod_syntax_fuzz_failures -> mod_ungrammar_parser;
  mod_syntax_generated -> mod_hir_semantics;
  mod_syntax_generated -> mod_test_utils_minicore [dir=both]; // dir best-effort not accurate
  mod_syntax_validation -> mod_query_group_macro_lib;
  mod_syntax_validation -> mod_syntax_ast;
  mod_ungrammar_parser -> mod_parser_ok;
  mod_ungrammar_parser -> mod_test_utils_minicore;
  mod_xtask_codegen -> mod_parser_grammar;
  mod_xtask_codegen -> mod_parser_ok;
  mod_xtask_codegen -> mod_query_group_macro_lib;
  mod_xtask_codegen -> mod_syntax_generated;
  mod_xtask_codegen -> mod_test_utils_minicore;
  mod_xtask_codegen -> mod_ungrammar_parser;
}
