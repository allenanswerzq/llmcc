digraph architecture {
  // Layout settings
  rankdir=TB;
  ranksep=0.8;
  nodesep=0.4;
  splines=ortho;
  concentrate=true;

  node [shape=box, style="rounded,filled", fillcolor="#f0f0f0", fontname="Helvetica"];
  edge [color="#666666", arrowsize=0.7];

  labelloc=t;
  fontsize=16;
  fontname="Helvetica Bold";

  subgraph cluster_databend_common_ast {
    label="databend-common-ast";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_ast_ast[label="ast"];
    mod_databend_common_ast_parser[label="parser"];
    mod_databend_common_ast_statements[label="statements"];
  }

  subgraph cluster_databend_common_base {
    label="databend-common-base";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_base_base[label="base"];
    mod_databend_common_base_metrics[label="metrics"];
    mod_databend_common_base_runtime[label="runtime"];
  }

  subgraph cluster_databend_common_catalog {
    label="databend-common-catalog";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_catalog_plan[label="plan"];
    mod_databend_common_catalog_table_context[label="table_context"];
  }

  subgraph cluster_databend_common_column {
    label="databend-common-column";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_column_bitmap[label="bitmap"];
  }

  subgraph cluster_databend_common_datavalues {
    label="databend-common-datavalues";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_datavalues_types[label="types"];
  }

  subgraph cluster_databend_common_expression {
    label="databend-common-expression";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_expression_aggregate[label="aggregate"];
    mod_databend_common_expression_block[label="block"];
    mod_databend_common_expression_expression[label="expression"];
    mod_databend_common_expression_function[label="function"];
    mod_databend_common_expression_schema[label="schema"];
    mod_databend_common_expression_types[label="types"];
    mod_databend_common_expression_utils[label="utils"];
    mod_databend_common_expression_values[label="values"];
  }

  subgraph cluster_databend_common_functions {
    label="databend-common-functions";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_functions_aggregates[label="aggregates"];
    mod_databend_common_functions_scalars[label="scalars"];
  }

  subgraph cluster_databend_common_meta_app {
    label="databend-common-meta-app";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_meta_app_principal[label="principal"];
    mod_databend_common_meta_app_schema[label="schema"];
    mod_databend_common_meta_app_table[label="table"];
    mod_databend_common_meta_app_tenant[label="tenant"];
  }

  subgraph cluster_databend_common_meta_client {
    label="databend-common-meta-client";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_meta_client_required[label="required"];
  }

  subgraph cluster_databend_common_meta_kvapi {
    label="databend-common-meta-kvapi";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_meta_kvapi_kvapi[label="kvapi"];
  }

  subgraph cluster_databend_common_metrics {
    label="databend-common-metrics";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_metrics_metrics[label="metrics"];
  }

  subgraph cluster_databend_common_native {
    label="databend-common-native";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_native_write[label="write"];
  }

  subgraph cluster_databend_common_pipeline {
    label="databend-common-pipeline";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_pipeline_core[label="core"];
  }

  subgraph cluster_databend_common_pipeline_transforms {
    label="databend-common-pipeline-transforms";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_pipeline_transforms_core[label="core"];
    mod_databend_common_pipeline_transforms_sorts[label="sorts"];
  }

  subgraph cluster_databend_common_sql {
    label="databend-common-sql";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_common_sql_binder[label="binder"];
    mod_databend_common_sql_ddl[label="ddl"];
    mod_databend_common_sql_executor[label="executor"];
    mod_databend_common_sql_expr[label="expr"];
    mod_databend_common_sql_plans[label="plans"];
  }

  subgraph cluster_databend_functions_scalar_datetime {
    label="databend-functions-scalar-datetime";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_functions_scalar_datetime_datetime[label="datetime"];
  }

  subgraph cluster_databend_meta {
    label="databend-meta";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_meta_metrics[label="metrics"];
  }

  subgraph cluster_databend_query {
    label="databend-query";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_query_exchange[label="exchange"];
    mod_databend_query_format[label="format"];
    mod_databend_query_hash_join[label="hash_join"];
    mod_databend_query_interpreters[label="interpreters"];
    mod_databend_query_physical_plans[label="physical_plans"];
    mod_databend_query_query[label="query"];
    mod_databend_query_sessions[label="sessions"];
    mod_databend_query_spillers[label="spillers"];
    mod_databend_query_v1[label="v1"];
  }

  subgraph cluster_databend_storages_common_table_meta {
    label="databend-storages-common-table-meta";
    style=rounded;
    color="#888888";
    bgcolor="#f0f0f0";
    fontname="Helvetica Bold";

    mod_databend_storages_common_table_meta_frozen[label="frozen"];
    mod_databend_storages_common_table_meta_meta[label="meta"];
  }


  mod_databend_common_ast_ast -> mod_databend_common_ast_parser [dir=both]; // best-effort not accurate
  mod_databend_common_ast_ast -> mod_databend_common_ast_statements [dir=both]; // best-effort not accurate
  mod_databend_common_ast_ast -> mod_databend_common_expression_expression [dir=both]; // best-effort not accurate
  mod_databend_common_ast_ast -> mod_databend_common_meta_client_required;
  mod_databend_common_ast_ast -> mod_databend_common_meta_kvapi_kvapi;
  mod_databend_common_ast_ast -> mod_databend_query_exchange;
  mod_databend_common_ast_parser -> mod_databend_common_ast_statements;
  mod_databend_common_ast_parser -> mod_databend_common_datavalues_types [dir=both]; // best-effort not accurate
  mod_databend_common_ast_parser -> mod_databend_common_expression_expression;
  mod_databend_common_ast_parser -> mod_databend_common_meta_app_principal;
  mod_databend_common_ast_parser -> mod_databend_common_meta_client_required;
  mod_databend_common_ast_parser -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_ast_statements -> mod_databend_common_expression_expression;
  mod_databend_common_ast_statements -> mod_databend_common_meta_app_principal [dir=both]; // best-effort not accurate
  mod_databend_common_ast_statements -> mod_databend_common_meta_app_schema [dir=both]; // best-effort not accurate
  mod_databend_common_ast_statements -> mod_databend_query_exchange;
  mod_databend_common_base_base -> mod_databend_common_meta_client_required;
  mod_databend_common_base_metrics -> mod_databend_common_meta_kvapi_kvapi;
  mod_databend_common_base_metrics -> mod_databend_meta_metrics [dir=both]; // best-effort not accurate
  mod_databend_common_base_runtime -> mod_databend_common_meta_client_required;
  mod_databend_common_catalog_plan -> mod_databend_common_expression_block;
  mod_databend_common_catalog_plan -> mod_databend_common_expression_expression;
  mod_databend_common_catalog_plan -> mod_databend_common_expression_values;
  mod_databend_common_catalog_plan -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_catalog_plan -> mod_databend_storages_common_table_meta_frozen;
  mod_databend_common_column_bitmap -> mod_databend_common_meta_client_required;
  mod_databend_common_column_bitmap -> mod_databend_common_meta_kvapi_kvapi;
  mod_databend_common_datavalues_types -> mod_databend_common_expression_types;
  mod_databend_common_datavalues_types -> mod_databend_common_functions_scalars [dir=both]; // best-effort not accurate
  mod_databend_common_expression_aggregate -> mod_databend_common_datavalues_types;
  mod_databend_common_expression_aggregate -> mod_databend_common_expression_types [dir=both]; // best-effort not accurate
  mod_databend_common_expression_aggregate -> mod_databend_common_expression_utils;
  mod_databend_common_expression_aggregate -> mod_databend_common_expression_values [dir=both]; // best-effort not accurate
  mod_databend_common_expression_aggregate -> mod_databend_common_functions_aggregates [dir=both]; // best-effort not accurate
  mod_databend_common_expression_aggregate -> mod_databend_query_spillers;
  mod_databend_common_expression_block -> mod_databend_common_expression_types;
  mod_databend_common_expression_expression -> mod_databend_common_datavalues_types;
  mod_databend_common_expression_expression -> mod_databend_common_expression_function;
  mod_databend_common_expression_expression -> mod_databend_common_expression_values;
  mod_databend_common_expression_expression -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_expression_expression -> mod_databend_query_exchange [dir=both]; // best-effort not accurate
  mod_databend_common_expression_function -> mod_databend_common_datavalues_types;
  mod_databend_common_expression_schema -> mod_databend_storages_common_table_meta_frozen;
  mod_databend_common_expression_types -> mod_databend_common_column_bitmap;
  mod_databend_common_expression_types -> mod_databend_common_expression_values [dir=both]; // best-effort not accurate
  mod_databend_common_expression_types -> mod_databend_common_functions_aggregates [dir=both]; // best-effort not accurate
  mod_databend_common_expression_types -> mod_databend_common_meta_client_required;
  mod_databend_common_expression_types -> mod_databend_common_pipeline_transforms_core;
  mod_databend_common_expression_types -> mod_databend_query_exchange;
  mod_databend_common_expression_types -> mod_databend_storages_common_table_meta_frozen;
  mod_databend_common_expression_utils -> mod_databend_common_ast_ast;
  mod_databend_common_expression_utils -> mod_databend_common_ast_parser;
  mod_databend_common_expression_utils -> mod_databend_common_column_bitmap;
  mod_databend_common_expression_utils -> mod_databend_common_expression_block;
  mod_databend_common_expression_utils -> mod_databend_common_expression_expression;
  mod_databend_common_expression_utils -> mod_databend_common_expression_function;
  mod_databend_common_expression_utils -> mod_databend_common_expression_types;
  mod_databend_common_expression_utils -> mod_databend_common_expression_values;
  mod_databend_common_expression_utils -> mod_databend_common_meta_client_required;
  mod_databend_common_expression_utils -> mod_databend_common_meta_kvapi_kvapi [dir=both]; // best-effort not accurate
  mod_databend_common_expression_utils -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_expression_utils -> mod_databend_storages_common_table_meta_frozen;
  mod_databend_common_expression_values -> mod_databend_common_column_bitmap;
  mod_databend_common_expression_values -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_expression_values -> mod_databend_query_exchange;
  mod_databend_common_functions_aggregates -> mod_databend_common_column_bitmap;
  mod_databend_common_functions_aggregates -> mod_databend_common_expression_block;
  mod_databend_common_functions_aggregates -> mod_databend_common_expression_values;
  mod_databend_common_functions_aggregates -> mod_databend_common_sql_ddl;
  mod_databend_common_functions_aggregates -> mod_databend_query_exchange;
  mod_databend_common_functions_scalars -> mod_databend_common_column_bitmap;
  mod_databend_common_functions_scalars -> mod_databend_common_expression_aggregate;
  mod_databend_common_functions_scalars -> mod_databend_common_expression_function;
  mod_databend_common_functions_scalars -> mod_databend_common_expression_schema;
  mod_databend_common_functions_scalars -> mod_databend_common_expression_types;
  mod_databend_common_functions_scalars -> mod_databend_common_expression_values;
  mod_databend_common_functions_scalars -> mod_databend_common_meta_client_required;
  mod_databend_common_functions_scalars -> mod_databend_common_meta_kvapi_kvapi;
  mod_databend_common_meta_app_principal -> mod_databend_common_datavalues_types;
  mod_databend_common_meta_app_principal -> mod_databend_common_meta_client_required;
  mod_databend_common_meta_app_principal -> mod_databend_common_meta_kvapi_kvapi;
  mod_databend_common_meta_app_principal -> mod_databend_common_sql_ddl [dir=both]; // best-effort not accurate
  mod_databend_common_meta_app_principal -> mod_databend_query_exchange;
  mod_databend_common_meta_app_schema -> mod_databend_common_expression_schema;
  mod_databend_common_meta_app_schema -> mod_databend_common_meta_app_table [dir=both]; // best-effort not accurate
  mod_databend_common_meta_app_schema -> mod_databend_common_meta_app_tenant;
  mod_databend_common_meta_app_schema -> mod_databend_common_sql_ddl [dir=both]; // best-effort not accurate
  mod_databend_common_meta_app_schema -> mod_databend_query_exchange;
  mod_databend_common_meta_app_table -> mod_databend_common_expression_schema;
  mod_databend_common_meta_app_table -> mod_databend_common_meta_app_tenant;
  mod_databend_common_meta_app_table -> mod_databend_query_exchange;
  mod_databend_common_metrics_metrics -> mod_databend_common_sql_plans;
  mod_databend_common_native_write -> mod_databend_common_column_bitmap;
  mod_databend_common_pipeline_core -> mod_databend_common_base_metrics;
  mod_databend_common_pipeline_transforms_core -> mod_databend_common_expression_block;
  mod_databend_common_pipeline_transforms_core -> mod_databend_common_expression_schema;
  mod_databend_common_pipeline_transforms_core -> mod_databend_common_pipeline_transforms_sorts [dir=both]; // best-effort not accurate
  mod_databend_common_pipeline_transforms_sorts -> mod_databend_common_expression_block;
  mod_databend_common_pipeline_transforms_sorts -> mod_databend_common_expression_values;
  mod_databend_common_pipeline_transforms_sorts -> mod_databend_common_pipeline_core;
  mod_databend_common_pipeline_transforms_sorts -> mod_databend_common_sql_plans;
  mod_databend_common_sql_binder -> mod_databend_common_ast_ast;
  mod_databend_common_sql_binder -> mod_databend_common_ast_parser;
  mod_databend_common_sql_binder -> mod_databend_common_ast_statements;
  mod_databend_common_sql_binder -> mod_databend_common_base_runtime;
  mod_databend_common_sql_binder -> mod_databend_common_catalog_plan;
  mod_databend_common_sql_binder -> mod_databend_common_catalog_table_context;
  mod_databend_common_sql_binder -> mod_databend_common_datavalues_types;
  mod_databend_common_sql_binder -> mod_databend_common_expression_expression;
  mod_databend_common_sql_binder -> mod_databend_common_meta_app_principal;
  mod_databend_common_sql_binder -> mod_databend_common_meta_app_schema;
  mod_databend_common_sql_binder -> mod_databend_common_sql_expr;
  mod_databend_common_sql_binder -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_sql_ddl -> mod_databend_common_ast_ast;
  mod_databend_common_sql_ddl -> mod_databend_common_ast_statements;
  mod_databend_common_sql_ddl -> mod_databend_common_expression_schema;
  mod_databend_common_sql_ddl -> mod_databend_common_meta_app_table;
  mod_databend_common_sql_ddl -> mod_databend_common_meta_app_tenant;
  mod_databend_common_sql_ddl -> mod_databend_common_sql_plans;
  mod_databend_common_sql_ddl -> mod_databend_storages_common_table_meta_frozen;
  mod_databend_common_sql_executor -> mod_databend_common_meta_app_schema;
  mod_databend_common_sql_executor -> mod_databend_common_pipeline_core;
  mod_databend_common_sql_executor -> mod_databend_common_sql_plans;
  mod_databend_common_sql_executor -> mod_databend_query_physical_plans [dir=both]; // best-effort not accurate
  mod_databend_common_sql_expr -> mod_databend_common_ast_parser;
  mod_databend_common_sql_expr -> mod_databend_common_catalog_plan;
  mod_databend_common_sql_expr -> mod_databend_common_meta_app_schema;
  mod_databend_common_sql_expr -> mod_databend_common_sql_plans [dir=both]; // best-effort not accurate
  mod_databend_common_sql_plans -> mod_databend_common_ast_ast;
  mod_databend_common_sql_plans -> mod_databend_common_datavalues_types;
  mod_databend_common_sql_plans -> mod_databend_common_expression_schema;
  mod_databend_common_sql_plans -> mod_databend_common_meta_app_principal;
  mod_databend_common_sql_plans -> mod_databend_common_meta_app_schema;
  mod_databend_common_sql_plans -> mod_databend_common_meta_app_tenant;
  mod_databend_common_sql_plans -> mod_databend_common_pipeline_core;
  mod_databend_common_sql_plans -> mod_databend_query_exchange;
  mod_databend_common_sql_plans -> mod_databend_query_physical_plans [dir=both]; // best-effort not accurate
  mod_databend_functions_scalar_datetime_datetime -> mod_databend_common_datavalues_types;
  mod_databend_functions_scalar_datetime_datetime -> mod_databend_common_expression_function;
  mod_databend_functions_scalar_datetime_datetime -> mod_databend_common_expression_types;
  mod_databend_functions_scalar_datetime_datetime -> mod_databend_common_expression_utils;
  mod_databend_functions_scalar_datetime_datetime -> mod_databend_common_expression_values;
  mod_databend_query_exchange -> mod_databend_query_sessions;
  mod_databend_query_format -> mod_databend_common_pipeline_core;
  mod_databend_query_format -> mod_databend_common_sql_plans;
  mod_databend_query_format -> mod_databend_query_physical_plans;
  mod_databend_query_hash_join -> mod_databend_common_column_bitmap;
  mod_databend_query_hash_join -> mod_databend_common_expression_aggregate;
  mod_databend_query_hash_join -> mod_databend_common_expression_block;
  mod_databend_query_hash_join -> mod_databend_common_expression_expression;
  mod_databend_query_hash_join -> mod_databend_common_expression_function;
  mod_databend_query_hash_join -> mod_databend_common_expression_schema;
  mod_databend_query_hash_join -> mod_databend_common_expression_values;
  mod_databend_query_hash_join -> mod_databend_common_pipeline_core;
  mod_databend_query_hash_join -> mod_databend_common_sql_plans;
  mod_databend_query_hash_join -> mod_databend_query_sessions;
  mod_databend_query_interpreters -> mod_databend_common_ast_parser;
  mod_databend_query_interpreters -> mod_databend_common_ast_statements;
  mod_databend_query_interpreters -> mod_databend_common_base_base;
  mod_databend_query_interpreters -> mod_databend_common_catalog_table_context;
  mod_databend_query_interpreters -> mod_databend_common_expression_schema;
  mod_databend_query_interpreters -> mod_databend_common_meta_app_principal;
  mod_databend_query_interpreters -> mod_databend_common_meta_app_table;
  mod_databend_query_interpreters -> mod_databend_common_metrics_metrics;
  mod_databend_query_interpreters -> mod_databend_common_pipeline_core;
  mod_databend_query_interpreters -> mod_databend_common_sql_binder;
  mod_databend_query_interpreters -> mod_databend_common_sql_ddl;
  mod_databend_query_interpreters -> mod_databend_common_sql_expr;
  mod_databend_query_interpreters -> mod_databend_common_sql_plans;
  mod_databend_query_interpreters -> mod_databend_query_physical_plans;
  mod_databend_query_interpreters -> mod_databend_query_sessions;
  mod_databend_query_physical_plans -> mod_databend_common_catalog_plan;
  mod_databend_query_physical_plans -> mod_databend_common_catalog_table_context;
  mod_databend_query_physical_plans -> mod_databend_common_expression_expression;
  mod_databend_query_physical_plans -> mod_databend_common_expression_function;
  mod_databend_query_physical_plans -> mod_databend_common_expression_schema;
  mod_databend_query_physical_plans -> mod_databend_common_expression_values;
  mod_databend_query_physical_plans -> mod_databend_common_meta_app_schema;
  mod_databend_query_physical_plans -> mod_databend_common_meta_app_table;
  mod_databend_query_physical_plans -> mod_databend_common_sql_binder;
  mod_databend_query_physical_plans -> mod_databend_storages_common_table_meta_meta;
  mod_databend_query_query -> mod_databend_common_base_base;
  mod_databend_query_query -> mod_databend_common_expression_block;
  mod_databend_query_query -> mod_databend_common_expression_values;
  mod_databend_query_query -> mod_databend_common_meta_client_required;
  mod_databend_query_query -> mod_databend_query_exchange;
  mod_databend_query_query -> mod_databend_query_sessions;
  mod_databend_query_query -> mod_databend_query_v1 [dir=both]; // best-effort not accurate
  mod_databend_query_sessions -> mod_databend_common_ast_statements;
  mod_databend_query_sessions -> mod_databend_common_base_base;
  mod_databend_query_sessions -> mod_databend_common_base_runtime;
  mod_databend_query_sessions -> mod_databend_common_catalog_table_context;
  mod_databend_query_sessions -> mod_databend_common_expression_block;
  mod_databend_query_sessions -> mod_databend_common_meta_app_principal;
  mod_databend_query_sessions -> mod_databend_common_pipeline_core;
  mod_databend_query_sessions -> mod_databend_common_sql_plans;
  mod_databend_query_spillers -> mod_databend_common_expression_block;
  mod_databend_query_spillers -> mod_databend_common_expression_schema;
  mod_databend_query_spillers -> mod_databend_common_sql_plans;
  mod_databend_query_spillers -> mod_databend_query_sessions;
  mod_databend_query_v1 -> mod_databend_common_ast_ast;
  mod_databend_query_v1 -> mod_databend_common_ast_parser;
  mod_databend_query_v1 -> mod_databend_common_ast_statements;
  mod_databend_query_v1 -> mod_databend_common_base_base;
  mod_databend_query_v1 -> mod_databend_common_base_runtime;
  mod_databend_query_v1 -> mod_databend_common_expression_block;
  mod_databend_query_v1 -> mod_databend_common_meta_app_principal;
  mod_databend_query_v1 -> mod_databend_common_meta_app_tenant;
  mod_databend_query_v1 -> mod_databend_query_interpreters;
  mod_databend_query_v1 -> mod_databend_query_sessions;
}
